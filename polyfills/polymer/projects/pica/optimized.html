<!DOCTYPE html>
<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<html>
<head>
  <title>Pica</title>
  <script>
    /*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
(function() {

  var timer = {
    timers: {},
    time: function(name) {
      var timer = this.timers[name] || (this.timers[name] = 
          {time: 0, iterations: 0});
      if (!timer.timing) {
        timer.start = performance.now();
      }
      timer.timing = true;
    },
    timeEnd: function(name) {
      var timer = this.timers[name];
      if (timer) {
        timer.time += performance.now() - timer.start;
        timer.iterations++;
        timer.timing = false;
      }
    },
    dump: function() {
      Object.keys(this.timers).forEach(function(k) {
        var timer = this.timers[k];
        console.log(k, timer.time, timer.iterations);
      }, this);
    }
  }
  function startLogging() {
    //console.profile('boot');
    console.time('boot');
    console.time('scripts');
    //console.time('scripts/dom');
  }
  
  function scriptsDone() {
    console.timeEnd('scripts');
    console.time('polymer');
    //console.time('load event');
  }
  
  function domDone() {
    //console.timeEnd('load event');
    //console.profile('wc');
    //console.timeEnd('scripts/dom');
    //console.timeEnd('dom');
    //console.time('polymer');
    listenForWebComponentsReady();
    console.time('process imports');
  }
  
  function importsDone() {
    //console.timeEnd('process imports');
    //console.time('process elements');
    //console.profile('process elements');
  }
  
  function elementsDone() {
    //console.timeEnd('process elements');
    //console.profileEnd('wc');
  }

  function bootDone() {
    console.timeEnd('polymer');
    console.timeEnd('boot');
    //console.profileEnd('boot');
    timer.dump();
  }

  function listenForWebComponentsReady() {
    window.addEventListener('WebComponentsReady', function() {
      elementsDone();
      Platform.endOfMicrotask(bootDone);
    });
  }
  
  var logBoot = window.location.search.indexOf('logBoot') >= 0;
  if (logBoot) {
    startLogging();
    document.addEventListener('DOMContentLoaded', domDone);
    document.addEventListener('HTMLImportsLoaded', importsDone);
  }

  function queryAll(selector, root) {
    root = root || document;
    var nodes = root.querySelectorAll(selector).array();
    var scopeNodes = root.querySelectorAll('*');
    for (var i=0, l = scopeNodes.length, shadowRoot; i < l; i++) {
      shadowRoot = scopeNodes[i].shadowRoot;
      if (shadowRoot) {
        nodes = nodes.concat(queryAll(selector, shadowRoot));
      }
    }
    return nodes;
  }

  // exports
  window.logBoot = {
    scriptsDone: scriptsDone
  }

  window.queryAll = queryAll;
  window.timer = timer;
})();

  // Copyright (c) 2012 The Polymer Authors. All rights reserved.
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are
// met:
//
//    * Redistributions of source code must retain the above copyright
// notice, this list of conditions and the following disclaimer.
//    * Redistributions in binary form must reproduce the above
// copyright notice, this list of conditions and the following disclaimer
// in the documentation and/or other materials provided with the
// distribution.
//    * Neither the name of Google Inc. nor the names of its
// contributors may be used to endorse or promote products derived from
// this software without specific prior written permission.
//
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
// "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

// @version 0.0.20130905
function PointerGestureEvent(a,b){var c=b||{},d=document.createEvent("Event"),e={bubbles:!0,cancelable:!0};return Object.keys(e).forEach(function(a){a in c&&(e[a]=c[a])}),d.initEvent(a,e.bubbles,e.cancelable),Object.keys(c).forEach(function(a){d[a]=b[a]}),d.preventTap=this.preventTap,d}if(window.Platform=window.Platform||{},window.logFlags=window.logFlags||{},function(a){var b=a.flags||{};location.search.slice(1).split("&").forEach(function(a){a=a.split("="),a[0]&&(b[a[0]]=a[1]||!0)}),b.shadow=b.shadow||b.shadowdom||b.polyfill,b.shadow="native"===b.shadow?!1:b.shadow||!HTMLElement.prototype.createShadowRoot&&"polyfill",a.flags=b}(Platform),"polyfill"===Platform.flags.shadow){var SideTable;"undefined"!=typeof WeakMap&&navigator.userAgent.indexOf("Firefox/")<0?SideTable=WeakMap:function(){var a=Object.defineProperty,b=Date.now()%1e9;SideTable=function(){this.name="__st"+(1e9*Math.random()>>>0)+(b++ +"__")},SideTable.prototype={set:function(b,c){var d=b[this.name];d&&d[0]===b?d[1]=c:a(b,this.name,{value:[b,c],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){this.set(a,void 0)}}}();var ShadowDOMPolyfill={};!function(a){"use strict";function b(a){if(!a)throw new Error("Assertion failed")}function c(a,b){return Object.getOwnPropertyNames(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}function d(a,b){return Object.getOwnPropertyNames(b).forEach(function(c){switch(c){case"arguments":case"caller":case"length":case"name":case"prototype":case"toString":return}Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}function e(a,b){for(var c=0;c<b.length;c++)if(b[c]in a)return b[c]}function f(a){var b=a.__proto__||Object.getPrototypeOf(a),c=C.get(b);if(c)return c;var d=f(b),e=r(d);return o(b,e,a),e}function g(a,b){m(a,b,!0)}function h(a,b){m(b,a,!1)}function i(a){return/^on[a-z]+$/.test(a)}function j(a){return F?new Function("return this.impl."+a):function(){return this.impl[a]}}function k(a){return F?new Function("v","this.impl."+a+" = v"):function(b){this.impl[a]=b}}function l(a){return F?new Function("return this.impl."+a+".apply(this.impl, arguments)"):function(){return this.impl[a].apply(this.impl,arguments)}}function m(b,c,d){Object.getOwnPropertyNames(b).forEach(function(e){if(!(e in c)){I&&b.__lookupGetter__(e);var f;try{f=Object.getOwnPropertyDescriptor(b,e)}catch(g){f=J}var h,m;if(d&&"function"==typeof f.value)return c[e]=l(e),void 0;var n=i(e);h=n?a.getEventHandlerGetter(e):j(e),(f.writable||f.set)&&(m=n?a.getEventHandlerSetter(e):k(e)),Object.defineProperty(c,e,{get:h,set:m,configurable:f.configurable,enumerable:f.enumerable})}})}function n(a,b,c){var e=a.prototype;o(e,b,c),d(b,a)}function o(a,c,d){var e=c.prototype;b(void 0===C.get(a)),C.set(a,c),D.set(e,a),g(a,e),d&&h(e,d)}function p(a,b){return C.get(b.prototype)===a}function q(a){var b=Object.getPrototypeOf(a),c=f(b),d=r(c);return o(b,d,a),d}function r(a){function b(b){a.call(this,b)}return b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b}function s(a){return a instanceof E.EventTarget||a instanceof E.Event||a instanceof E.Range||a instanceof E.DOMImplementation}function t(a){return a instanceof M||a instanceof L||a instanceof N||a instanceof O||a instanceof K}function u(a){return null===a?null:(b(t(a)),a.polymerWrapper_||(a.polymerWrapper_=new(f(a))(a)))}function v(a){return null===a?null:(b(s(a)),a.impl)}function w(a){return a&&s(a)?v(a):a}function x(a){return a&&!s(a)?u(a):a}function y(a,c){null!==c&&(b(t(a)),b(void 0===c||s(c)),a.polymerWrapper_=c)}function z(a,b,c){Object.defineProperty(a.prototype,b,{get:c,configurable:!0,enumerable:!0})}function A(a,b){z(a,b,function(){return u(this.impl[b])})}function B(a,b){a.forEach(function(a){b.forEach(function(b){a.prototype[b]=function(){var a=x(this);return a[b].apply(a,arguments)}})})}var C=new SideTable,D=new SideTable,E=Object.create(null),F=!("securityPolicy"in document)||document.securityPolicy.allowsEval;if(F)try{var G=new Function("","return true;");F=G()}catch(H){}Object.getOwnPropertyNames(window);var I=/Firefox/.test(navigator.userAgent),J={get:function(){},set:function(){},configurable:!0,enumerable:!0},K=DOMImplementation,L=Event,M=Node,N=Window,O=Range;a.assert=b,a.constructorTable=C,a.defineGetter=z,a.defineWrapGetter=A,a.forwardMethodsToWrapper=B,a.isWrapperFor=p,a.mixin=c,a.nativePrototypeTable=D,a.oneOf=e,a.registerObject=q,a.registerWrapper=n,a.rewrap=y,a.unwrap=v,a.unwrapIfNeeded=w,a.wrap=u,a.wrapIfNeeded=x,a.wrappers=E}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){return a instanceof N.ShadowRoot}function c(a){var b=a.localName;return"content"===b||"shadow"===b}function d(a){return!!a.shadowRoot}function e(a){var b;return a.parentNode||(b=a.defaultView)&&M(b)||null}function f(f,g,h){if(h.length)return h.shift();if(b(f))return j(f)||a.getHostForShadowRoot(f);var i=a.eventParentsTable.get(f);if(i){for(var k=1;k<i.length;k++)h[k-1]=i[k];return i[0]}if(g&&c(f)){var l=f.parentNode;if(l&&d(l))for(var m=a.getShadowTrees(l),n=j(g),k=0;k<m.length;k++)if(m[k].contains(n))return n}return e(f)}function g(a){for(var d=[],e=a,g=[],i=[];e;){var j=null;if(c(e)){j=h(d);var k=d[d.length-1]||e;d.push(k)}else d.length||d.push(e);var l=d[d.length-1];g.push({target:l,currentTarget:e}),b(e)&&d.pop(),e=f(e,j,i)}return g}function h(a){for(var b=a.length-1;b>=0;b--)if(!c(a[b]))return a[b];return null}function i(d,e){for(var g=[];d;){for(var i=[],j=e,l=void 0;j;){var n=null;if(i.length){if(c(j)&&(n=h(i),k(l))){var o=i[i.length-1];i.push(o)}}else i.push(j);if(m(j,d))return i[i.length-1];b(j)&&i.pop(),l=j,j=f(j,n,g)}d=b(d)?a.getHostForShadowRoot(d):d.parentNode}}function j(b){return a.insertionParentTable.get(b)}function k(a){return j(a)}function l(a){for(var b;b=a.parentNode;)a=b;return a}function m(a,b){return l(a)===l(b)}function n(b,c){if(b===c)return!0;if(b instanceof N.ShadowRoot){var d=a.getHostForShadowRoot(b);return n(l(d),c)}return!1}function o(a){switch(a){case"DOMAttrModified":case"DOMAttributeNameChanged":case"DOMCharacterDataModified":case"DOMElementNameChanged":case"DOMNodeInserted":case"DOMNodeInsertedIntoDocument":case"DOMNodeRemoved":case"DOMNodeRemovedFromDocument":case"DOMSubtreeModified":return!0}return!1}function p(b){if(!P.get(b)){P.set(b,!0),o(b.type)||a.renderAllPending();var c=M(b.target),d=M(b);return q(d,c)}}function q(a,b){var c=g(b);return"load"===a.type&&2===c.length&&c[0].target instanceof N.Document&&c.shift(),X.set(a,c),r(a,c)&&s(a,c)&&t(a,c),T.set(a,w.NONE),R.set(a,null),a.defaultPrevented}function r(a,b){for(var c,d=b.length-1;d>0;d--){var e=b[d].target,f=b[d].currentTarget;if(e!==f&&(c=w.CAPTURING_PHASE,!u(b[d],a,c)))return!1}return!0}function s(a,b){var c=w.AT_TARGET;return u(b[0],a,c)}function t(a,b){for(var c,d=a.bubbles,e=1;e<b.length;e++){var f=b[e].target,g=b[e].currentTarget;if(f===g)c=w.AT_TARGET;else{if(!d||V.get(a))continue;c=w.BUBBLING_PHASE}if(!u(b[e],a,c))return}}function u(a,b,c){var d=a.target,e=a.currentTarget,f=O.get(e);if(!f)return!0;if("relatedTarget"in b){var g=L(b),h=M(g.relatedTarget),j=i(e,h);if(j===d)return!0;S.set(b,j)}T.set(b,c);var k=b.type,l=!1;Q.set(b,d),R.set(b,e);for(var m=0;m<f.length;m++){var n=f[m];if(n.removed)l=!0;else if(!(n.type!==k||!n.capture&&c===w.CAPTURING_PHASE||n.capture&&c===w.BUBBLING_PHASE))try{if("function"==typeof n.handler?n.handler.call(e,b):n.handler.handleEvent(b),V.get(b))return!1}catch(o){window.onerror?window.onerror(o.message):console.error(o)}}if(l){var p=f.slice();f.length=0;for(var m=0;m<p.length;m++)p[m].removed||f.push(p[m])}return!U.get(b)}function v(a,b,c){this.type=a,this.handler=b,this.capture=Boolean(c)}function w(a,b){return a instanceof Y?(this.impl=a,void 0):M(A(Y,"Event",a,b))}function x(a){return a&&a.relatedTarget?Object.create(a,{relatedTarget:{value:L(a.relatedTarget)}}):a}function y(a,b,c){var d=window[a],e=function(b,c){return b instanceof d?(this.impl=b,void 0):M(A(d,a,b,c))};return e.prototype=Object.create(b.prototype),c&&J(e.prototype,c),d&&(d.prototype["init"+a]?K(d,e,document.createEvent(a)):K(d,e,new d("temp"))),e}function z(a,b){return function(){arguments[b]=L(arguments[b]);var c=L(this);c[a].apply(c,arguments)}}function A(a,b,c,d){if(gb)return new a(c,x(d));var e=L(document.createEvent(b)),f=fb[b],g=[c];return Object.keys(f).forEach(function(a){var b=null!=d&&a in d?d[a]:f[a];"relatedTarget"===a&&(b=L(b)),g.push(b)}),e["init"+b].apply(e,g),e}function B(a){return"function"==typeof a?!0:a&&a.handleEvent}function C(a){this.impl=a}function D(b){return b instanceof N.ShadowRoot&&(b=a.getHostForShadowRoot(b)),L(b)}function E(a){I(a,jb)}function F(b,c,d,e){a.renderAllPending();for(var f=M(kb.call(c.impl,d,e)),h=g(f,this),i=0;i<h.length;i++){var j=h[i];if(j.currentTarget===b)return j.target}return null}function G(a){return function(){var b=W.get(this);return b&&b[a]&&b[a].value||null}}function H(a){var b=a.slice(2);return function(c){var d=W.get(this);d||(d=Object.create(null),W.set(this,d));var e=d[a];if(e&&this.removeEventListener(b,e.wrapped,!1),"function"==typeof c){var f=function(b){var d=c.call(this,b);d===!1?b.preventDefault():"onbeforeunload"===a&&"string"==typeof d&&(b.returnValue=d)};this.addEventListener(b,f,!1),d[a]={value:c,wrapped:f}}}}var I=a.forwardMethodsToWrapper,J=a.mixin,K=a.registerWrapper,L=a.unwrap,M=a.wrap,N=a.wrappers;new SideTable;var O=new SideTable,P=new SideTable,Q=new SideTable,R=new SideTable,S=new SideTable,T=new SideTable,U=new SideTable,V=new SideTable,W=new SideTable,X=new SideTable;v.prototype={equals:function(a){return this.handler===a.handler&&this.type===a.type&&this.capture===a.capture},get removed(){return null===this.handler},remove:function(){this.handler=null}};var Y=window.Event;w.prototype={get target(){return Q.get(this)},get currentTarget(){return R.get(this)},get eventPhase(){return T.get(this)},get path(){var a=new N.NodeList,b=X.get(this);if(b){for(var c=0,d=b.length-1,e=l(R.get(this)),f=0;d>=f;f++){var g=b[f].currentTarget,h=l(g);n(e,h)&&(f!==d||g instanceof N.Node)&&(a[c++]=g)}a.length=c}return a},stopPropagation:function(){U.set(this,!0)},stopImmediatePropagation:function(){U.set(this,!0),V.set(this,!0)}},K(Y,w,document.createEvent("Event"));var Z=y("UIEvent",w),$=y("CustomEvent",w),_={get relatedTarget(){return S.get(this)||M(L(this).relatedTarget)}},ab=J({initMouseEvent:z("initMouseEvent",14)},_),bb=J({initFocusEvent:z("initFocusEvent",5)},_),cb=y("MouseEvent",Z,ab),db=y("FocusEvent",Z,bb),eb=y("MutationEvent",w,{initMutationEvent:z("initMutationEvent",3),get relatedNode(){return M(this.impl.relatedNode)}}),fb=Object.create(null),gb=function(){try{new window.MouseEvent("click")}catch(a){return!1}return!0}();if(!gb){var hb=function(a,b,c){if(c){var d=fb[c];b=J(J({},d),b)}fb[a]=b};hb("Event",{bubbles:!1,cancelable:!1}),hb("CustomEvent",{detail:null},"Event"),hb("UIEvent",{view:null,detail:0},"Event"),hb("MouseEvent",{screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},"UIEvent"),hb("FocusEvent",{relatedTarget:null},"UIEvent")}var ib=window.EventTarget,jb=["addEventListener","removeEventListener","dispatchEvent"];[Node,Window].forEach(function(a){var b=a.prototype;jb.forEach(function(a){Object.defineProperty(b,a+"_",{value:b[a]})})}),C.prototype={addEventListener:function(a,b,c){if(B(b)){var d=new v(a,b,c),e=O.get(this);if(e){for(var f=0;f<e.length;f++)if(d.equals(e[f]))return}else e=[],O.set(this,e);e.push(d);var g=D(this);g.addEventListener_(a,p,!0)}},removeEventListener:function(a,b,c){c=Boolean(c);var d=O.get(this);if(d){for(var e=0,f=!1,g=0;g<d.length;g++)d[g].type===a&&d[g].capture===c&&(e++,d[g].handler===b&&(f=!0,d[g].remove()));if(f&&1===e){var h=D(this);h.removeEventListener_(a,p,!0)}}},dispatchEvent:function(a){var b=D(this);return b.dispatchEvent_(L(a))}},ib&&K(ib,C);var kb=document.elementFromPoint;a.adjustRelatedTarget=i,a.elementFromPoint=F,a.getEventHandlerGetter=G,a.getEventHandlerSetter=H,a.wrapEventTargetMethods=E,a.wrappers.CustomEvent=$,a.wrappers.Event=w,a.wrappers.EventTarget=C,a.wrappers.FocusEvent=db,a.wrappers.MouseEvent=cb,a.wrappers.MutationEvent=eb,a.wrappers.UIEvent=Z}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a,b){Object.defineProperty(a,b,{enumerable:!1})}function c(){this.length=0,b(this,"length")}function d(a){if(null==a)return a;for(var b=new c,d=0,e=a.length;e>d;d++)b[d]=f(a[d]);return b.length=e,b}function e(a,b){a.prototype[b]=function(){return d(this.impl[b].apply(this.impl,arguments))}}var f=a.wrap;c.prototype={item:function(a){return this[a]}},b(c.prototype,"item"),a.wrappers.NodeList=c,a.addWrapNodeListMethod=e,a.wrapNodeList=d}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){m(a instanceof i)}function c(a,b,c,d){if(a.nodeType!==i.DOCUMENT_FRAGMENT_NODE)return a.parentNode&&a.parentNode.removeChild(a),a.parentNode_=b,a.previousSibling_=c,a.nextSibling_=d,c&&(c.nextSibling_=a),d&&(d.previousSibling_=a),[a];for(var e,f=[];e=a.firstChild;)a.removeChild(e),f.push(e),e.parentNode_=b;for(var g=0;g<f.length;g++)f[g].previousSibling_=f[g-1]||c,f[g].nextSibling_=f[g+1]||d;return c&&(c.nextSibling_=f[0]),d&&(d.previousSibling_=f[f.length-1]),f}function d(a,b){var c=a.nodeType===i.DOCUMENT_NODE?a:a.ownerDocument;c!==b.ownerDocument&&c.adoptNode(b)}function e(b,c){if(c.length){var d=b.ownerDocument;if(d!==c[0].ownerDocument)for(var e=0;e<c.length;e++)a.adoptNodeNoRemove(c[e],d)}}function f(a,b){e(a,b);var c=b.length;if(1===c)return p(b[0]);for(var d=p(a.ownerDocument.createDocumentFragment()),f=0;c>f;f++)d.appendChild(p(b[f]));return d}function g(a){if(a.invalidateShadowRenderer()){for(var b=a.firstChild;b;){m(b.parentNode===a);var c=b.nextSibling,d=p(b),e=d.parentNode;e&&w.call(e,d),b.previousSibling_=b.nextSibling_=b.parentNode_=null,b=c}a.firstChild_=a.lastChild_=null}else for(var c,f=p(a),g=f.firstChild;g;)c=g.nextSibling,w.call(f,g),g=c}function h(a){var b=a.parentNode;return b&&b.invalidateShadowRenderer()}function i(a){m(a instanceof s),j.call(this,a),this.parentNode_=void 0,this.firstChild_=void 0,this.lastChild_=void 0,this.nextSibling_=void 0,this.previousSibling_=void 0}var j=a.wrappers.EventTarget,k=a.wrappers.NodeList,l=a.defineWrapGetter,m=a.assert,n=a.mixin,o=a.registerWrapper,p=a.unwrap,q=a.wrap,r=a.wrapIfNeeded,s=window.Node,t=s.prototype.appendChild,u=s.prototype.insertBefore,v=s.prototype.replaceChild,w=s.prototype.removeChild,x=s.prototype.compareDocumentPosition;i.prototype=Object.create(j.prototype),n(i.prototype,{appendChild:function(a){if(b(a),this.invalidateShadowRenderer()||h(a)){var e=this.lastChild,g=null,i=c(a,this,e,g);this.lastChild_=i[i.length-1],e||(this.firstChild_=i[0]),t.call(this.impl,f(this,i))}else d(this,a),t.call(this.impl,p(a));return a.nodeWasAdded_(),a},insertBefore:function(a,g){if(!g)return this.appendChild(a);if(b(a),b(g),m(g.parentNode===this),this.invalidateShadowRenderer()||h(a)){var i=g.previousSibling,j=g,k=c(a,this,i,j);this.firstChild===g&&(this.firstChild_=k[0]);var l=p(g),n=l.parentNode;n?u.call(n,f(this,k),l):e(this,k)}else d(this,a),u.call(this.impl,p(a),p(g));return a.nodeWasAdded_(),a},removeChild:function(a){if(b(a),a.parentNode!==this)throw new Error("NotFoundError");var c=p(a);if(this.invalidateShadowRenderer()){var d=this.firstChild,e=this.lastChild,f=a.nextSibling,g=a.previousSibling,h=c.parentNode;h&&w.call(h,c),d===a&&(this.firstChild_=f),e===a&&(this.lastChild_=g),g&&(g.nextSibling_=f),f&&(f.previousSibling_=g),a.previousSibling_=a.nextSibling_=a.parentNode_=void 0}else w.call(this.impl,c);return a},replaceChild:function(a,e){if(b(a),b(e),e.parentNode!==this)throw new Error("NotFoundError");var g=p(e);if(this.invalidateShadowRenderer()||h(a)){var i=e.previousSibling,j=e.nextSibling;j===a&&(j=a.nextSibling);var k=c(a,this,i,j);this.firstChild===e&&(this.firstChild_=k[0]),this.lastChild===e&&(this.lastChild_=k[k.length-1]),e.previousSibling_=e.nextSibling_=e.parentNode_=void 0,g.parentNode&&v.call(g.parentNode,f(this,k),g)}else d(this,a),v.call(this.impl,p(a),g);return a.nodeWasAdded_(),e},nodeWasAdded_:function(){},hasChildNodes:function(){return null===this.firstChild},get parentNode(){return void 0!==this.parentNode_?this.parentNode_:q(this.impl.parentNode)},get firstChild(){return void 0!==this.firstChild_?this.firstChild_:q(this.impl.firstChild)},get lastChild(){return void 0!==this.lastChild_?this.lastChild_:q(this.impl.lastChild)},get nextSibling(){return void 0!==this.nextSibling_?this.nextSibling_:q(this.impl.nextSibling)},get previousSibling(){return void 0!==this.previousSibling_?this.previousSibling_:q(this.impl.previousSibling)},get parentElement(){for(var a=this.parentNode;a&&a.nodeType!==i.ELEMENT_NODE;)a=a.parentNode;return a},get textContent(){for(var a="",b=this.firstChild;b;b=b.nextSibling)a+=b.textContent;return a},set textContent(a){if(this.invalidateShadowRenderer()){if(g(this),""!==a){var b=this.impl.ownerDocument.createTextNode(a);this.appendChild(b)}}else this.impl.textContent=a},get childNodes(){for(var a=new k,b=0,c=this.firstChild;c;c=c.nextSibling)a[b++]=c;return a.length=b,a},cloneNode:function(a){if(!this.invalidateShadowRenderer())return q(this.impl.cloneNode(a));var b=q(this.impl.cloneNode(!1));if(a)for(var c=this.firstChild;c;c=c.nextSibling)b.appendChild(c.cloneNode(!0));return b},contains:function(a){if(!a)return!1;if(a=r(a),a===this)return!0;var b=a.parentNode;return b?this.contains(b):!1},compareDocumentPosition:function(a){return x.call(this.impl,p(a))}}),l(i,"ownerDocument"),o(s,i,document.createDocumentFragment()),delete i.prototype.querySelector,delete i.prototype.querySelectorAll,i.prototype=n(Object.create(j.prototype),i.prototype),a.wrappers.Node=i}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a,c){for(var d,e=a.firstElementChild;e;){if(e.matches(c))return e;if(d=b(e,c))return d;e=e.nextElementSibling}return null}function c(a,b,d){for(var e=a.firstElementChild;e;)e.matches(b)&&(d[d.length++]=e),c(e,b,d),e=e.nextElementSibling;return d}var d={querySelector:function(a){return b(this,a)},querySelectorAll:function(a){return c(this,a,new NodeList)}},e={getElementsByTagName:function(a){return this.querySelectorAll(a)},getElementsByClassName:function(a){return this.querySelectorAll("."+a)},getElementsByTagNameNS:function(a,b){if("*"===a)return this.getElementsByTagName(b);for(var c=new NodeList,d=this.getElementsByTagName(b),e=0,f=0;e<d.length;e++)d[e].namespaceURI===a&&(c[f++]=d[e]);return c.length=f,c}};a.GetElementsByInterface=e,a.SelectorsInterface=d}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){for(;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.nextSibling;return a}function c(a){for(;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.previousSibling;return a}var d=a.wrappers.NodeList,e={get firstElementChild(){return b(this.firstChild)},get lastElementChild(){return c(this.lastChild)},get childElementCount(){for(var a=0,b=this.firstElementChild;b;b=b.nextElementSibling)a++;return a},get children(){for(var a=new d,b=0,c=this.firstElementChild;c;c=c.nextElementSibling)a[b++]=c;return a.length=b,a}},f={get nextElementSibling(){return b(this.nextSibling)},get previousElementSibling(){return c(this.previousSibling)}};a.ChildNodeInterface=f,a.ParentNodeInterface=e}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){d.call(this,a)}var c=a.ChildNodeInterface,d=a.wrappers.Node,e=a.mixin,f=a.registerWrapper,g=window.CharacterData;b.prototype=Object.create(d.prototype),e(b.prototype,{get textContent(){return this.data},set textContent(a){this.data=a}}),e(b.prototype,c),f(g,b,document.createTextNode("")),a.wrappers.CharacterData=b}(this.ShadowDOMPolyfill),function(a){"use strict";function b(b,c){var d=b.parentNode;if(d&&d.shadowRoot){var e=a.getRendererForHost(d);e.dependsOnAttribute(c)&&e.invalidate()}}function c(a){g.call(this,a)}function d(a,c,d){var e=d||c;Object.defineProperty(a,c,{get:function(){return this.impl[c]},set:function(a){this.impl[c]=a,b(this,e)},configurable:!0,enumerable:!0})}var e=a.ChildNodeInterface,f=a.GetElementsByInterface,g=a.wrappers.Node,h=a.ParentNodeInterface,i=a.SelectorsInterface;a.addWrapNodeListMethod;var j=a.mixin,k=a.oneOf,l=a.registerWrapper,m=a.wrappers,n=new SideTable,o=window.Element,p=k(o.prototype,["matches","mozMatchesSelector","msMatchesSelector","webkitMatchesSelector"]),q=o.prototype[p];c.prototype=Object.create(g.prototype),j(c.prototype,{createShadowRoot:function(){var b=new m.ShadowRoot(this);n.set(this,b);var c=a.getRendererForHost(this);return c.invalidate(),b},get shadowRoot(){return n.get(this)||null},setAttribute:function(a,c){this.impl.setAttribute(a,c),b(this,a)},removeAttribute:function(a){this.impl.removeAttribute(a),b(this,a)},matches:function(a){return q.call(this.impl,a)}}),c.prototype[p]=function(a){return this.matches(a)},o.prototype.webkitCreateShadowRoot&&(c.prototype.webkitCreateShadowRoot=c.prototype.createShadowRoot),d(c.prototype,"id"),d(c.prototype,"className","class"),j(c.prototype,e),j(c.prototype,f),j(c.prototype,h),j(c.prototype,i),l(o,c),a.matchesName=p,a.wrappers.Element=c}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){switch(a){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}}function c(a){return a.replace(p,b)}function d(a){switch(a.nodeType){case Node.ELEMENT_NODE:for(var b,d=a.tagName.toLowerCase(),f="<"+d,g=a.attributes,h=0;b=g[h];h++)f+=" "+b.name+'="'+c(b.value)+'"';return f+=">",q[d]?f:f+e(a)+"</"+d+">";case Node.TEXT_NODE:return c(a.nodeValue);case Node.COMMENT_NODE:return"<!--"+c(a.nodeValue)+"-->";default:throw console.error(a),new Error("not implemented")}}function e(a){for(var b="",c=a.firstChild;c;c=c.nextSibling)b+=d(c);return b}function f(a,b,c){var d=c||"div";a.textContent="";var e=n(a.ownerDocument.createElement(d));e.innerHTML=b;for(var f;f=e.firstChild;)a.appendChild(o(f))}function g(a){j.call(this,a)}function h(b){k(g,b,function(){return a.renderAllPending(),this.impl[b]})}function i(b){Object.defineProperty(g.prototype,b,{value:function(){return a.renderAllPending(),this.impl[b].apply(this.impl,arguments)},configurable:!0,enumerable:!0})}var j=a.wrappers.Element,k=a.defineGetter,l=a.mixin,m=a.registerWrapper,n=a.unwrap,o=a.wrap,p=/&|<|"/g,q={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},r=window.HTMLElement;g.prototype=Object.create(j.prototype),l(g.prototype,{get innerHTML(){return e(this)},set innerHTML(a){this.invalidateShadowRenderer()?f(this,a,this.tagName):this.impl.innerHTML=a},get outerHTML(){return d(this)},set outerHTML(a){var b=this.parentNode;b&&(b.invalidateShadowRenderer(),this.impl.outerHTML=a)}}),["clientHeight","clientLeft","clientTop","clientWidth","offsetHeight","offsetLeft","offsetTop","offsetWidth","scrollHeight","scrollLeft","scrollTop","scrollWidth"].forEach(h),["getBoundingClientRect","getClientRects","scrollIntoView"].forEach(i),m(r,g,document.createElement("b")),a.wrappers.HTMLElement=g,a.getInnerHTML=e,a.setInnerHTML=f}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){c.call(this,a)}var c=a.wrappers.HTMLElement,d=a.mixin,e=a.registerWrapper,f=window.HTMLContentElement;b.prototype=Object.create(c.prototype),d(b.prototype,{get select(){return this.getAttribute("select")},set select(a){this.setAttribute("select",a)},setAttribute:function(a,b){c.prototype.setAttribute.call(this,a,b),"select"===String(a).toLowerCase()&&this.invalidateShadowRenderer(!0)}}),f&&e(f,b),a.wrappers.HTMLContentElement=b}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){c.call(this,a)}var c=a.wrappers.HTMLElement,d=a.mixin,e=a.registerWrapper,f=window.HTMLShadowElement;b.prototype=Object.create(c.prototype),d(b.prototype,{}),f&&e(f,b),a.wrappers.HTMLShadowElement=b}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){if(!a.defaultView)return a;var b=m.get(a);if(!b){for(b=a.implementation.createHTMLDocument("");b.lastChild;)b.removeChild(b.lastChild);m.set(a,b)}return b}function c(a){for(var c,d=b(a.ownerDocument),e=j(d.createDocumentFragment());c=a.firstChild;)e.appendChild(c);return e}function d(a){if(e.call(this,a),!n){var b=c(a);l.set(this,k(b))}}var e=a.wrappers.HTMLElement,f=a.getInnerHTML,g=a.mixin,h=a.registerWrapper,i=a.setInnerHTML,j=a.unwrap,k=a.wrap,l=new SideTable,m=new SideTable,n=window.HTMLTemplateElement;d.prototype=Object.create(e.prototype),g(d.prototype,{get content(){return n?k(this.impl.content):l.get(this)},get innerHTML(){return f(this.content)},set innerHTML(a){i(this.content,a)}}),n&&h(n,d),a.wrappers.HTMLTemplateElement=d}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){switch(a.localName){case"content":return new c(a);case"shadow":return new e(a);case"template":return new f(a)}d.call(this,a)}var c=a.wrappers.HTMLContentElement,d=a.wrappers.HTMLElement,e=a.wrappers.HTMLShadowElement,f=a.wrappers.HTMLTemplateElement;a.mixin;var g=a.registerWrapper,h=window.HTMLUnknownElement;b.prototype=Object.create(d.prototype),g(h,b),a.wrappers.HTMLUnknownElement=b}(this.ShadowDOMPolyfill),function(a){"use strict";var b=a.GetElementsByInterface,c=a.ParentNodeInterface,d=a.SelectorsInterface,e=a.mixin,f=a.registerObject,g=f(document.createDocumentFragment());e(g.prototype,c),e(g.prototype,d),e(g.prototype,b);var h=f(document.createTextNode("")),i=f(document.createComment(""));a.wrappers.Comment=i,a.wrappers.DocumentFragment=g,a.wrappers.Text=h}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){var b=i(a.impl.ownerDocument.createDocumentFragment());c.call(this,b),g(b,this);var d=a.shadowRoot;k.set(this,d),j.set(this,a)}var c=a.wrappers.DocumentFragment,d=a.elementFromPoint,e=a.getInnerHTML,f=a.mixin,g=a.rewrap,h=a.setInnerHTML,i=a.unwrap,j=new SideTable,k=new SideTable;b.prototype=Object.create(c.prototype),f(b.prototype,{get innerHTML(){return e(this)},set innerHTML(a){h(this,a),this.invalidateShadowRenderer()},get olderShadowRoot(){return k.get(this)||null},invalidateShadowRenderer:function(){return j.get(this).invalidateShadowRenderer()},elementFromPoint:function(a,b){return d(this,this.ownerDocument,a,b)},getElementById:function(a){return this.querySelector("#"+a)}}),a.wrappers.ShadowRoot=b,a.getHostForShadowRoot=function(a){return j.get(a)}}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){a.previousSibling_=a.previousSibling,a.nextSibling_=a.nextSibling,a.parentNode_=a.parentNode}function c(a){a.firstChild_=a.firstChild,a.lastChild_=a.lastChild}function d(a){F(a instanceof D);for(var d=a.firstChild;d;d=d.nextSibling)b(d);c(a)}function e(a){var b=J(a);d(a),b.firstChild&&(b.textContent="")}function f(a,c){var e=J(a),f=J(c);f.nodeType===D.DOCUMENT_FRAGMENT_NODE?d(c):(h(c),b(c)),a.lastChild_=a.lastChild,a.lastChild===a.firstChild&&(a.firstChild_=a.firstChild);var g=K(e.lastChild);g&&(g.nextSibling_=g.nextSibling),e.appendChild(f)}function g(a,c){var d=J(a),e=J(c);b(c),c.previousSibling&&(c.previousSibling.nextSibling_=c),c.nextSibling&&(c.nextSibling.previousSibling_=c),a.lastChild===c&&(a.lastChild_=c),a.firstChild===c&&(a.firstChild_=c),d.removeChild(e)}function h(a){var b=J(a),c=b.parentNode;c&&g(K(c),a)}function i(a,b){k(b).push(a),z(a,b);var c=M.get(a);c||M.set(a,c=[]),c.push(b)}function j(a){L.set(a,[])}function k(a){return L.get(a)}function l(a){for(var b=[],c=0,d=a.firstChild;d;d=d.nextSibling)b[c++]=d;return b}function m(a,b,c){for(var d=l(a),e=0;e<d.length;e++){var f=d[e];if(b(f)){if(c(f)===!1)return}else m(f,b,c)}}function n(a,b){var c=b.getAttribute("select");if(!c)return!0;if(c=c.trim(),!c)return!0;if(a.nodeType!==D.ELEMENT_NODE)return!1;if(!Q.test(c))return!1;if(":"===c[0]&&!R.test(c))return!1;try{return a.matches(c)}catch(d){return!1}}function o(){H=null,T.forEach(function(a){a.render()}),T=[]}function p(a){this.host=a,this.dirty=!1,this.invalidateAttributes(),this.associateNode(a)}function q(a){var b=O.get(a);return b||(b=new p(a),O.set(a,b)),b}function r(a){for(;a;a=a.parentNode)if(a instanceof E)return a;return null}function s(a){return q(G(a))}function t(a){return"content"===a.localName}function u(a){return"content"===a.localName}function v(a){return"shadow"===a.localName}function w(a){return"shadow"===a.localName}function x(a){return a.shadowRoot}function y(a){for(var b=[],c=a.shadowRoot;c;c=c.olderShadowRoot)b.push(c);return b}function z(a,b){N.set(a,b)}function A(a){new p(a).render()}var B=a.wrappers.HTMLContentElement,C=a.wrappers.HTMLShadowElement,D=a.wrappers.Node,E=a.wrappers.ShadowRoot,F=a.assert,G=a.getHostForShadowRoot;a.mixin;var H,I=a.oneOf,J=a.unwrap,K=a.wrap,L=new SideTable,M=new SideTable,N=new SideTable,O=new SideTable,P=new SideTable,Q=/^[*.:#[a-zA-Z_|]/,R=new RegExp("^:("+["link","visited","target","enabled","disabled","checked","indeterminate","nth-child","nth-last-child","nth-of-type","nth-last-of-type","first-child","last-child","first-of-type","last-of-type","only-of-type"].join("|")+")"),S=I(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout"]),T=[];p.prototype={render:function(){if(this.dirty){this.invalidateAttributes(),this.treeComposition();var a=this.host,b=a.shadowRoot;this.removeAllChildNodes(this.host);var c=l(b);c.forEach(function(c){this.renderNode(a,b,c,!1)},this),this.dirty=!1}},invalidate:function(){if(!this.dirty){if(this.dirty=!0,T.push(this),H)return;H=window[S](o,0)}},renderNode:function(a,b,c,d){if(x(c)){this.appendChild(a,c);var e=q(c);e.dirty=!0,e.render()}else t(c)?this.renderInsertionPoint(a,b,c,d):v(c)?this.renderShadowInsertionPoint(a,b,c):this.renderAsAnyDomTree(a,b,c,d)},renderAsAnyDomTree:function(a,b,c,d){if(this.appendChild(a,c),x(c))A(c);else{var e=c,f=l(e);P.get(e)&&this.removeAllChildNodes(e),f.forEach(function(a){this.renderNode(e,b,a,d)},this)}},renderInsertionPoint:function(a,b,c,d){var e=k(c);e.length?(this.removeAllChildNodes(c),e.forEach(function(c){t(c)&&d?this.renderInsertionPoint(a,b,c,d):this.renderAsAnyDomTree(a,b,c,d)},this)):this.renderFallbackContent(a,c),this.remove(c)},renderShadowInsertionPoint:function(a,b,c){var d=b.olderShadowRoot;if(d){z(d,c),this.remove(c);var e=l(d);e.forEach(function(b){this.renderNode(a,d,b,!0)},this)}else this.renderFallbackContent(a,c)},renderFallbackContent:function(a,b){var c=l(b);this.associateNode(b),this.remove(b),c.forEach(function(b){this.appendChild(a,b)},this)},invalidateAttributes:function(){this.attributes=Object.create(null)},updateDependentAttributes:function(a){if(a){var b=this.attributes;/\.\w+/.test(a)&&(b["class"]=!0),/#\w+/.test(a)&&(b.id=!0),a.replace(/\[\s*([^\s=\|~\]]+)/g,function(a,c){b[c]=!0})}},dependsOnAttribute:function(a){return this.attributes[a]},distribute:function(a,b){var c=!1,d=this;return m(a,u,function(a){j(a),d.updateDependentAttributes(a.getAttribute("select"));for(var e=0;e<b.length;e++){var f=b[e];void 0!==f&&n(f,a)&&(i(f,a),b[e]=void 0,c=!0)}}),c?b.filter(function(a){return void 0!==a}):b},treeComposition:function(){var a=this.host,b=a.shadowRoot,c=[],d=l(a);d.forEach(function(a){if(t(a)){var b=k(a);b&&b.length||(b=l(a)),c.push.apply(c,b)}else c.push(a)});for(var e,f;b;){if(e=void 0,m(b,w,function(a){return e=a,!1}),f=e,c=this.distribute(b,c),f){var g=b.olderShadowRoot;if(g){b=g,z(b,f);continue}break}break}},appendChild:function(a,b){this.associateNode(a),f(a,b)},remove:function(a){this.associateNode(a.parentNode),h(a)},removeAllChildNodes:function(a){this.associateNode(a),e(a)},associateNode:function(a){P.set(a,this)}},D.prototype.invalidateShadowRenderer=function(){var a=P.get(this);return a?(a.invalidate(),!0):!1},B.prototype.getDistributedNodes=function(){var a=P.get(this);return a&&a.render(),k(this)},C.prototype.nodeWasAdded_=B.prototype.nodeWasAdded_=function(){this.invalidateShadowRenderer();var a,b=r(this);b&&(a=s(b)),P.set(this,a),a&&a.invalidate()},a.eventParentsTable=M,a.getRendererForHost=q,a.getShadowTrees=y,a.insertionParentTable=N,a.renderAllPending=o,a.visual={removeAllChildNodes:e,appendChild:f,removeChild:g}
}(this.ShadowDOMPolyfill),function(a){"use strict";function b(b){if(window[b]){d(!a.wrappers[b]);var i=function(a){c.call(this,a)};i.prototype=Object.create(c.prototype),e(i.prototype,{get form(){return h(g(this).form)}}),f(window[b],i,document.createElement(b.slice(4,-7))),a.wrappers[b]=i}}var c=a.wrappers.HTMLElement,d=a.assert,e=a.mixin,f=a.registerWrapper,g=a.unwrap,h=a.wrap,i=["HTMLButtonElement","HTMLFieldSetElement","HTMLInputElement","HTMLKeygenElement","HTMLLabelElement","HTMLLegendElement","HTMLObjectElement","HTMLOptionElement","HTMLOutputElement","HTMLSelectElement","HTMLTextAreaElement"];i.forEach(b)}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){k.call(this,a)}function c(a){var c=document[a];b.prototype[a]=function(){return v(c.apply(this.impl,arguments))}}function d(a,b){y.call(b.impl,u(a)),e(a,b)}function e(a,b){a.shadowRoot&&b.adoptNode(a.shadowRoot),a instanceof n&&f(a,b);for(var c=a.firstChild;c;c=c.nextSibling)e(c,b)}function f(a,b){var c=a.olderShadowRoot;c&&b.adoptNode(c)}function g(a){this.impl=a}function h(a,b){var c=document.implementation[b];a.prototype[b]=function(){return v(c.apply(this.impl,arguments))}}function i(a,b){var c=document.implementation[b];a.prototype[b]=function(){return c.apply(this.impl,arguments)}}var j=a.GetElementsByInterface,k=a.wrappers.Node,l=a.ParentNodeInterface,m=a.SelectorsInterface,n=a.wrappers.ShadowRoot,o=a.defineWrapGetter,p=a.elementFromPoint,q=a.forwardMethodsToWrapper,r=a.matchesName,s=a.mixin,t=a.registerWrapper,u=a.unwrap,v=a.wrap,w=a.wrapEventTargetMethods;a.wrapNodeList;var x=new SideTable;b.prototype=Object.create(k.prototype),o(b,"documentElement"),o(b,"body"),o(b,"head"),["createComment","createDocumentFragment","createElement","createElementNS","createEvent","createEventNS","createRange","createTextNode","getElementById"].forEach(c);var y=document.adoptNode;if(s(b.prototype,{adoptNode:function(a){return a.parentNode&&a.parentNode.removeChild(a),d(a,this),a},elementFromPoint:function(a,b){return p(this,this,a,b)}}),document.register){var z=document.register;b.prototype.register=function(b,c){function d(a){return a?(this.impl=a,void 0):document.createElement(b)}var e=c.prototype;if(a.nativePrototypeTable.get(e))throw new Error("NotSupportedError");for(var f,g=Object.getPrototypeOf(e),h=[];g&&!(f=a.nativePrototypeTable.get(g));)h.push(g),g=Object.getPrototypeOf(g);if(!f)throw new Error("NotSupportedError");for(var i=Object.create(f),j=h.length-1;j>=0;j--)i=Object.create(i);return["createdCallback","enteredDocumentCallback","leftDocumentCallback","attributeChangedCallback"].forEach(function(a){var b=e[a];b&&(i[a]=function(){b.apply(v(this),arguments)})}),z.call(u(this),b,{prototype:i}),d.prototype=e,d.prototype.constructor=d,a.constructorTable.set(i,d),a.nativePrototypeTable.set(e,i),d},q([window.HTMLDocument||window.Document],["register"])}q([window.HTMLBodyElement,window.HTMLDocument||window.Document,window.HTMLHeadElement,window.HTMLHtmlElement],["appendChild","compareDocumentPosition","contains","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","insertBefore","querySelector","querySelectorAll","removeChild","replaceChild",r]),q([window.HTMLDocument||window.Document],["adoptNode","contains","createComment","createDocumentFragment","createElement","createElementNS","createEvent","createEventNS","createRange","createTextNode","elementFromPoint","getElementById"]),s(b.prototype,j),s(b.prototype,l),s(b.prototype,m),s(b.prototype,{get implementation(){var a=x.get(this);return a?a:(a=new g(u(this).implementation),x.set(this,a),a)}}),t(window.Document,b,document.implementation.createHTMLDocument("")),window.HTMLDocument&&t(window.HTMLDocument,b),w([window.HTMLBodyElement,window.HTMLDocument||window.Document,window.HTMLHeadElement]),h(g,"createDocumentType"),h(g,"createDocument"),h(g,"createHTMLDocument"),i(g,"hasFeature"),t(window.DOMImplementation,g),q([window.DOMImplementation],["createDocumentType","createDocument","createHTMLDocument","hasFeature"]),a.adoptNodeNoRemove=d,a.wrappers.DOMImplementation=g,a.wrappers.Document=b}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){c.call(this,a)}var c=a.wrappers.EventTarget,d=a.mixin,e=a.registerWrapper,f=a.unwrap,g=a.unwrapIfNeeded,h=a.wrap,i=a.renderAllPending,j=window.Window;b.prototype=Object.create(c.prototype);var k=window.getComputedStyle;j.prototype.getComputedStyle=function(a,b){return i(),k.call(this||window,g(a),b)},["addEventListener","removeEventListener","dispatchEvent"].forEach(function(a){j.prototype[a]=function(){var b=h(this||window);return b[a].apply(b,arguments)}}),d(b.prototype,{getComputedStyle:function(a,b){return k.call(f(this),g(a),b)}}),e(j,b),a.wrappers.Window=b}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){this.impl=a}function c(a){return new b(a)}function d(a){return a.map(c)}function e(a){var b=this;this.impl=new k(function(c){a.call(b,d(c),b)})}var f=a.defineGetter,g=a.defineWrapGetter,h=a.registerWrapper,i=a.unwrapIfNeeded,j=a.wrapNodeList;a.wrappers;var k=window.MutationObserver||window.WebKitMutationObserver;if(k){var l=window.MutationRecord;b.prototype={get addedNodes(){return j(this.impl.addedNodes)},get removedNodes(){return j(this.impl.removedNodes)}},["target","previousSibling","nextSibling"].forEach(function(a){g(b,a)}),["type","attributeName","attributeNamespace","oldValue"].forEach(function(a){f(b,a,function(){return this.impl[a]})}),l&&h(l,b),window.Node,e.prototype={observe:function(a,b){this.impl.observe(i(a),b)},disconnect:function(){this.impl.disconnect()},takeRecords:function(){return d(this.impl.takeRecords())}},a.wrappers.MutationObserver=e,a.wrappers.MutationRecord=b}}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){this.impl=a}var c=a.registerWrapper,d=a.unwrap,e=a.unwrapIfNeeded,f=a.wrap,g=window.Range;b.prototype={get startContainer(){return f(this.impl.startContainer)},get endContainer(){return f(this.impl.endContainer)},get commonAncestorContainer(){return f(this.impl.commonAncestorContainer)},setStart:function(a,b){this.impl.setStart(e(a),b)},setEnd:function(a,b){this.impl.setEnd(e(a),b)},setStartBefore:function(a){this.impl.setStartBefore(e(a))},setStartAfter:function(a){this.impl.setStartAfter(e(a))},setEndBefore:function(a){this.impl.setEndBefore(e(a))},setEndAfter:function(a){this.impl.setEndAfter(e(a))},selectNode:function(a){this.impl.selectNode(e(a))},selectNodeContents:function(a){this.impl.selectNodeContents(e(a))},compareBoundaryPoints:function(a,b){return this.impl.compareBoundaryPoints(a,d(b))},extractContents:function(){return f(this.impl.extractContents())},cloneContents:function(){return f(this.impl.cloneContents())},insertNode:function(a){this.impl.insertNode(e(a))},surroundContents:function(a){this.impl.surroundContents(e(a))},cloneRange:function(){return f(this.impl.cloneRange())},isPointInRange:function(a,b){return this.impl.isPointInRange(e(a),b)},comparePoint:function(a,b){return this.impl.comparePoint(e(a),b)},intersectsNode:function(a){return this.impl.intersectsNode(e(a))}},g.prototype.createContextualFragment&&(b.prototype.createContextualFragment=function(a){return f(this.impl.createContextualFragment(a))}),c(window.Range,b),a.wrappers.Range=b}(this.ShadowDOMPolyfill),function(a){"use strict";function b(a){var b=c[a],d=window[b];if(d){var e=document.createElement(a),f=e.constructor;window[b]=f}}a.isWrapperFor;var c={a:"HTMLAnchorElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",audio:"HTMLAudioElement",br:"HTMLBRElement",base:"HTMLBaseElement",body:"HTMLBodyElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",dl:"HTMLDListElement",datalist:"HTMLDataListElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",embed:"HTMLEmbedElement",fieldset:"HTMLFieldSetElement",font:"HTMLFontElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",hr:"HTMLHRElement",head:"HTMLHeadElement",h1:"HTMLHeadingElement",html:"HTMLHtmlElement",iframe:"HTMLIFrameElement",input:"HTMLInputElement",li:"HTMLLIElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",link:"HTMLLinkElement",map:"HTMLMapElement",menu:"HTMLMenuElement",menuitem:"HTMLMenuItemElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",del:"HTMLModElement",ol:"HTMLOListElement",object:"HTMLObjectElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",script:"HTMLScriptElement",select:"HTMLSelectElement",source:"HTMLSourceElement",span:"HTMLSpanElement",style:"HTMLStyleElement",caption:"HTMLTableCaptionElement",col:"HTMLTableColElement",table:"HTMLTableElement",tr:"HTMLTableRowElement",thead:"HTMLTableSectionElement",tbody:"HTMLTableSectionElement",textarea:"HTMLTextAreaElement",title:"HTMLTitleElement",ul:"HTMLUListElement",video:"HTMLVideoElement"};Object.keys(c).forEach(b),Object.getOwnPropertyNames(a.wrappers).forEach(function(b){window[b]=a.wrappers[b]}),a.knownElements=c}(this.ShadowDOMPolyfill),function(){window.wrap=function(a){return a.impl?a:ShadowDOMPolyfill.wrap(a)},window.unwrap=function(a){return a.impl?ShadowDOMPolyfill.unwrap(a):a};var a=window.getComputedStyle;window.getComputedStyle=function(b,c){return a.call(window,wrap(b),c)},Object.defineProperties(HTMLElement.prototype,{webkitShadowRoot:{get:function(){return this.shadowRoot}}});var b=HTMLElement.prototype.createShadowRoot;HTMLElement.prototype.createShadowRoot=function(){var a=b.call(this);return a.host=this,a},HTMLElement.prototype.webkitCreateShadowRoot=HTMLElement.prototype.createShadowRoot}(),function(a){function b(a,b){var c="";return Array.prototype.forEach.call(a,function(a){c+=a.textContent+"\n\n"}),b||(c=c.replace(m,"")),c}function c(a){var b=document.createElement("style");b.textContent=a,document.head.appendChild(b);var c=b.sheet.cssRules;return b.parentNode.removeChild(b),c}function d(a){for(var b=0,c=[];b<a.length;b++)c.push(a[b].cssText);return c.join("\n\n")}function e(a){a&&f().appendChild(document.createTextNode(a))}function f(){return g||(g=document.createElement("style"),g.setAttribute("ShadowCSSShim","")),g}var g,h={strictStyling:!1,registry:{},shimStyling:function(a,b,c){if(a){var d=this.registerDefinition(a,b,c);this.strictStyling&&this.applyScopeToContent(a,b),this.shimPolyfillDirectives(d.rootStyles,b),this.applyShimming(d.scopeStyles,b),this.applyPolyfillRules(d.rootStyles,b)}},shimShadowDOMStyling:function(a,b){this.shimPolyfillDirectives(a,b),this.applyShimming(a,b),this.applyPolyfillRules(a,b)},registerDefinition:function(a,b,c){var d=this.registry[b]={root:a,name:b,extendsName:c},e=a.querySelectorAll("style");e=e?Array.prototype.slice.call(e,0):[],d.rootStyles=e,d.scopeStyles=d.rootStyles;var f=this.registry[d.extendsName];return f&&a.querySelector("shadow")&&(d.scopeStyles=f.scopeStyles.concat(d.scopeStyles)),d},applyScopeToContent:function(a,b){a&&(Array.prototype.forEach.call(a.querySelectorAll("*"),function(a){a.setAttribute(b,"")}),Array.prototype.forEach.call(a.querySelectorAll("template"),function(a){this.applyScopeToContent(a.content,b)},this))},shimPolyfillDirectives:function(a,b){a&&Array.prototype.forEach.call(a,function(a){a.textContent=this.convertPolyfillDirectives(a.textContent,b)},this)},convertPolyfillDirectives:function(a,b){for(var c,d,e="",f=0;c=n.exec(a);)e+=a.substring(f,c.index),d=c[1].slice(0,-2).replace(r,b),e+=this.scopeSelector(d,b)+"{",f=n.lastIndex;return e+=a.substring(f,a.length)},applyShimming:function(a,b){var c=this.shimAtHost(a,b);c+=this.shimScoping(a,b),e(c)},shimAtHost:function(a,b){return a?this.convertAtHostStyles(a,b):void 0},convertAtHostStyles:function(a,e){for(var f,g=b(a),h="",j=0;f=i.exec(g);)h+=g.substring(j,f.index),h+=this.scopeHostCss(f[1],e),j=i.lastIndex;h+=g.substring(j,g.length);var k=new RegExp("^"+e+q,"m"),g=d(this.findAtHostRules(c(h),k));return g},scopeHostCss:function(a,b){for(var c,d="";c=j.exec(a);)d+=this.scopeHostSelector(c[1],b)+" "+c[2]+"\n ";return d},scopeHostSelector:function(a,b){var c=[],d=a.split(","),e="[is="+b+"]";return d.forEach(function(a){a=a.trim(),a.match(k)?a=a.replace(k,b+"$1$3, "+e+"$1$3"):a.match(l)&&(a=b+a+", "+e+a),c.push(a)},this),c.join(", ")},findAtHostRules:function(a,b){return Array.prototype.filter.call(a,this.isHostRule.bind(this,b))},isHostRule:function(a,b){return b.selectorText&&b.selectorText.match(a)||b.cssRules&&this.findAtHostRules(b.cssRules,a).length||b.type==CSSRule.WEBKIT_KEYFRAMES_RULE},shimScoping:function(a,b){return a?this.convertScopedStyles(a,b):void 0},convertScopedStyles:function(a,d){Array.prototype.forEach.call(a,function(a){a.parentNode&&a.parentNode.removeChild(a)});var e=b(a).replace(i,"");e=this.convertPseudos(e);var f=c(e);return e=this.scopeRules(f,d)},convertPseudos:function(a){return a.replace(p," [pseudo=$1]")},scopeRules:function(a,b){var c="";return Array.prototype.forEach.call(a,function(a){a.selectorText&&a.style&&a.style.cssText?(c+=this.scopeSelector(a.selectorText,b,this.strictStyling)+" {\n ",c+=this.propertiesFromRule(a)+"\n}\n\n"):a.media?(c+="@media "+a.media.mediaText+" {\n",c+=this.scopeRules(a.cssRules,b),c+="\n}\n\n"):a.cssText&&(c+=a.cssText+"\n\n")},this),c},scopeSelector:function(a,b,c){var d=[],e=a.split(",");return e.forEach(function(a){a=a.trim(),this.selectorNeedsScoping(a,b)&&(a=c?this.applyStrictSelectorScope(a,b):this.applySimpleSelectorScope(a,b)),d.push(a)},this),d.join(", ")},selectorNeedsScoping:function(a,b){var c="("+b+"|\\[is="+b+"\\])",d=new RegExp("^"+c+q,"m");return!a.match(d)},applySimpleSelectorScope:function(a,b){return b+" "+a+", "+"[is="+b+"] "+a},applyStrictSelectorScope:function(a,b){var c=[" ",">","+","~"],d=a,e="["+b+"]";return c.forEach(function(a){var b=d.split(a);d=b.map(function(a){var b=a.trim();return b&&c.indexOf(b)<0&&b.indexOf(e)<0&&(a=b.replace(/([^:]*)(:*)(.*)/,"$1"+e+"$2$3")),a}).join(a)}),d},propertiesFromRule:function(a){var b=a.style.cssText;return a.style.content&&!a.style.content.match(/['"]+/)&&(b="content: '"+a.style.content+"';\n"+a.style.cssText.replace(/content:[^;]*;/g,"")),b},applyPolyfillRules:function(a,b){if(a){var c="";Array.prototype.forEach.call(a,function(a){c+=this.extractPolyfillRules(a.textContent,b)+"\n\n"},this)}e(c)},extractPolyfillRules:function(a,b){for(var c,d="";c=o.exec(a);)rule=c[1].slice(0,-1).replace(r,b),d+=rule+"\n\n";return d}},i=/@host[^{]*{(([^}]*?{[^{]*?}[\s\S]*?)+)}/gim,j=/([^{]*)({[\s\S]*?})/gim,k=/(.*)((?:\*)|(?:\:scope))(.*)/,l=/^[.\[:]/,m=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,n=/\/\*\s*@polyfill ([^*]*\*+([^/*][^*]*\*+)*\/)([^{]*?){/gim,o=/\/\*\s@polyfill-rule([^*]*\*+([^/*][^*]*\*+)*)\//gim,p=/::(x-[^\s{,(]*)/gim,q="([>\\s~+[.,{:][\\s\\S]*)?$",r=/@host/gim;if(window.ShadowDOMPolyfill){e("style { display: none !important; }\n");var s=document.querySelector("head");s.insertBefore(f(),s.childNodes[0])}a.ShadowCSS=h}(window.Platform)}else{var SideTable;"undefined"!=typeof WeakMap&&navigator.userAgent.indexOf("Firefox/")<0?SideTable=WeakMap:function(){var a=Object.defineProperty,b=Date.now()%1e9;SideTable=function(){this.name="__st"+(1e9*Math.random()>>>0)+(b++ +"__")},SideTable.prototype={set:function(b,c){var d=b[this.name];d&&d[0]===b?d[1]=c:a(b,this.name,{value:[b,c],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){this.set(a,void 0)}}}(),function(){window.templateContent=window.templateContent||function(a){return a.content},window.wrap=window.unwrap=function(a){return a};var a=HTMLElement.prototype.webkitCreateShadowRoot;HTMLElement.prototype.webkitCreateShadowRoot=function(){var b=this.webkitShadowRoot,c=a.call(this);return c.olderShadowRoot=b,c.host=this,CustomElements.watchShadow(this),c},Object.defineProperties(HTMLElement.prototype,{shadowRoot:{get:function(){return this.webkitShadowRoot}},createShadowRoot:{value:function(){return this.webkitCreateShadowRoot()}}}),window.templateContent=function(a){if(window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(a),!a.content&&!a._content){for(var b=document.createDocumentFragment();a.firstChild;)b.appendChild(a.firstChild);a._content=b}return a.content||a._content}}()}if(function(a){function b(a){for(var b=a||{},d=1;d<arguments.length;d++){var e=arguments[d];try{for(var f in e)c(f,e,b)}catch(g){}}return b}function c(a,b,c){var e=d(b,a);Object.defineProperty(c,a,e)}function d(a,b){if(a){var c=Object.getOwnPropertyDescriptor(a,b);return c||d(Object.getPrototypeOf(a),b)}}Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();return d.push.apply(d,arguments),b.apply(a,d)}}),a.mixin=b}(window.Platform),function(a){"use strict";function b(a,b,c){var d="string"==typeof a?document.createElement(a):a.cloneNode(!0);if(d.innerHTML=b,c)for(var e in c)d.setAttribute(e,c[e]);return d}var c=DOMTokenList.prototype.add,d=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){for(var a=0;a<arguments.length;a++)c.call(this,arguments[a])},DOMTokenList.prototype.remove=function(){for(var a=0;a<arguments.length;a++)d.call(this,arguments[a])},DOMTokenList.prototype.toggle=function(a,b){1==arguments.length&&(b=!this.contains(a)),b?this.add(a):this.remove(a)},DOMTokenList.prototype.switch=function(a,b){a&&this.remove(a),b&&this.add(b)};var e=function(){return Array.prototype.slice.call(this)},f=window.NamedNodeMap||window.MozNamedAttrMap||{};NodeList.prototype.array=e,f.prototype.array=e,HTMLCollection.prototype.array=e;var g=function(a,b){e.call(this).forEach(a,b)};if(NodeList.prototype.forEach=g,f.prototype.forEach=g,HTMLCollection.prototype.forEach=g,!window.performance){var h=Date.now();window.performance={now:function(){return Date.now()-h}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var a=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return a?function(b){return a(function(){b(performance.now())})}:function(a){return window.setTimeout(a,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(a){clearTimeout(a)}}()),a.createDOM=b}(window.Platform),window.templateContent=window.templateContent||function(a){return a.content},function(a){a=a||(window.Inspector={});var b;window.sinspect=function(a,d){b||(b=window.open("","ShadowDOM Inspector",null,!0),b.document.write(c),b.api={shadowize:shadowize}),f(a||wrap(document.body),d)};var c=["<!DOCTYPE html>","<html>","  <head>","    <title>ShadowDOM Inspector</title>","    <style>","      body {","      }","      pre {",'        font: 9pt "Courier New", monospace;',"        line-height: 1.5em;","      }","      tag {","        color: purple;","      }","      ul {","         margin: 0;","         padding: 0;","         list-style: none;","      }","      li {","         display: inline-block;","         background-color: #f1f1f1;","         padding: 4px 6px;","         border-radius: 4px;","         margin-right: 4px;","      }","    </style>","  </head>","  <body>",'    <ul id="crumbs">',"    </ul>",'    <div id="tree"></div>',"  </body>","</html>"].join("\n"),d=[],e=function(){var a=b.document,c=a.querySelector("#crumbs");c.textContent="";for(var e,g=0;e=d[g];g++){var h=a.createElement("a");h.href="#",h.textContent=e.localName,h.idx=g,h.onclick=function(a){for(var b;d.length>this.idx;)b=d.pop();f(b.shadow||b,b),a.preventDefault()},c.appendChild(a.createElement("li")).appendChild(h)}},f=function(a,c){var f=b.document;k=[];var g=c||a;d.push(g),e(),f.body.querySelector("#tree").innerHTML="<pre>"+j(a,a.childNodes)+"</pre>"},g=Array.prototype.forEach.call.bind(Array.prototype.forEach),h={STYLE:1,SCRIPT:1,"#comment":1,TEMPLATE:1},i=function(a){return h[a.nodeName]},j=function(a,b,c){if(i(a))return"";var d=c||"";if(a.localName||11==a.nodeType){var e=a.localName||"shadow-root",f=d+l(a);"content"==e&&(b=a.getDistributedNodes()),f+="<br/>";var h=d+"&nbsp;&nbsp;";g(b,function(a){f+=j(a,a.childNodes,h)}),f+=d,{br:1}[e]||(f+="<tag>&lt;/"+e+"&gt;</tag>",f+="<br/>")}else{var k=a.textContent.trim();f=k?d+'"'+k+'"'+"<br/>":""}return f},k=[],l=function(a){var b="<tag>&lt;",c=a.localName||"shadow-root";return a.webkitShadowRoot||a.shadowRoot?(b+=' <button idx="'+k.length+'" onclick="api.shadowize.call(this)">'+c+"</button>",k.push(a)):b+=c||"shadow-root",a.attributes&&g(a.attributes,function(a){b+=" "+a.name+(a.value?'="'+a.value+'"':"")}),b+="&gt;</tag>"};shadowize=function(){var a=Number(this.attributes.idx.value),b=k[a];b?f(b.webkitShadowRoot||b.shadowRoot,b):(console.log("bad shadowize node"),console.dir(this))},a.output=j}(window.Inspector),function(a){"use strict";function b(){function a(a){"splice"===a[0].type&&"splice"===a[1].type&&(b=!0)}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var b=!1,c=[0];return Array.observe(c,a),c[1]=1,c.length=0,Object.deliverChangeRecords(a),b}function c(a){return+a===a>>>0}function d(a){return+a}function e(a){return a===Object(a)}function f(a,b){return a===b?0!==a||1/a===1/b:L(a)&&L(b)?!0:a!==a&&b!==b}function g(a){return"string"!=typeof a?!1:(a=a.trim(),""==a?!0:"."==a[0]?!1:T.test(a))}function h(a,b){if(b!==U)throw Error("Use Path.get to retrieve path objects");return""==a.trim()?this:c(a)?(this.push(a),this):(a.split(/\s*\.\s*/).filter(function(a){return a}).forEach(function(a){this.push(a)},this),I&&!H&&this.length&&(this.getValueFrom=this.compiledGetValueFromFn()),void 0)}function i(a){if(a instanceof h)return a;null==a&&(a=""),"string"!=typeof a&&(a=String(a));var b=V[a];if(b)return b;if(!g(a))return W;var b=new h(a,U);return V[a]=b,b}function j(b){for(var c=0;X>c&&b.check();)b.report(),c++;a.testingExposeCycleCount&&(a.dirtyCheckCycleCount=c)}function k(a){for(var b in a)return!1;return!0}function l(a){return k(a.added)&&k(a.removed)&&k(a.changed)}function m(a,b){var c={},d={},e={};for(var f in b){var g=a[f];(void 0===g||g!==b[f])&&(f in a?g!==b[f]&&(e[f]=g):d[f]=void 0)}for(var f in a)f in b||(c[f]=a[f]);return Array.isArray(a)&&a.length!==b.length&&(e.length=a.length),{added:c,removed:d,changed:e}}function n(a,b){var c=b||(Array.isArray(a)?[]:{});for(var d in a)c[d]=a[d];return Array.isArray(a)&&(c.length=a.length),c}function o(a,b,c,d){if(this.closed=!1,this.object=a,this.callback=b,this.target=c,this.token=d,this.reporting=!0,H){var e=this;this.boundInternalCallback=function(a){e.internalCallback(a)}}p(this)}function p(a){Z&&(Y.push(a),o._allObserversCount++)}function q(a,b,c,d){o.call(this,a,b,c,d),this.connect(),this.sync(!0)}function r(a,b,c,d){if(!Array.isArray(a))throw Error("Provided object is not an Array");q.call(this,a,b,c,d)}function s(a){this.arr=[],this.callback=a,this.isObserved=!0}function t(a,b,c,d,f,g,j){var b=b instanceof h?b:i(b);return b&&b.length&&e(a)?(o.call(this,a,c,d,f),this.valueFn=g,this.setValueFn=j,this.path=b,this.connect(),this.sync(!0),void 0):(this.value_=b?b.getValueFrom(a):void 0,this.value=g?g(this.value_):this.value_,this.closed=!0,void 0)}function u(a,b,c,d){o.call(this,void 0,a,b,c),this.valueFn=d,this.observed=[],this.values=[],this.started=!1}function v(a,b){if("function"==typeof Object.observe){var c=Object.getNotifier(a);return function(d,e){var f={object:a,type:d,name:b};2===arguments.length&&(f.oldValue=e),c.notify(f)}}}function w(a,b,c){for(var d={},e={},f=0;f<b.length;f++){var g=b[f];cb[g.type]?(g.name in c||(c[g.name]=g.oldValue),"updated"!=g.type&&("new"!=g.type?g.name in d?(delete d[g.name],delete c[g.name]):e[g.name]=!0:g.name in e?delete e[g.name]:d[g.name]=!0)):(console.error("Unknown changeRecord type: "+g.type),console.error(g))}for(var h in d)d[h]=a[h];for(var h in e)e[h]=void 0;var i={};for(var h in c)if(!(h in d||h in e)){var j=a[h];c[h]!==j&&(i[h]=j)}return{added:d,removed:e,changed:i}}function x(a,b,c,d,e,f){for(var g=f-e+1,h=c-b+1,i=new Array(g),j=0;g>j;j++)i[j]=new Array(h),i[j][0]=j;for(var k=0;h>k;k++)i[0][k]=k;for(var j=1;g>j;j++)for(var k=1;h>k;k++)if(d[e+j-1]===a[b+k-1])i[j][k]=i[j-1][k-1];else{var l=i[j-1][k]+1,m=i[j][k-1]+1;i[j][k]=m>l?l:m}return i}function y(a){for(var b=a.length-1,c=a[0].length-1,d=a[b][c],e=[];b>0||c>0;)if(0!=b)if(0!=c){var f,g=a[b-1][c-1],h=a[b-1][c],i=a[b][c-1];f=i>h?g>h?h:g:g>i?i:g,f==g?(g==d?e.push(db):(e.push(eb),d=g),b--,c--):f==h?(e.push(gb),b--,d=h):(e.push(fb),c--,d=i)}else e.push(gb),b--;else e.push(fb),c--;return e.reverse(),e}function z(a,b,c){for(var d=0;c>d;d++)if(a[d]!==b[d])return d;return c}function A(a,b,c){for(var d=a.length,e=b.length,f=0;c>f&&a[--d]===b[--e];)f++;return f}function B(a,b,c){return{index:a,removed:b,addedCount:c}}function C(a,b,c,d,e,f){var g=0,h=0,i=Math.min(c-b,f-e);if(0==b&&0==e&&(g=z(a,d,i)),c==a.length&&f==d.length&&(h=A(a,d,i-g)),b+=g,e+=g,c-=h,f-=h,0==c-b&&0==f-e)return[];if(b==c){for(var j=B(b,[],0);f>e;)j.removed.push(d[e++]);return[j]}if(e==f)return[B(b,[],c-b)];for(var k=y(x(a,b,c,d,e,f)),j=void 0,l=[],m=b,n=e,o=0;o<k.length;o++)switch(k[o]){case db:j&&(l.push(j),j=void 0),m++,n++;break;case eb:j||(j=B(m,[],0)),j.addedCount++,m++,j.removed.push(d[n]),n++;break;case fb:j||(j=B(m,[],0)),j.addedCount++,m++;break;case gb:j||(j=B(m,[],0)),j.removed.push(d[n]),n++}return j&&l.push(j),l}function D(a,b,c,d){return c>b||a>d?-1:b==c||d==a?0:c>a?d>b?b-c:d-c:b>d?d-a:b-a}function E(a,b,c,d){for(var e=B(b,c,d),f=!1,g=0,h=0;h<a.length;h++){var i=a[h];if(i.index+=g,!f){var j=D(e.index,e.index+e.removed.length,i.index,i.index+i.addedCount);if(j>=0){a.splice(h,1),h--,g-=i.addedCount-i.removed.length,e.addedCount+=i.addedCount-j;var k=e.removed.length+i.removed.length-j;if(e.addedCount||k){var c=i.removed;if(e.index<i.index){var l=e.removed.slice(0,i.index-e.index);Array.prototype.push.apply(l,c),c=l}if(e.index+e.removed.length>i.index+i.addedCount){var m=e.removed.slice(i.index+i.addedCount-e.index);Array.prototype.push.apply(c,m)}e.removed=c,i.index<e.index&&(e.index=i.index)}else f=!0}else if(e.index<i.index){f=!0,a.splice(h,0,e),h++;var n=e.addedCount-e.removed.length;i.index+=n,g+=n}}}f||a.push(e)}function F(a,b){for(var e=[],f=0;f<b.length;f++){var g=b[f];switch(g.type){case"splice":E(e,g.index,g.removed.slice(),g.addedCount);break;case"new":case"updated":case"deleted":if(!c(g.name))continue;var h=d(g.name);if(0>h)continue;E(e,h,[g.oldValue],1);break;default:console.error("Unexpected record type: "+JSON.stringify(g))}}return e}function G(a,b){var c=[];return F(a,b).forEach(function(b){return 1==b.addedCount&&1==b.removed.length?(b.removed[0]!==a[b.index]&&c.push(b),void 0):(c=c.concat(C(a,b.index,b.index+b.addedCount,b.removed,0,b.removed.length)),void 0)}),c}var H=b(),I=!("securityPolicy"in document)||document.securityPolicy.allowsEval;if(I)try{var J=new Function("","return true;");I=J()}catch(K){}var L=a.Number.isNaN||function(b){return"number"==typeof b&&a.isNaN(b)},M="__proto__"in{}?function(a){return a}:function(a){var b=a.__proto__;if(!b)return a;var c=Object.create(b);return Object.getOwnPropertyNames(a).forEach(function(b){Object.defineProperty(c,b,Object.getOwnPropertyDescriptor(a,b))}),c},N="[$_a-zA-Z]",O="[$_a-zA-Z0-9]",P=N+"+"+O+"*",Q="(?:[0-9]|[1-9]+[0-9]+)",R="(?:"+P+"|"+Q+")",S="(?:"+R+")(?:\\s*\\.\\s*"+R+")*",T=new RegExp("^"+S+"$"),U={},V={};h.get=i,h.prototype=M({__proto__:[],valid:!0,toString:function(){return this.join(".")},getValueFrom:function(a,b){for(var c=0;c<this.length;c++){if(null==a)return;b&&b.observe(a),a=a[this[c]]}return a},compiledGetValueFromFn:function(){var a=this.map(function(a){return c(a)?'["'+a+'"]':"."+a}),b="",d="obj";b+="if (obj != null";for(var e=0;e<this.length-1;e++)this[e],d+=a[e],b+=" &&\n     "+d+" != null";return b+=")\n",d+=a[e],b+="  return "+d+";\nelse\n  return undefined;",new Function("obj",b)},setValueFrom:function(a,b){if(!this.length)return!1;for(var c=0;c<this.length-1;c++){if(void 0===a||null===a)return!1;a=a[this[c]]}return void 0===a||null===a?!1:(a[this[this.length-1]]=b,!0)}});var W=new h("",U);W.valid=!1,W.getValueFrom=W.setValueFrom=function(){};var X=1e3;o.prototype={internalCallback:function(a){this.closed||this.reporting&&this.check(a)&&(this.report(),this.testingResults&&(this.testingResults.anyChanged=!0))},close:function(){this.closed||(this.object&&"function"==typeof this.object.close&&this.object.close(),this.disconnect(),this.object=void 0,this.closed=!0)},deliver:function(a){this.closed||(H?(this.testingResults=a,Object.deliverChangeRecords(this.boundInternalCallback),this.testingResults=void 0):j(this))},report:function(){this.reporting&&(this.sync(!1),this.callback&&(this.reportArgs.push(this.token),this.invokeCallback(this.reportArgs)),this.reportArgs=void 0)},invokeCallback:function(a){try{this.callback.apply(this.target,a)}catch(b){o._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+b)}},reset:function(){this.closed||(H&&(this.reporting=!1,Object.deliverChangeRecords(this.boundInternalCallback),this.reporting=!0),this.sync(!0))}};var Y,Z=!H||a.forceCollectObservers;o._allObserversCount=0,Z&&(Y=[]);var $=!1,_="function"==typeof Object.deliverAllChangeRecords;a.Platform=a.Platform||{},a.Platform.performMicrotaskCheckpoint=function(){if(!$){if(_)return Object.deliverAllChangeRecords(),void 0;if(Z){$=!0;var b=0,c={};do{b++;var d=Y;Y=[],c.anyChanged=!1;for(var e=0;e<d.length;e++){var f=d[e];f.closed||(H?f.deliver(c):f.check()&&(c.anyChanged=!0,f.report()),Y.push(f))}}while(X>b&&c.anyChanged);a.testingExposeCycleCount&&(a.dirtyCheckCycleCount=b),o._allObserversCount=Y.length,$=!1}}},Z&&(a.Platform.clearObservers=function(){Y=[]}),q.prototype=M({__proto__:o.prototype,connect:function(){H&&Object.observe(this.object,this.boundInternalCallback)},sync:function(){H||(this.oldObject=n(this.object))},check:function(a){var b,c;if(H){if(!a)return!1;c={},b=w(this.object,a,c)}else c=this.oldObject,b=m(this.object,this.oldObject);return l(b)?!1:(this.reportArgs=[b.added||{},b.removed||{},b.changed||{}],this.reportArgs.push(function(a){return c[a]}),!0)},disconnect:function(){H?this.object&&Object.unobserve(this.object,this.boundInternalCallback):this.oldObject=void 0}}),r.prototype=M({__proto__:q.prototype,connect:function(){H&&Array.observe(this.object,this.boundInternalCallback)},sync:function(){H||(this.oldObject=this.object.slice())},check:function(a){var b;if(H){if(!a)return!1;b=G(this.object,a)}else b=C(this.object,0,this.object.length,this.oldObject,0,this.oldObject.length);return b&&b.length?(this.reportArgs=[b],!0):!1}}),r.applySplices=function(a,b,c){c.forEach(function(c){for(var d=[c.index,c.removed.length],e=c.index;e<c.index+c.addedCount;)d.push(b[e]),e++;Array.prototype.splice.apply(a,d)})};var ab=Object.getPrototypeOf({}),bb=Object.getPrototypeOf([]);s.prototype={reset:function(){this.isObserved=!this.isObserved},observe:function(a){if(e(a)&&a!==ab&&a!==bb){var b=this.arr.indexOf(a);b>=0&&this.arr[b+1]===this.isObserved||(0>b&&(b=this.arr.length,this.arr[b]=a,Object.observe(a,this.callback)),this.arr[b+1]=this.isObserved,this.observe(Object.getPrototypeOf(a)))}},cleanup:function(){for(var a=0,b=0,c=this.isObserved;b<this.arr.length;){var d=this.arr[b];this.arr[b+1]==c?(b>a&&(this.arr[a]=d,this.arr[a+1]=c),a+=2):Object.unobserve(d,this.callback),b+=2}this.arr.length=a}},t.prototype=M({__proto__:o.prototype,connect:function(){H&&(this.observedSet=new s(this.boundInternalCallback))},disconnect:function(){this.value=void 0,this.value_=void 0,this.observedSet&&(this.observedSet.reset(),this.observedSet.cleanup(),this.observedSet=void 0)},check:function(){return this.observedSet&&this.observedSet.reset(),this.value_=this.path.getValueFrom(this.object,this.observedSet),this.observedSet&&this.observedSet.cleanup(),f(this.value_,this.oldValue_)?!1:(this.value=this.valueFn?this.valueFn(this.value_):this.value_,this.reportArgs=[this.value,this.oldValue],!0)},sync:function(a){a&&(this.observedSet&&this.observedSet.reset(),this.value_=this.path.getValueFrom(this.object,this.observedSet),this.value=this.valueFn?this.valueFn(this.value_):this.value_,this.observedSet&&this.observedSet.cleanup()),this.oldValue_=this.value_,this.oldValue=this.value
},setValue:function(a){this.path&&("function"==typeof this.setValueFn&&(a=this.setValueFn(a)),this.path.setValueFrom(this.object,a))}}),u.prototype=M({__proto__:t.prototype,addPath:function(a,b){if(this.started)throw Error("Cannot add more paths once started.");var b=b instanceof h?b:i(b),c=b?b.getValueFrom(a):void 0;this.observed.push(a,b),this.values.push(c)},start:function(){this.connect(),this.sync(!0)},getValues:function(){this.observedSet&&this.observedSet.reset();for(var a=!1,b=0;b<this.observed.length;b+=2){var c=this.observed[b+1];if(c){var d=this.observed[b],e=c.getValueFrom(d,this.observedSet),g=this.values[b/2];f(e,g)||(this.values[b/2]=e,a=!0)}}return this.observedSet&&this.observedSet.cleanup(),a},check:function(){return this.getValues()?(this.value=this.valueFn(this.values),f(this.value,this.oldValue)?!1:(this.reportArgs=[this.value,this.oldValue],!0)):void 0},sync:function(a){a&&(this.getValues(),this.value=this.valueFn(this.values)),this.oldValue=this.value},close:function(){if(this.observed){for(var a=0;a<this.observed.length;a+=2){var b=this.observed[a];b&&"function"==typeof b.close&&b.close()}this.observed=void 0,this.values=void 0}o.prototype.close.call(this)}});var cb={"new":!0,updated:!0,deleted:!0};t.defineProperty=function(a,b,c){var d=c.object,e=i(c.path),f=v(a,b),g=new t(d,c.path,function(a,b){f&&f("updated",b)});return Object.defineProperty(a,b,{get:function(){return e.getValueFrom(d)},set:function(a){e.setValueFrom(d,a)},configurable:!0}),{close:function(){var c=e.getValueFrom(d);f&&g.deliver(),g.close(),Object.defineProperty(a,b,{value:c,writable:!0,configurable:!0})}}};var db=0,eb=1,fb=2,gb=3;a.Observer=o,a.Observer.hasObjectObserve=H,a.ArrayObserver=r,a.ArrayObserver.calculateSplices=function(a,b){return C(a,0,a.length,b,0,b.length)},a.ObjectObserver=q,a.PathObserver=t,a.CompoundPathObserver=u,a.Path=h}("undefined"!=typeof global&&global?global:this),function(){"use strict";function a(a,b,c,d){this.closed=!1,this.node=a,this.property=b,this.model=c,this.path=Path.get(d),(this.model instanceof PathObserver||this.model instanceof CompoundPathObserver)&&this.path===k?(this.observer=this.model,this.observer.target=this,this.observer.callback=this.valueChanged):this.observer=new PathObserver(this.model,this.path,this.valueChanged,this),this.valueChanged(this.value)}function b(b,c,d,e){this.conditional="?"==c[c.length-1],this.conditional&&(b.removeAttribute(c),c=c.slice(0,-1)),a.call(this,b,c,d,e)}function c(a){switch(a.type){case"checkbox":return l;case"radio":case"select-multiple":case"select-one":return"change";default:return"input"}}function d(b,d,e,f){a.call(this,b,d,e,f),this.eventType=c(this.node),this.boundNodeValueChanged=this.nodeValueChanged.bind(this),this.node.addEventListener(this.eventType,this.boundNodeValueChanged,!0)}function e(a){if(!a.ownerDocument.contains(a))return[];if(a.form)return i(a.form.elements,function(b){return b!=a&&"INPUT"==b.tagName&&"radio"==b.type&&b.name==a.name});var b=a.ownerDocument.querySelectorAll('input[type="radio"][name="'+a.name+'"]');return i(b,function(b){return b!=a&&!b.form})}function f(a,b,c){d.call(this,a,"checked",b,c)}function g(a,b,c){d.call(this,a,"value",b,c)}function h(a,b,c,e){d.call(this,a,b,c,e)}var i=Array.prototype.filter.call.bind(Array.prototype.filter),j="__proto__"in{}?function(a){return a}:function(a){var b=a.__proto__;if(!b)return a;var c=Object.create(b);return Object.getOwnPropertyNames(a).forEach(function(b){Object.defineProperty(c,b,Object.getOwnPropertyDescriptor(a,b))}),c};"function"!=typeof document.contains&&(Document.prototype.contains=function(a){return a===this||a.parentNode===this?!0:this.documentElement.contains(a)}),Node.prototype.bind=function(a,b,c){console.error("Unhandled binding to Node: ",this,a,b,c)},Node.prototype.unbind=function(a){this.bindings=this.bindings||{};var b=this.bindings[a];b&&"function"==typeof b.close&&b.close(),delete this.bindings[a]},Node.prototype.unbindAll=function(){if(this.bindings){for(var a=Object.keys(this.bindings),b=0;b<a.length;b++){var c=this.bindings[a[b]];c&&c.close()}this.bindings={}}};var k=Path.get("value");a.prototype={valueChanged:function(a){this.node[this.property]=this.sanitizeBoundValue(a)},sanitizeBoundValue:function(a){return void 0==a?"":String(a)},close:function(){this.closed||(this.observer.close(),this.observer=void 0,this.node=void 0,this.model=void 0,this.closed=!0)},get value(){return this.observer.value},set value(a){this.observer.setValue(a)},reset:function(){this.observer.reset()}},Text.prototype.bind=function(b,c,d){return"textContent"!==b?Node.prototype.bind.call(this,b,c,d):(this.unbind(b),this.bindings[b]=new a(this,"data",c,d))},b.prototype=j({__proto__:a.prototype,valueChanged:function(a){return this.conditional?(a?this.node.setAttribute(this.property,""):this.node.removeAttribute(this.property),void 0):(this.node.setAttribute(this.property,this.sanitizeBoundValue(a)),void 0)}}),Element.prototype.bind=function(a,c,d){return this.unbind(a),this.bindings[a]=new b(this,a,c,d)};var l;!function(){var a=document.createElement("div"),b=a.appendChild(document.createElement("input"));b.setAttribute("type","checkbox");var c,d=0;b.addEventListener("click",function(){d++,c=c||"click"}),b.addEventListener("change",function(){d++,c=c||"change"});var e=document.createEvent("MouseEvent");e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(e),l=1==d?"change":c}(),d.prototype=j({__proto__:a.prototype,nodeValueChanged:function(){this.value=this.node[this.property],this.reset(),this.postUpdateBinding(),Platform.performMicrotaskCheckpoint()},postUpdateBinding:function(){},close:function(){this.closed||(this.node.removeEventListener(this.eventType,this.boundNodeValueChanged,!0),a.prototype.close.call(this))}}),f.prototype=j({__proto__:d.prototype,sanitizeBoundValue:function(a){return Boolean(a)},postUpdateBinding:function(){"INPUT"===this.node.tagName&&"radio"===this.node.type&&e(this.node).forEach(function(a){var b=a.bindings.checked;b&&(b.value=!1)})}}),HTMLInputElement.prototype.bind=function(a,b,c){return"value"!==a&&"checked"!==a?HTMLElement.prototype.bind.call(this,a,b,c):(this.unbind(a),this.removeAttribute(a),this.bindings[a]="value"===a?new d(this,"value",b,c):new f(this,b,c))},HTMLTextAreaElement.prototype.bind=function(a,b,c){return"value"!==a?HTMLElement.prototype.bind.call(this,a,b,c):(this.unbind(a),this.removeAttribute(a),this.bindings[a]=new d(this,a,b,c))},g.prototype=j({__proto__:d.prototype,valueChanged:function(a){var b,c,e=this.node.parentNode instanceof HTMLSelectElement?this.node.parentNode:void 0;e&&e.bindings&&e.bindings.value instanceof h&&(b=e.bindings.value,c=e.value),d.prototype.valueChanged.call(this,a),b&&!b.closed&&e.value!==c&&b.nodeValueChanged()}}),HTMLOptionElement.prototype.bind=function(a,b,c){return"value"!==a?HTMLElement.prototype.bind.call(this,a,b,c):(this.unbind(a),this.removeAttribute(a),this.bindings[a]=new g(this,b,c))},h.prototype=j({__proto__:d.prototype,valueChanged:function(a){function b(){d.node[d.property]=a,d.node[d.property]!=a&&c--&&m(b)}if(this.node[this.property]=a,this.node[this.property]!=a){var c=2,d=this;m(b)}}}),HTMLSelectElement.prototype.bind=function(a,b,c){return"selectedindex"===a&&(a="selectedIndex"),"selectedIndex"!==a&&"value"!==a?HTMLElement.prototype.bind.call(this,a,b,c):(this.unbind(a),this.removeAttribute(a),this.bindings[a]=new h(this,a,b,c))};var m=function(){function a(a){this.nextRunner=a,this.value=!1,this.lastValue=this.value,this.scheduled=[],this.scheduledIds=[],this.running=!1,this.observer=new PathObserver(this,"value",this.run,this)}function b(a){var b=a[e];a[e]||(b=d++,a[e]=b),c.schedule(a,b)}a.prototype={schedule:function(a,b){if(!this.scheduledIds[b]){if(this.running)return this.nextRunner.schedule(a,b);this.scheduledIds[b]=!0,this.scheduled.push(a),this.lastValue===this.value&&(this.value=!this.value)}},run:function(){this.running=!0;for(var a=0;a<this.scheduled.length;a++){var b=this.scheduled[a],c=b[e];this.scheduledIds[c]=!1,"function"==typeof b?b():b.resolve()}this.scheduled=[],this.scheduledIds=[],this.lastValue=this.value,this.running=!1}};var c=new a(new a),d=1,e="__scheduledId__";return b}()}(this),function(a){"use strict";function b(a){if(!a)throw new Error("Assertion failed")}function c(a){for(;a.parentNode;)a=a.parentNode;return"function"==typeof a.getElementById?a:null}function d(a){return F[a.tagName]&&a.hasAttribute("template")}function e(a){return"TEMPLATE"==a.tagName||d(a)}function f(a){return G&&"TEMPLATE"==a.tagName}function g(a,b){var c=a.querySelectorAll(H);e(a)&&b(a),A(c,b)}function h(a){function b(a){HTMLTemplateElement.decorate(a)||h(a.content)}g(a,b)}function i(a,b){Object.getOwnPropertyNames(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))})}function j(a){if(!a.defaultView)return a;var b=a.templateContentsOwner_;if(!b){for(b=a.implementation.createHTMLDocument("");b.lastChild;)b.removeChild(b.lastChild);a.templateContentsOwner_=b}return b}function k(a){var b=a.ownerDocument.createElement("template");a.parentNode.insertBefore(b,a);for(var c=a.attributes,d=c.length;d-->0;){var e=c[d];E[e.name]&&("template"!==e.name&&b.setAttribute(e.name,e.value),a.removeAttribute(e.name))}return b}function l(a,b,c){var d=a.content;if(c)return d.appendChild(b),void 0;for(var e;e=b.firstChild;)d.appendChild(e)}function m(a){"TEMPLATE"===a.tagName?G||(J?a.__proto__=HTMLTemplateElement.prototype:i(a,HTMLTemplateElement.prototype)):(i(a,HTMLTemplateElement.prototype),Object.defineProperty(a,"content",L))}function n(a){a.setModelFn_||(a.setModelFn_=function(){t(a,a.model,a.bindingDelegate)}),I(a.setModelFn_)}function o(a,b,c,d){if(a&&a.length){for(var e,f=a.length,g=0,h=0,i=0;f>h;){if(g=a.indexOf("{{",h),i=0>g?-1:a.indexOf("}}",g+2),0>i){if(!e)return;e.push(a.slice(h));break}e=e||[],e.push(a.slice(h,g));var j=a.slice(g+2,i).trim();e.push(Path.get(j));var k=d&&d(j,b,c);e.push(k),h=i+2}return h===f&&e.push(""),e.hasOnePath=4===e.length,e.isSimplePath=e.hasOnePath&&""==e[0]&&""==e[3],e.combinator=function(a){for(var b=e[0],c=1;c<e.length;c+=3){var d=e.hasOnePath?a:a[(c-1)/3];void 0!==d&&(b+=d),b+=e[c+2]}return b},e}}function p(a,b,c,d){for(var e=0;e<a.length;e+=2){var f=a[e],g=a[e+1],h=c,i=g[1];if(g.hasOnePath){var j=g[2],k=j&&j(c,f,b);void 0!==k&&(h=k,i=M),g.isSimplePath||(h=new PathObserver(h,i,void 0,void 0,void 0,g.combinator),i=M)}else{for(var l=new CompoundPathObserver(void 0,void 0,void 0,g.combinator),e=1;e<g.length;e+=3){var m=c,n=g[e],j=g[e+1],k=j&&j(m,f,b);void 0!==k&&(m=k,n=M),l.addPath(m,n)}l.start(),h=l,i=M}var o=b.bind(f,h,i);d&&d.push(o)}}function q(a,c){b(a);for(var d,f=e(a),g=!1,h=!1,i=0;i<a.attributes.length;i++){var j=a.attributes[i],k=j.name,l=j.value;f&&(k===D?(g=!0,l=l||"{{}}"):(k===B||k===C)&&(h=!0,l=l||"{{}}"));var m=o(l,k,a,c);m&&(d=d||[],d.push(k,m))}return g&&!h&&(d=d||[],d.push(B,o("{{}}",B,a,c))),d}function r(a,b){if(a.nodeType===Node.ELEMENT_NODE)return q(a,b);if(a.nodeType===Node.TEXT_NODE){var c=o(a.data,"textContent",a,b);if(c)return["textContent",c]}}function s(a,b,c,d,e){if(b&&(b.templateRef&&(HTMLTemplateElement.decorate(a,b.templateRef),d&&(a.bindingDelegate_=d)),b.length&&p(b,a,c,e),b.children))for(var f=0,g=a.firstChild;g;g=g.nextSibling)s(g,b.children[f++],c,d,e)}function t(a,c,d){b(a);var e=d&&"function"==typeof d.prepareBinding?d.prepareBinding:void 0,f=r(a,e);f&&p(f,a,c);for(var g=a.firstChild;g;g=g.nextSibling)t(g,c,d)}function u(a,b){var c=a.cloneNode(!1);if(a.isTemplate_)return c;for(var d=a.firstChild;d;d=d.nextSibling)c.appendChild(u(d,b));return c}function v(a,b){var c=r(a,b);e(a)&&(a.isTemplate_=!0,c=c||[],c.templateRef=a,c.hasSubTemplate=!0);for(var d=a.firstChild,f=0;d;d=d.nextSibling,f++){var g=v(d,b);g&&(c=c||[],c.children=c.children||{},c.children[f]=g,g.hasSubTemplate&&(c.hasSubTemplate=!0))}return c}function w(a,b,c){this.firstNode=a,this.lastNode=b,this.model=c}function x(a,b){if(a.firstChild)for(var c=new w(a.firstChild,a.lastChild,b),d=c.firstNode;d;)d.templateInstance_=c,d=d.nextSibling}function y(a){this.closed=!1,this.templateElement_=a,this.terminators=[],this.iteratedValue=void 0,this.arrayObserver=void 0,this.depsChanged=!1,this.hasRepeat=!1,this.repeatModel=void 0,this.repeatPath=void 0,this.hasBind=!1,this.bindModel=void 0,this.bindPath=void 0,this.hasIf=!1,this.ifModel=void 0,this.ifPath=void 0}var z,A=Array.prototype.forEach.call.bind(Array.prototype.forEach);a.Map&&"function"==typeof a.Map.prototype.forEach?z=a.Map:(z=function(){this.keys=[],this.values=[]},z.prototype={set:function(a,b){var c=this.keys.indexOf(a);0>c?(this.keys.push(a),this.values.push(b)):this.values[c]=b},get:function(a){var b=this.keys.indexOf(a);if(!(0>b))return this.values[b]},"delete":function(a){var b=this.keys.indexOf(a);return 0>b?!1:(this.keys.splice(b,1),this.values.splice(b,1),!0)},forEach:function(a,b){for(var c=0;c<this.keys.length;c++)a.call(b||this,this.values[c],this.keys[c],this)}}),"function"!=typeof document.contains&&(Document.prototype.contains=function(a){return a===this||a.parentNode===this?!0:this.documentElement.contains(a)});var B="bind",C="repeat",D="if",E={template:!0,repeat:!0,bind:!0,ref:!0},F={THEAD:!0,TBODY:!0,TFOOT:!0,TH:!0,TR:!0,TD:!0,COLGROUP:!0,COL:!0,CAPTION:!0,OPTION:!0,OPTGROUP:!0},G="undefined"!=typeof HTMLTemplateElement,H="template, "+Object.keys(F).map(function(a){return a.toLowerCase()+"[template]"}).join(", "),I=function(){function a(a){this.nextRunner=a,this.value=!1,this.lastValue=this.value,this.scheduled=[],this.scheduledIds=[],this.running=!1,this.observer=new PathObserver(this,"value",this.run,this)}function b(a){var b=a[e];a[e]||(b=d++,a[e]=b),c.schedule(a,b)}a.prototype={schedule:function(a,b){if(!this.scheduledIds[b]){if(this.running)return this.nextRunner.schedule(a,b);this.scheduledIds[b]=!0,this.scheduled.push(a),this.lastValue===this.value&&(this.value=!this.value)}},run:function(){this.running=!0;for(var a=0;a<this.scheduled.length;a++){var b=this.scheduled[a],c=b[e];this.scheduledIds[c]=!1,"function"==typeof b?b():b.resolve()}this.scheduled=[],this.scheduledIds=[],this.lastValue=this.value,this.running=!1}};var c=new a(new a),d=1,e="__scheduledId__";return b}();document.addEventListener("DOMContentLoaded",function(){h(document),Platform.performMicrotaskCheckpoint()},!1),G||(a.HTMLTemplateElement=function(){throw TypeError("Illegal constructor")});var J="__proto__"in{};HTMLTemplateElement.decorate=function(a,c){if(a.templateIsDecorated_)return!1;var e=a;e.templateIsDecorated_=!0;var g=f(e),i=g,n=!g,o=!1;if(!g&&d(e)&&(b(!c),e=k(a),e.templateIsDecorated_=!0,g=f(e),o=!0),!g){m(e);var p=j(e.ownerDocument);e.content_=p.createDocumentFragment()}return c?e.instanceRef_=c:n?l(e,a,o):i&&h(e.content),!0},HTMLTemplateElement.bootstrap=h;var K=a.HTMLUnknownElement||HTMLElement,L={get:function(){return this.content_},enumerable:!0,configurable:!0};G||(HTMLTemplateElement.prototype=Object.create(K.prototype),Object.defineProperty(HTMLTemplateElement.prototype,"content",L)),i(HTMLTemplateElement.prototype,{bind:function(a,b,c){return this.iterator_||(this.iterator_=new y(this)),this.bindings=this.bindings||{},"bind"===a?(this.iterator_.hasBind=!0,this.iterator_.bindModel=b,this.iterator_.bindPath=c,this.iterator_.depsChanging||(this.iterator_.depsChanging=!0,I(this.iterator_)),this.bindings.bind=this.iterator_):"repeat"===a?(this.iterator_.hasRepeat=!0,this.iterator_.repeatModel=b,this.iterator_.repeatPath=c,this.iterator_.depsChanging||(this.iterator_.depsChanging=!0,I(this.iterator_)),this.bindings.repeat=this.iterator_):"if"===a?(this.iterator_.hasIf=!0,this.iterator_.ifModel=b,this.iterator_.ifPath=c,this.iterator_.depsChanging||(this.iterator_.depsChanging=!0,I(this.iterator_)),this.bindings.if=this.iterator_):HTMLElement.prototype.bind.call(this,a,b,c)},unbind:function(a){if("bind"===a){if(!this.iterator_)return;return this.iterator_.hasBind=!1,this.iterator_.bindModel=void 0,this.iterator_.bindPath=void 0,this.iterator_.depsChanging||(this.iterator_.depsChanging=!0,I(this.iterator_)),this.bindings.bind=void 0}if("repeat"===a){if(!this.iterator_)return;return this.iterator_.hasRepeat=!1,this.iterator_.repeatModel=void 0,this.iterator_.repeatPath=void 0,this.iterator_.depsChanging||(this.iterator_.depsChanging=!0,I(this.iterator_)),this.bindings.repeat=void 0}if("if"===a){if(!this.iterator_)return;return this.iterator_.hasIf=!1,this.iterator_.ifModel=void 0,this.iterator_.ifPath=void 0,this.iterator_.depsChanging||(this.iterator_.depsChanging=!0,I(this.iterator_)),this.bindings.if=void 0}return HTMLElement.prototype.unbind.call(this,a,model,path)},createInstance:function(a,b,c){var d=this.ref.content,e=d.bindingMap_;if(!e){var f=b&&"function"==typeof b.prepareBinding?b.prepareBinding:void 0;e=v(d,f)||[],d.bindingMap_=e}var g=e.hasSubTemplate?u(d):d.cloneNode(!0);return s(g,e,a,b,c),x(g,a),g},get model(){return this.model_},set model(a){this.model_=a,n(this)},get bindingDelegate(){return this.bindingDelegate_},set bindingDelegate(a){this.bindingDelegate_=a,n(this)},get ref(){var a,b=this.getAttribute("ref");if(b){var d=c(this);d&&(a=d.getElementById(b))}if(a||(a=this.instanceRef_),!a)return this;var e=a.ref;return e?e:a}});var M=Path.get("value");Object.defineProperty(Node.prototype,"templateInstance",{get:function(){var a=this.templateInstance_;return a?a:this.parentNode?this.parentNode.templateInstance:void 0}}),y.prototype={resolve:function(){if(this.depsChanging=!1,this.valueObserver&&(this.valueObserver.close(),this.valueObserver=void 0),!this.hasRepeat&&!this.hasBind)return this.valueChanged(),void 0;var a=this.hasRepeat===!0,b=a?this.repeatModel:this.bindModel,c=a?this.repeatPath:this.bindPath;if(this.hasIf){var d=function(b){var c=b[0],d=b[1];return d?a?c:[c]:void 0};this.valueObserver=new CompoundPathObserver(this.valueChanged,this,void 0,d),this.valueObserver.addPath(b,c),this.valueObserver.addPath(this.ifModel,this.ifPath),this.valueObserver.start()}else{var d=this.hasRepeat?void 0:function(a){return[a]};this.valueObserver=new PathObserver(b,c,this.valueChanged,this,void 0,d)}this.valueChanged(this.valueObserver.value)},valueChanged:function(a){Array.isArray(a)||(a=void 0);var b=this.iteratedValue;this.unobserve(),this.iteratedValue=a,this.iteratedValue&&(this.arrayObserver=new ArrayObserver(this.iteratedValue,this.handleSplices,this));var c=ArrayObserver.calculateSplices(this.iteratedValue||[],b||[]);c.length&&this.handleSplices(c)},getTerminatorAt:function(a){if(-1==a)return this.templateElement_;var b=this.terminators[2*a];if(b.nodeType!==Node.ELEMENT_NODE||this.templateElement_===b)return b;var c=b.iterator_;return c?c.getTerminatorAt(c.terminators.length/2-1):b},insertInstanceAt:function(a,b,c,d){var e=this.getTerminatorAt(a-1),f=e;b?f=b.lastChild||f:c&&(f=c[c.length-1]||f),this.terminators.splice(2*a,0,f,d);var g=this.templateElement_.parentNode,h=e.nextSibling;if(b)g.insertBefore(b,h);else if(c)for(var i=0;i<c.length;i++)g.insertBefore(c[i],h)},extractInstanceAt:function(a){var b=[],c=this.getTerminatorAt(a-1),d=this.getTerminatorAt(a);b.bound=this.terminators[2*a+1],this.terminators.splice(2*a,2);for(var e=this.templateElement_.parentNode;d!==c;){var f=c.nextSibling;f==d&&(d=c),e.removeChild(f),b.push(f)}return b},handleSplices:function(a){if(!this.closed){var b=this.templateElement_;if(!b.parentNode||!b.ownerDocument.defaultView)return this.close(),void 0;var c=b.bindingDelegate,d=c&&"function"==typeof c.getInstanceModel?c.getInstanceModel:void 0,e=new z,f=0;a.forEach(function(a){a.removed.forEach(function(b){var c=this.extractInstanceAt(a.index+f);e.set(b,c)},this),f-=a.addedCount},this),a.forEach(function(a){for(var f=a.index;f<a.index+a.addedCount;f++){var g,h=this.iteratedValue[f],i=void 0,j=e.get(h);j?(e.delete(h),g=j.bound):(g=[],d&&(h=d(b,h)),void 0!==h&&(i=this.templateElement_.createInstance(h,c,g))),this.insertInstanceAt(f,i,j,g)}},this),e.forEach(function(a){this.closeInstanceBindings(a.bound)},this)}},closeInstanceBindings:function(a){for(var b=0;b<a.length;b++)a[b].close()},unobserve:function(){this.arrayObserver&&(this.arrayObserver.close(),this.arrayObserver=void 0)},close:function(){if(!this.closed){this.unobserve();for(var a=1;a<this.terminators.length;a+=2)this.closeInstanceBindings(this.terminators[a]);this.terminators.length=0,this.valueObserver&&this.valueObserver.close(),this.valueObserver=void 0,this.templateElement_.iterator_=void 0,this.closed=!0}}},HTMLTemplateElement.forAllTemplatesFrom_=g}(this),function(a){"use strict";function b(a,b){if(!a)throw new Error("ASSERT: "+b)}function c(a){return a>=48&&57>=a}function d(a){return 32===a||9===a||11===a||12===a||160===a||a>=5760&&"".indexOf(String.fromCharCode(a))>0}function e(a){return 10===a||13===a||8232===a||8233===a}function f(a){return 36===a||95===a||a>=65&&90>=a||a>=97&&122>=a}function g(a){return 36===a||95===a||a>=65&&90>=a||a>=97&&122>=a||a>=48&&57>=a}function h(a){return"this"===a}function i(){for(;$>Z&&d(Y.charCodeAt(Z));)++Z}function j(){var a,b;for(a=Z++;$>Z&&(b=Y.charCodeAt(Z),g(b));)++Z;return Y.slice(a,Z)}function k(){var a,b,c;return a=Z,b=j(),c=1===b.length?U.Identifier:h(b)?U.Keyword:"null"===b?U.NullLiteral:"true"===b||"false"===b?U.BooleanLiteral:U.Identifier,{type:c,value:b,range:[a,Z]}}function l(){var a,b,c=Z,d=Y.charCodeAt(Z),e=Y[Z];switch(d){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Z,{type:U.Punctuator,value:String.fromCharCode(d),range:[c,Z]};default:if(a=Y.charCodeAt(Z+1),61===a)switch(d){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 124:return Z+=2,{type:U.Punctuator,value:String.fromCharCode(d)+String.fromCharCode(a),range:[c,Z]};case 33:case 61:return Z+=2,61===Y.charCodeAt(Z)&&++Z,{type:U.Punctuator,value:Y.slice(c,Z),range:[c,Z]}}}return b=Y[Z+1],e===b&&"&|".indexOf(e)>=0?(Z+=2,{type:U.Punctuator,value:e+b,range:[c,Z]}):"<>=!+-*%&|^/".indexOf(e)>=0?(++Z,{type:U.Punctuator,value:e,range:[c,Z]}):(s({},X.UnexpectedToken,"ILLEGAL"),void 0)}function m(){var a,d,e;if(e=Y[Z],b(c(e.charCodeAt(0))||"."===e,"Numeric literal must start with a decimal digit or a decimal point"),d=Z,a="","."!==e){for(a=Y[Z++],e=Y[Z],"0"===a&&e&&c(e.charCodeAt(0))&&s({},X.UnexpectedToken,"ILLEGAL");c(Y.charCodeAt(Z));)a+=Y[Z++];e=Y[Z]}if("."===e){for(a+=Y[Z++];c(Y.charCodeAt(Z));)a+=Y[Z++];e=Y[Z]}if("e"===e||"E"===e)if(a+=Y[Z++],e=Y[Z],("+"===e||"-"===e)&&(a+=Y[Z++]),c(Y.charCodeAt(Z)))for(;c(Y.charCodeAt(Z));)a+=Y[Z++];else s({},X.UnexpectedToken,"ILLEGAL");return f(Y.charCodeAt(Z))&&s({},X.UnexpectedToken,"ILLEGAL"),{type:U.NumericLiteral,value:parseFloat(a),range:[d,Z]}}function n(){var a,c,d,f="",g=!1;for(a=Y[Z],b("'"===a||'"'===a,"String literal must starts with a quote"),c=Z,++Z;$>Z;){if(d=Y[Z++],d===a){a="";break}if("\\"===d)if(d=Y[Z++],d&&e(d.charCodeAt(0)))"\r"===d&&"\n"===Y[Z]&&++Z;else switch(d){case"n":f+="\n";break;case"r":f+="\r";break;case"t":f+=" ";break;case"b":f+="\b";break;case"f":f+="\f";break;case"v":f+="";break;default:f+=d}else{if(e(d.charCodeAt(0)))break;f+=d}}return""!==a&&s({},X.UnexpectedToken,"ILLEGAL"),{type:U.StringLiteral,value:f,octal:g,range:[c,Z]}}function o(a){return a.type===U.Identifier||a.type===U.Keyword||a.type===U.BooleanLiteral||a.type===U.NullLiteral}function p(){var a;return i(),Z>=$?{type:U.EOF,range:[Z,Z]}:(a=Y.charCodeAt(Z),40===a||41===a||58===a?l():39===a||34===a?n():f(a)?k():46===a?c(Y.charCodeAt(Z+1))?m():l():c(a)?m():l())}function q(){var a;return a=ab,Z=a.range[1],ab=p(),Z=a.range[1],a}function r(){var a;a=Z,ab=p(),Z=a}function s(a,c){var d,e=Array.prototype.slice.call(arguments,2),f=c.replace(/%(\d)/g,function(a,c){return b(c<e.length,"Message reference must be in range"),e[c]});throw d=new Error(f),d.index=Z,d.description=f,d}function t(a){s(a,X.UnexpectedToken,a.value)}function u(a){var b=q();(b.type!==U.Punctuator||b.value!==a)&&t(b)}function v(a){return ab.type===U.Punctuator&&ab.value===a}function w(a){return ab.type===U.Keyword&&ab.value===a}function x(){return 59===Y.charCodeAt(Z)?(q(),void 0):(i(),v(";")?(q(),void 0):(ab.type===U.EOF||v("}")||t(ab),void 0))}function y(){var a=[];for(u("[");!v("]");)v(",")?(q(),a.push(null)):(a.push(db()),v("]")||u(","));return u("]"),_.createArrayExpression(a)}function z(){var a;return i(),a=q(),a.type===U.StringLiteral||a.type===U.NumericLiteral?_.createLiteral(a):_.createIdentifier(a.value)}function A(){var a,b;return a=ab,i(),(a.type===U.EOF||a.type===U.Punctuator)&&t(a),b=z(),u(":"),_.createProperty("init",b,db())}function B(){var a=[];for(u("{");!v("}");)a.push(A()),v("}")||u(",");return u("}"),_.createObjectExpression(a)}function C(){var a;return u("("),a=db(),u(")"),a}function D(){var a,b,c;return v("(")?C():(a=ab.type,a===U.Identifier?c=_.createIdentifier(q().value):a===U.StringLiteral||a===U.NumericLiteral?c=_.createLiteral(q()):a===U.Keyword?w("this")&&(q(),c=_.createThisExpression()):a===U.BooleanLiteral?(b=q(),b.value="true"===b.value,c=_.createLiteral(b)):a===U.NullLiteral?(b=q(),b.value=null,c=_.createLiteral(b)):v("[")?c=y():v("{")&&(c=B()),c?c:(t(q()),void 0))}function E(){var a=[];if(u("("),!v(")"))for(;$>Z&&(a.push(db()),!v(")"));)u(",");return u(")"),a}function F(){var a;return a=q(),o(a)||t(a),_.createIdentifier(a.value)}function G(){return u("."),F()}function H(){var a;return u("["),a=db(),u("]"),a}function I(){var a,b;for(a=D();v(".")||v("[");)v("[")?(b=H(),a=_.createMemberExpression("[",a,b)):(b=G(),a=_.createMemberExpression(".",a,b));return a}function J(){var a,b;return ab.type!==U.Punctuator&&ab.type!==U.Keyword?b=cb():v("+")||v("-")||v("!")?(a=q(),b=J(),b=_.createUnaryExpression(a.value,b)):w("delete")||w("void")||w("typeof")?s({},X.UnexpectedToken):b=cb(),b}function K(a){var b=0;if(a.type!==U.Punctuator&&a.type!==U.Keyword)return 0;switch(a.value){case"||":b=1;break;case"&&":b=2;break;case"==":case"!=":case"===":case"!==":b=6;break;case"<":case">":case"<=":case">=":case"instanceof":b=7;break;case"in":b=7;break;case"+":case"-":b=9;break;case"*":case"/":case"%":b=11}return b}function L(){var a,b,c,d,e,f,g,h;if(g=J(),b=ab,c=K(b),0===c)return g;for(b.prec=c,q(),e=J(),d=[g,b,e];(c=K(ab))>0;){for(;d.length>2&&c<=d[d.length-2].prec;)e=d.pop(),f=d.pop().value,g=d.pop(),a=_.createBinaryExpression(f,g,e),d.push(a);b=q(),b.prec=c,d.push(b),a=J(),d.push(a)}for(h=d.length-1,a=d[h];h>1;)a=_.createBinaryExpression(d[h-1].value,d[h-2],a),h-=2;return a}function M(){var a,b,c;return a=L(),v("?")&&(q(),b=M(),u(":"),c=M(),a=_.createConditionalExpression(a,b,c)),a}function N(){var a,b;return a=q(),a.type!==U.Identifier&&t(a),b=v("(")?E():[],_.createFilter(a.value,b)}function O(a){for(_.createTopLevel(a);v("|");)q(),N()}function P(){i(),r();var a=db();a&&("as"===ab.value?R(a):"in"===ab.value&&a.type===W.Identifier?S(a):v("|")?O(a):a.type===W.Identifier&&v(":")?Q(a):_.createTopLevel(a)),ab.type!==U.EOF&&t(ab)}function Q(a){var b=a.name;for(u(":"),a=db(),_.createLabeledStatement(b,a),x();ab.type===U.Identifier;)b=q().value,u(":"),a=db(),_.createLabeledStatement(b,a),x();return null}function R(a){q();var b=q().value;_.createAsExpression(a,b)}function S(a){q();var b=db();_.createInExpression(a.name,b)}function T(a,b){return _=b,Y=a,Z=0,$=Y.length,ab=null,bb={labelSet:{}},P()}var U,V,W,X,Y,Z,$,_,ab,bb;U={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8},V={},V[U.BooleanLiteral]="Boolean",V[U.EOF]="<end>",V[U.Identifier]="Identifier",V[U.Keyword]="Keyword",V[U.NullLiteral]="Null",V[U.NumericLiteral]="Numeric",V[U.Punctuator]="Punctuator",V[U.StringLiteral]="String",W={ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ThisExpression:"ThisExpression",UnaryExpression:"UnaryExpression"},X={UnexpectedToken:"Unexpected token %0",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared"};var cb=I,db=M;a.esprima={parse:T}}(this),function(a){"use strict";function b(a,b,d){var e;try{if(e=c(a),e.scopeIdent&&(d.nodeType!==Node.ELEMENT_NODE||"TEMPLATE"!==d.tagName||"bind"!==b&&"repeat"!==b))throw Error("as and in can only be used within <template bind/repeat>")}catch(f){return console.error("Invalid expression syntax: "+a,f),void 0}return function(a,b,c){var d=e.getBinding(a);return e.scopeIdent&&d&&(c.polymerExpressionScopeName_=e.scopeIdent),d}}function c(a){var b=l[a];if(!b){var c=new i;esprima.parse(a,c),b=new j(c),l[a]=b}return b}function d(a){return function(b){for(var c=[],d=0;d<a.length;d++)a[d].expression(b)&&c.push(a[d].label);return c.join(" ")}}function e(a,b,c){this.delegate=a,this.name=b,this.last=c}function f(a,b){this.name=a,this.args=b,this.object_=null}function g(){throw Error("Not Implemented")}function h(a){return a instanceof e?a.valueFn():a}function i(){this.expression=null,this.filters=[],this.labeledStatements=[],this.deps={},this.depsList=[],this.currentPath=void 0,this.ident=void 0}function j(a){if(this.scopeIdent=a.ident,!a.expression&&!a.labeledStatements.length)throw Error("No expression or labelled statements found.");var b=a.labeledStatements.length?d(a.labeledStatements):h(a.expression);a.filters.forEach(function(a){b=a.toDOM(b)}),this.resolveFn=b,this.paths=a.depsList,1===this.paths.length&&a.filters.length&&a.expression instanceof e&&(this.filtersSetValueFn=a.filtersSetValueFn)}function k(){}var l=Object.create(null);e.prototype={getPath:function(){return this.path_||(this.path_=this.last?Path.get(this.last.getPath()+"."+this.name):Path.get(this.name)),this.path_},valueFn:function(){if(!this.valueFn_){var a=this.getPath(),b=this.delegate,c=this.delegate.deps[a];void 0===c&&(c=this.delegate.deps[a]=this.delegate.depsList.length,this.delegate.depsList.push(a));var d=b.depsList;this.valueFn_=function(a){return 1===d.length?a:a[c]}}return this.valueFn_}},f.prototype={get object(){if(this.object_)return this.object_;var a=k.filters[this.name],b=this.args.map(function(a){var b=h(a);return b()});return this.object_=a.apply(null,b)},toDOM:function(a){var b=this.object;return function(c){var d=a(c);return b.toDOM(d)}},toModel:function(a){var b=this.object;return b.toModel?b.toModel(a):a}};var m={"+":function(a){return+a},"-":function(a){return-a},"!":function(a){return!a}},n={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"*":function(a,b){return a*b},"/":function(a,b){return a/b},"%":function(a,b){return a%b},"<":function(a,b){return b>a},">":function(a,b){return a>b},"<=":function(a,b){return b>=a},">=":function(a,b){return a>=b},"==":function(a,b){return a==b},"!=":function(a,b){return a!=b},"===":function(a,b){return a===b},"!==":function(a,b){return a!==b},"&&":function(a,b){return a&&b},"||":function(a,b){return a||b}};i.prototype={get filtersSetValueFn(){if(!this.filtersSetValueFn_){var a=this.filters;this.filtersSetValueFn_=function(b){for(var c=a.length-1;c>=0;c--)b=a[c].toModel(b);return b}}return this.filtersSetValueFn_},createLabeledStatement:function(a,b){return this.labeledStatements.push({label:a,expression:b instanceof e?b.valueFn():b}),b},createUnaryExpression:function(a,b){if(!m[a])throw Error("Disallowed operator: "+a);return b=h(b),function(c){return m[a](b(c))}},createBinaryExpression:function(a,b,c){if(!n[a])throw Error("Disallowed operator: "+a);return b=h(b),c=h(c),function(d){return n[a](b(d),c(d))}},createConditionalExpression:function(a,b,c){return a=h(a),b=h(b),c=h(c),function(d){return a(d)?b(d):c(d)}},createIdentifier:function(a){var b=new e(this,a);return b.type="Identifier",b},createMemberExpression:function(a,b,c){return"["===a?(b=h(b),c=h(c),function(a){return b(a)[c(a)]
}):new e(this,c.name,b)},createLiteral:function(a){return function(){return a.value}},createArrayExpression:function(a){for(var b=0;b<a.length;b++)a[b]=h(a[b]);return function(b){for(var c=[],d=0;d<a.length;d++)c.push(a[d](b));return c}},createProperty:function(a,b,c){return{key:b instanceof e?b.getPath():b(),value:c}},createObjectExpression:function(a){for(var b=0;b<a.length;b++)a[b].value=h(a[b].value);return function(b){for(var c={},d=0;d<a.length;d++)c[a[d].key]=a[d].value(b);return c}},createFilter:function(a,b){this.filters.push(new f(a,b))},createAsExpression:function(a,b){this.expression=a,this.ident=b},createInExpression:function(a,b){this.expression=b,this.ident=a},createTopLevel:function(a){this.expression=a},createThisExpression:g},j.prototype={getBinding:function(a){var b=this.paths;if(!b.length)return{value:this.resolveFn({})};if(1===b.length)return new PathObserver(a,b[0],void 0,void 0,void 0,this.resolveFn,this.filtersSetValueFn);for(var c=new CompoundPathObserver(void 0,void 0,void 0,this.resolveFn),d=0;d<b.length;d++)c.addPath(a,b[d]);return c.start(),c}},k.filters=Object.create(null),k.prototype={prepareBinding:function(a,c,d){return Path.get(a).valid?void 0:b(a,c,d)},getInstanceModel:function(a,b){var c=a.polymerExpressionScopeName_;if(!c)return b;var d=a.templateInstance?a.templateInstance.model:a.model,e=Object.create(d);return e[c]=b,e}},a.PolymerExpressions=k}(this),function(a){function b(){logFlags.data&&console.group("Platform.flush()"),a.endOfMicrotask(Platform.performMicrotaskCheckpoint),logFlags.data&&console.groupEnd()}var c=document.createElement("style");c.textContent="template {display: none !important;} /* injected by platform.js */";var d=document.querySelector("head");d.insertBefore(c,d.firstChild);var e=125;window.addEventListener("WebComponentsReady",function(){b(),Observer.hasObjectObserve||(a.flushPoll=setInterval(b,e))}),a.flush=b}(window.Platform),function(a){function b(a){return d(a,i)}function c(a){return d(a,j)}function d(a,b){return"link"===a.localName&&a.getAttribute("rel")===b}function e(a){return"script"===a.localName}function f(a,b){var c=a;c instanceof Document||(c=document.implementation.createHTMLDocument(i),c.body.innerHTML=a),c._URL=b;var d=c.createElement("base");return d.setAttribute("href",document.baseURI||document.URL),c.head.appendChild(d),window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(c),c}a||(a=window.HTMLImports={flags:{}});var g,h=a.xhr,i="import",j="stylesheet",k={documents:{},cache:{},preloadSelectors:["link[rel="+i+"]","element link[rel="+j+"]","template","script[src]:not([type])",'script[src][type="text/javascript"]'].join(","),loader:function(a){return g=new l(k.loaded,a),g.cache=k.cache,g},load:function(a,b){g=k.loader(b),k.preload(a)},preload:function(a){var b=a.querySelectorAll(k.preloadSelectors);b=this.filterMainDocumentNodes(a,b),b=this.extractTemplateNodes(b),g.addNodes(b)},filterMainDocumentNodes:function(a,b){return a===document&&(b=Array.prototype.filter.call(b,function(a){return!e(a)})),b},extractTemplateNodes:function(a){var b=[];return a=Array.prototype.filter.call(a,function(a){if("template"===a.localName){if(a.content){var c=a.content.querySelectorAll("link[rel="+j+"]");c.length&&(b=b.concat(Array.prototype.slice.call(c,0)))}return!1}return!0}),b.length&&(a=a.concat(b)),a},loaded:function(a,d,e){if(b(d)){var g=k.documents[a];g||(g=f(e,a),p.resolvePathsInHTML(g),k.documents[a]=g,k.preload(g)),d.import={href:a,ownerNode:d,content:g},d.content=e=g}d.__resource=e,c(d)&&p.resolvePathsInStylesheet(d)}},l=function(a,b){this.onload=a,this.oncomplete=b,this.inflight=0,this.pending={},this.cache={}};l.prototype={addNodes:function(a){this.inflight+=a.length,q(a,this.require,this),this.checkDone()},require:function(a){var b=p.nodeUrl(a);a.__nodeUrl=b,this.dedupe(b,a)||this.fetch(b,a)},dedupe:function(a,b){return this.pending[a]?(this.pending[a].push(b),!0):this.cache[a]?(this.onload(a,b,g.cache[a]),this.tail(),!0):(this.pending[a]=[b],!1)},fetch:function(a,b){var c=function(c,d){this.receive(a,b,c,d)}.bind(this);h.load(a,c)},receive:function(a,b,c,d){c||(g.cache[a]=d),g.pending[a].forEach(function(b){c||this.onload(a,b,d),this.tail()},this),g.pending[a]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}};var m=["href","src","action"],n="["+m.join("],[")+"]",o="{{.*}}",p={nodeUrl:function(a){return p.resolveUrl(p.documentURL,p.hrefOrSrc(a))},hrefOrSrc:function(a){return a.getAttribute("href")||a.getAttribute("src")},documentUrlFromNode:function(a){return p.getDocumentUrl(a.ownerDocument||a)},getDocumentUrl:function(a){var b=a&&(a._URL||a.impl&&a.impl._URL||a.baseURI||a.URL)||"";return b.split("#")[0]},resolveUrl:function(a,b){return this.isAbsUrl(b)?b:this.compressUrl(this.urlToPath(a)+b)},resolveRelativeUrl:function(a,b){return this.isAbsUrl(b)?b:this.makeDocumentRelPath(this.resolveUrl(a,b))},isAbsUrl:function(a){return/(^data:)|(^http[s]?:)|(^\/)/.test(a)},urlToPath:function(a){var b=a.split("/");return b.pop(),b.push(""),b.join("/")},compressUrl:function(a){var b="",c=a.indexOf("?");c>-1&&(b=a.substring(c),a=a.substring(c,0));for(var d,e=a.split("/"),f=0;f<e.length;f++)d=e[f],".."===d&&(e.splice(f-1,2),f-=2);return e.join("/")+b},makeDocumentRelPath:function(a){return p.urlElt.href=a,!p.urlElt.host||p.urlElt.host===window.location.host&&p.urlElt.protocol===window.location.protocol?this.makeRelPath(p.documentURL,p.urlElt.href):a},makeRelPath:function(a,b){for(var c=a.split("/"),d=b.split("/");c.length&&c[0]===d[0];)c.shift(),d.shift();for(var e=0,f=c.length-1;f>e;e++)d.unshift("..");var g=d.join("/");return g},resolvePathsInHTML:function(a,b){b=b||p.documentUrlFromNode(a),p.resolveAttributes(a,b),p.resolveStyleElts(a,b);var c=a.querySelectorAll("template");c&&q(c,function(a){a.content&&p.resolvePathsInHTML(a.content,b)})},resolvePathsInStylesheet:function(a){var b=p.nodeUrl(a);a.__resource=p.resolveCssText(a.__resource,b)},resolveStyleElts:function(a,b){var c=a.querySelectorAll("style");c&&q(c,function(a){a.textContent=p.resolveCssText(a.textContent,b)})},resolveCssText:function(a,b){return a.replace(/url\([^)]*\)/g,function(a){var c=a.replace(/["']/g,"").slice(4,-1);return c=p.resolveRelativeUrl(b,c),"url("+c+")"})},resolveAttributes:function(a,b){var c=a&&a.querySelectorAll(n);c&&q(c,function(a){this.resolveNodeAttributes(a,b)},this)},resolveNodeAttributes:function(a,b){m.forEach(function(c){var d=a.attributes[c];if(d&&d.value&&d.value.search(o)<0){var e=p.resolveRelativeUrl(b,d.value);d.value=e}})}};p.documentURL=p.getDocumentUrl(document),p.urlElt=document.createElement("a"),h=h||{async:!0,ok:function(a){return a.status>=200&&a.status<300||304===a.status||0===a.status},load:function(b,c,d){var e=new XMLHttpRequest;return(a.flags.debug||a.flags.bust)&&(b+="?"+Math.random()),e.open("GET",b,h.async),e.addEventListener("readystatechange",function(){4===e.readyState&&c.call(d,!h.ok(e)&&e,e.response,b)}),e.send(),e},loadDocument:function(a,b,c){this.load(a,b,c).responseType="document"}};var q=Array.prototype.forEach.call.bind(Array.prototype.forEach);a.path=p,a.xhr=h,a.importer=k,a.getDocumentUrl=p.getDocumentUrl,a.IMPORT_LINK_TYPE=i}(window.HTMLImports),function(a){function b(a){return"link"===a.localName&&a.getAttribute("rel")===f}function c(a){return a.parentNode&&!d(a)&&!e(a)}function d(a){return a.ownerDocument===document||a.ownerDocument.impl===document}function e(a){return a.parentNode&&"element"===a.parentNode.localName}var f="import",g={selectors:["link[rel="+f+"]","link[rel=stylesheet]","style","script:not([type])",'script[type="text/javascript"]'],map:{link:"parseLink",script:"parseScript",style:"parseGeneric"},parse:function(a){if(!a.__importParsed){a.__importParsed=!0;var b=a.querySelectorAll(g.selectors);h(b,function(a){g[g.map[a.localName]](a)})}},parseLink:function(a){b(a)?a.content&&g.parse(a.content):this.parseGeneric(a)},parseGeneric:function(a){c(a)&&document.head.appendChild(a)},parseScript:function(b){if(c(b)){var d=(b.__resource||b.textContent).trim();if(d){var e=b.__nodeUrl;if(!e){var e=a.path.documentUrlFromNode(b),f="["+Math.floor(1e3*(Math.random()+1))+"]",g=d.match(/Polymer\(['"]([^'"]*)/);f=g&&g[1]||f,e+="/"+f+".js"}d+="\n//# sourceURL="+e+"\n",eval.call(window,d)}}}},h=Array.prototype.forEach.call.bind(Array.prototype.forEach);a.parser=g}(HTMLImports),function(){function a(){HTMLImports.importer.load(document,function(){HTMLImports.parser.parse(document),HTMLImports.readyTime=(new Date).getTime(),document.dispatchEvent(new CustomEvent("HTMLImportsLoaded",{bubbles:!0}))})}"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(a){var b=document.createEvent("HTMLEvents");return b.initEvent(a,!0,!0),b}),"complete"===document.readyState?a():window.addEventListener("DOMContentLoaded",a)}(),window.CustomElements={flags:{}},function(a){function b(a){u.push(a),t||(t=!0,q(d))}function c(a){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a}function d(){t=!1;var a=u;u=[],a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();e(a),c.length&&(a.callback_(c,a),b=!0)}),b&&d()}function e(a){a.nodes_.forEach(function(b){var c=p.get(b);c&&c.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function f(a,b){for(var c=a;c;c=c.parentNode){var d=p.get(c);if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.options;if(c===a||g.subtree){var h=b(g);h&&f.enqueue(h)}}}}function g(a){this.callback_=a,this.nodes_=[],this.records_=[],this.uid_=++v}function h(a,b){this.type=a,this.target=b,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function i(a){var b=new h(a.type,a.target);return b.addedNodes=a.addedNodes.slice(),b.removedNodes=a.removedNodes.slice(),b.previousSibling=a.previousSibling,b.nextSibling=a.nextSibling,b.attributeName=a.attributeName,b.attributeNamespace=a.attributeNamespace,b.oldValue=a.oldValue,b}function j(a,b){return w=new h(a,b)}function k(a){return x?x:(x=i(w),x.oldValue=a,x)}function l(){w=x=void 0}function m(a){return a===x||a===w}function n(a,b){return a===b?a:x&&m(a)?x:null}function o(a,b,c){this.observer=a,this.target=b,this.options=c,this.transientObservedNodes=[]}var p=new SideTable,q=window.msSetImmediate;if(!q){var r=[],s=String(Math.random());window.addEventListener("message",function(a){if(a.data===s){var b=r;r=[],b.forEach(function(a){a()})}}),q=function(a){r.push(a),window.postMessage(s,"*")}}var t=!1,u=[],v=0;g.prototype={observe:function(a,b){if(a=c(a),!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var d=p.get(a);d||p.set(a,d=[]);for(var e,f=0;f<d.length;f++)if(d[f].observer===this){e=d[f],e.removeListeners(),e.options=b;break}e||(e=new o(this,a,b),d.push(e),this.nodes_.push(a)),e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){for(var b=p.get(a),c=0;c<b.length;c++){var d=b[c];if(d.observer===this){d.removeListeners(),b.splice(c,1);break}}},this),this.records_=[]},takeRecords:function(){var a=this.records_;return this.records_=[],a}};var w,x;o.prototype={enqueue:function(a){var c=this.observer.records_,d=c.length;if(c.length>0){var e=c[d-1],f=n(e,a);if(f)return c[d-1]=f,void 0}else b(this.observer);c[d]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0),b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0),b.childList&&a.addEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0),b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0),b.childList&&a.removeEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a),this.transientObservedNodes.push(a);var b=p.get(a);b||p.set(a,b=[]),b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[],a.forEach(function(a){this.removeListeners_(a);for(var b=p.get(a),c=0;c<b.length;c++)if(b[c]===this){b.splice(c,1);break}},this)},handleEvent:function(a){switch(a.stopImmediatePropagation(),a.type){case"DOMAttrModified":var b=a.attrName,c=a.relatedNode.namespaceURI,d=a.target,e=new j("attributes",d);e.attributeName=b,e.attributeNamespace=c;var g=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;f(d,function(a){return!a.attributes||a.attributeFilter&&a.attributeFilter.length&&-1===a.attributeFilter.indexOf(b)&&-1===a.attributeFilter.indexOf(c)?void 0:a.attributeOldValue?k(g):e});break;case"DOMCharacterDataModified":var d=a.target,e=j("characterData",d),g=a.prevValue;f(d,function(a){return a.characterData?a.characterDataOldValue?k(g):e:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(a.target);case"DOMNodeInserted":var h,i,d=a.relatedNode,m=a.target;"DOMNodeInserted"===a.type?(h=[m],i=[]):(h=[],i=[m]);var n=m.previousSibling,o=m.nextSibling,e=j("childList",d);e.addedNodes=h,e.removedNodes=i,e.previousSibling=n,e.nextSibling=o,f(d,function(a){return a.childList?e:void 0})}l()}},a.JsMutationObserver=g}(this),!window.MutationObserver&&(window.MutationObserver=window.WebKitMutationObserver||window.JsMutationObserver,!MutationObserver))throw new Error("no mutation observer support");!function(a){function b(a,c,d){var e=a.firstElementChild;if(!e)for(e=a.firstChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.nextSibling;for(;e;)c(e,d)!==!0&&b(e,c,d),e=e.nextElementSibling;return null}function c(a,b){for(var c=a.webkitShadowRoot;c;)d(c,b),c=c.olderShadowRoot}function d(a,d){b(a,function(a){return d(a)?!0:(c(a,d),void 0)}),c(a,d)}function e(a){return h(a)?(i(a),!0):(j(a),void 0)}function f(a){d(a,function(a){return e(a)?!0:void 0})}function g(a){return e(a)||f(a)}function h(b){if(!b.__upgraded__&&b.nodeType===Node.ELEMENT_NODE){var c=b.getAttribute("is")||b.localName,d=a.registry[c];if(d)return v.dom&&console.group("upgrade:",b.localName),a.upgrade(b),v.dom&&console.groupEnd(),!0}}function i(a){j(a),m(a)&&d(a,function(a){j(a)})}function j(a){(a.enteredDocumentCallback||a.__upgraded__&&v.dom)&&(v.dom&&console.group("inserted:",a.localName),m(a)&&(a.__inserted=(a.__inserted||0)+1,a.__inserted<1&&(a.__inserted=1),a.__inserted>1?v.dom&&console.warn("inserted:",a.localName,"insert/remove count:",a.__inserted):a.enteredDocumentCallback&&(v.dom&&console.log("inserted:",a.localName),a.enteredDocumentCallback())),v.dom&&console.groupEnd())}function k(a){l(a),d(a,function(a){l(a)})}function l(a){(a.leftDocumentCallback||a.__upgraded__&&v.dom)&&(v.dom&&console.log("removed:",a.localName),m(a)||(a.__inserted=(a.__inserted||0)-1,a.__inserted>0&&(a.__inserted=0),a.__inserted<0?v.dom&&console.warn("removed:",a.localName,"insert/remove count:",a.__inserted):a.leftDocumentCallback&&a.leftDocumentCallback()))}function m(a){for(var b=a;b;){if(b==a.ownerDocument)return!0;b=b.parentNode||b.host}}function n(a){if(a.webkitShadowRoot&&!a.webkitShadowRoot.__watched){v.dom&&console.log("watching shadow-root for: ",a.localName);for(var b=a.webkitShadowRoot;b;)o(b),b=b.olderShadowRoot}}function o(a){a.__watched||(s(a),a.__watched=!0)}function p(a){switch(a.localName){case"style":case"script":case"template":case void 0:return!0}}function q(a){if(v.dom){var b=a[0];if(b&&"childList"===b.type&&b.addedNodes&&b.addedNodes){for(var c=b.addedNodes[0];c&&c!==document&&!c.host;)c=c.parentNode;var d=c&&(c.URL||c._URL||c.host&&c.host.localName)||"";d=d.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",a.length,d||"")}a.forEach(function(a){"childList"===a.type&&(x(a.addedNodes,function(a){p(a)||g(a)}),x(a.removedNodes,function(a){p(a)||k(a)}))}),v.dom&&console.groupEnd()}function r(){q(w.takeRecords())}function s(a){w.observe(a,{childList:!0,subtree:!0})}function t(a){s(a)}function u(a){v.dom&&console.group("upgradeDocument: ",(a.URL||a._URL||"").split("/").pop()),g(a),v.dom&&console.groupEnd()}var v=window.logFlags||{},w=new MutationObserver(q),x=Array.prototype.forEach.call.bind(Array.prototype.forEach);a.watchShadow=n,a.upgradeAll=g,a.upgradeSubtree=f,a.observeDocument=t,a.upgradeDocument=u,a.takeRecords=r}(window.CustomElements),function(a){function b(b,f){var g=f||{};if(!b)throw new Error("document.register: first argument `name` must not be empty");if(b.indexOf("-")<0)throw new Error("document.register: first argument `name` must contain a dash ('-'). Argument was '"+String(b)+"'.");if(g.name=b,!g.prototype)throw new Error("Options missing required prototype property");return g.lifecycle=g.lifecycle||{},g.ancestry=c(g.extends),d(g),e(g),k(g.prototype),m(b,g),g.ctor=n(g),g.ctor.prototype=g.prototype,g.prototype.constructor=g.ctor,a.ready&&a.upgradeAll(document),g.ctor}function c(a){var b=v[a];return b?c(b.extends).concat([b]):[]}function d(a){for(var b,c=a.extends,d=0;b=a.ancestry[d];d++)c=b.is&&b.tag;a.tag=c||a.name,c&&(a.is=a.name)}function e(a){if(!Object.__proto__){var b=HTMLElement.prototype;if(a.is){var c=document.createElement(a.tag);b=Object.getPrototypeOf(c)}for(var d,e=a.prototype;e&&e!==b;){var d=Object.getPrototypeOf(e);e.__proto__=d,e=d}}a.native=b}function f(a){return g(w(a.tag),a)}function g(b,c){return c.is&&b.setAttribute("is",c.is),h(b,c),b.__upgraded__=!0,a.upgradeSubtree(b),j(b),b}function h(a,b){Object.__proto__?a.__proto__=b.prototype:(i(a,b.prototype,b.native),a.__proto__=b.prototype)}function i(a,b,c){for(var d={},e=b;e!==c&&e!==HTMLUnknownElement.prototype;){for(var f,g=Object.getOwnPropertyNames(e),h=0;f=g[h];h++)d[f]||(Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(e,f)),d[f]=1);e=Object.getPrototypeOf(e)}}function j(a){a.createdCallback&&a.createdCallback()}function k(a){var b=a.setAttribute;a.setAttribute=function(a,c){l.call(this,a,c,b)};var c=a.removeAttribute;a.removeAttribute=function(a,b){l.call(this,a,b,c)}}function l(a,b,c){var d=this.getAttribute(a);c.apply(this,arguments),this.attributeChangedCallback&&this.getAttribute(a)!==d&&this.attributeChangedCallback(a,d)}function m(a,b){v[a]=b}function n(a){return function(){return f(a)}}function o(a,b){var c=v[b||a];return c?new c.ctor:w(a)}function p(a){if(!a.__upgraded__&&a.nodeType===Node.ELEMENT_NODE){var b=a.getAttribute("is")||a.localName,c=v[b];return c&&g(a,c)}}function q(b){var c=x.call(this,b);return a.upgradeAll(c),c}a||(a=window.CustomElements={flags:{}});var r=a.flags,s=Boolean(document.webkitRegister||document.register),t=!r.register&&s;if(t){document.register=document.register||document.webkitRegister;var u=function(){};a.registry={},a.upgradeElement=u,a.watchShadow=u,a.upgrade=u,a.upgradeAll=u,a.upgradeSubtree=u,a.observeDocument=u,a.upgradeDocument=u,a.takeRecords=u}else{var v={},w=document.createElement.bind(document),x=Node.prototype.cloneNode;document.register=b,document.createElement=o,Node.prototype.cloneNode=q,a.registry=v,a.upgrade=p}a.hasNative=s,a.useNative=t}(window.CustomElements),function(){function a(a){return"link"===a.localName&&a.getAttribute("rel")===b}var b=window.HTMLImports?HTMLImports.IMPORT_LINK_TYPE:"none",c={selectors:["link[rel="+b+"]"],map:{link:"parseLink"},parse:function(a){if(!a.__parsed){a.__parsed=!0;var b=a.querySelectorAll(c.selectors);d(b,function(a){c[c.map[a.localName]](a)}),CustomElements.upgradeDocument(a),CustomElements.observeDocument(a)}},parseLink:function(b){a(b)&&this.parseImport(b)},parseImport:function(a){a.content&&c.parse(a.content)}},d=Array.prototype.forEach.call.bind(Array.prototype.forEach);CustomElements.parser=c}(),function(){function a(){CustomElements.parser.parse(document),CustomElements.upgradeDocument(document);var a=window.Platform&&Platform.endOfMicrotask?Platform.endOfMicrotask:setTimeout;a(function(){CustomElements.ready=!0,CustomElements.readyTime=Date.now(),window.HTMLImports&&(CustomElements.elapsed=CustomElements.readyTime-HTMLImports.readyTime),document.body.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})}if("function"!=typeof window.CustomEvent&&(window.CustomEvent=function(a){var b=document.createEvent("HTMLEvents");return b.initEvent(a,!0,!0),b}),"complete"===document.readyState)a();else{var b=window.HTMLImports?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(b,a)}}(),function(){function a(){}var b=document.createElement("style");b.textContent="element {display: none !important;} /* injected by platform.js */";var c=document.querySelector("head");if(c.insertBefore(b,c.firstChild),window.ShadowDOMPolyfill){CustomElements.watchShadow=a,CustomElements.watchAllShadows=a;var d=["upgradeAll","upgradeSubtree","observeDocument","upgradeDocument"],e={};d.forEach(function(a){e[a]=CustomElements[a]}),d.forEach(function(a){CustomElements[a]=function(b){return e[a](wrap(b))}})}}(),function(a){function b(a){e.textContent=c++,d.push(a)}var c=0,d=[],e=document.createTextNode(""),f=window.MutationObserver||window.JsMutationObserver;new f(function(){for(;d.length;)d.shift()()}).observe(e,{characterData:!0}),a.endOfMicrotask=b}(window.Platform),function(a){a=a||{};var b={shadow:function(a){return a?a.shadowRoot||a.webkitShadowRoot:void 0},canTarget:function(a){return a&&Boolean(a.elementFromPoint)},targetingShadow:function(a){var b=this.shadow(a);return this.canTarget(b)?b:void 0},olderShadow:function(a){var b=a.olderShadowRoot;if(!b){var c=a.querySelector("shadow");c&&(b=c.olderShadowRoot)}return b},allShadows:function(a){for(var b=[],c=this.shadow(a);c;)b.push(c),c=this.olderShadow(c);return b},searchRoot:function(a,b,c){if(a){var d,e,f=a.elementFromPoint(b,c);for(e=this.targetingShadow(f);e;){if(d=e.elementFromPoint(b,c)){var g=this.targetingShadow(d);return this.searchRoot(g,b,c)||d}e=this.olderShadow(e)}return f}},owner:function(a){for(var b=a;b.parentNode;)b=b.parentNode;return b},findTarget:function(a){var b=a.clientX,c=a.clientY,d=this.owner(a.target);return d.elementFromPoint(b,c)||(d=document),this.searchRoot(document,b,c)}};a.targetFinding=b,a.findTarget=b.findTarget.bind(b),window.PointerEventsPolyfill=a}(window.PointerEventsPolyfill),function(){function a(a){return'[touch-action="'+a+'"]'}function b(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}var c=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],d="";c.forEach(function(c){d+=String(c)===c?a(c)+b(c):c.selectors.map(a)+b(c.rule)});var e=document.createElement("style");e.textContent=d,document.head.appendChild(e)}(),function(a){function b(a,b){b=b||{};var e=b.buttons;if(void 0===e)switch(b.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}var f;if(c)f=new MouseEvent(a,b);else{f=document.createEvent("MouseEvent");var g={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null};Object.keys(g).forEach(function(a){a in b&&(g[a]=b[a])}),f.initMouseEvent(a,g.bubbles,g.cancelable,g.view,g.detail,g.screenX,g.screenY,g.clientX,g.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}d||Object.defineProperty(f,"buttons",{get:function(){return e},enumerable:!0});var h=0;return h=b.pressure?b.pressure:e?.5:0,Object.defineProperties(f,{pointerId:{value:b.pointerId||0,enumerable:!0},width:{value:b.width||0,enumerable:!0},height:{value:b.height||0,enumerable:!0},pressure:{value:h,enumerable:!0},tiltX:{value:b.tiltX||0,enumerable:!0},tiltY:{value:b.tiltY||0,enumerable:!0},pointerType:{value:b.pointerType||"",enumerable:!0},hwTimestamp:{value:b.hwTimestamp||0,enumerable:!0},isPrimary:{value:b.isPrimary||!1,enumerable:!0}}),f}var c=!1,d=!1;try{var e=new MouseEvent("click",{buttons:1});c=!0,d=1===e.buttons}catch(f){}a.PointerEvent||(a.PointerEvent=b)}(window),function(a){function b(){this.ids=[],this.pointers=[]}b.prototype={set:function(a,b){var c=this.ids.indexOf(a);c>-1?this.pointers[c]=b:(this.ids.push(a),this.pointers.push(b))},has:function(a){return this.ids.indexOf(a)>-1},"delete":function(a){var b=this.ids.indexOf(a);b>-1&&(this.ids.splice(b,1),this.pointers.splice(b,1))},get:function(a){var b=this.ids.indexOf(a);return this.pointers[b]},get size(){return this.pointers.length},clear:function(){this.ids.length=0,this.pointers.length=0},forEach:function(a,b){this.ids.forEach(function(c,d){a.call(b,c,this.pointers[d],this)},this)}},a.PointerMap=window.Map&&Map.prototype.forEach?Map:b}(window.PointerEventsPolyfill);var SideTable;"undefined"!=typeof WeakMap&&navigator.userAgent.indexOf("Firefox/")<0?SideTable=WeakMap:function(){var a=Object.defineProperty,b=Date.now()%1e9;SideTable=function(){this.name="__st"+(1e9*Math.random()>>>0)+(b++ +"__")},SideTable.prototype={set:function(b,c){var d=b[this.name];d&&d[0]===b?d[1]=c:a(b,this.name,{value:[b,c],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){this.set(a,void 0)}}}(),function(a){var b={targets:new SideTable,handledEvents:new SideTable,pointermap:new a.PointerMap,eventMap:{},eventSources:{},eventSourceList:[],registerSource:function(a,b){var c=b,d=c.events;d&&(d.forEach(function(a){c[a]&&(this.eventMap[a]=c[a].bind(c))},this),this.eventSources[a]=c,this.eventSourceList.push(c))},register:function(a){for(var b,c=this.eventSourceList.length,d=0;c>d&&(b=this.eventSourceList[d]);d++)b.register.call(b,a)},unregister:function(a){for(var b,c=this.eventSourceList.length,d=0;c>d&&(b=this.eventSourceList[d]);d++)b.unregister.call(b,a)},down:function(a){this.fireEvent("pointerdown",a)},move:function(a){this.fireEvent("pointermove",a)},up:function(a){this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1,this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1,this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0,this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0,this.fireEvent("pointerout",a)},cancel:function(a){this.fireEvent("pointercancel",a)},leaveOut:function(a){a.target.contains(a.relatedTarget)||this.leave(a),this.out(a)},enterOver:function(a){a.target.contains(a.relatedTarget)||this.enter(a),this.over(a)},eventHandler:function(a){if(!this.handledEvents.get(a)){var b=a.type,c=this.eventMap&&this.eventMap[b];c&&c(a),this.handledEvents.set(a,!0)}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){var c=new PointerEvent(a,b);return this.targets.set(c,this.targets.get(b)||b.target),c},fireEvent:function(a,b){var c=this.makeEvent(a,b);return this.dispatchEvent(c)},cloneEvent:function(a){var b={};for(var c in a)b[c]=a[c];return b},getTarget:function(a){return this.captureInfo&&this.captureInfo.id===a.pointerId?this.captureInfo.target:this.targets.get(a)},setCapture:function(a,b){this.captureInfo&&this.releaseCapture(this.captureInfo.id),this.captureInfo={id:a,target:b};var c=new PointerEvent("gotpointercapture",{bubbles:!0});this.implicitRelease=this.releaseCapture.bind(this,a),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease),this.targets.set(c,b),this.asyncDispatchEvent(c)},releaseCapture:function(a){if(this.captureInfo&&this.captureInfo.id===a){var b=new PointerEvent("lostpointercapture",{bubbles:!0}),c=this.captureInfo.target;this.captureInfo=null,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease),this.targets.set(b,c),this.asyncDispatchEvent(b)}},dispatchEvent:function(a){var b=this.getTarget(a);return b?b.dispatchEvent(a):void 0},asyncDispatchEvent:function(a){setTimeout(this.dispatchEvent.bind(this,a),0)}};b.boundHandler=b.eventHandler.bind(b),a.dispatcher=b,a.register=b.register.bind(b),a.unregister=b.unregister.bind(b)}(window.PointerEventsPolyfill),function(a){function b(a,b,c,d){this.addCallback=a.bind(d),this.removeCallback=b.bind(d),this.changedCallback=c.bind(d),g&&(this.observer=new g(this.mutationWatcher.bind(this)))}var c=Array.prototype.forEach.call.bind(Array.prototype.forEach),d=Array.prototype.map.call.bind(Array.prototype.map),e=Array.prototype.slice.call.bind(Array.prototype.slice),f=Array.prototype.filter.call.bind(Array.prototype.filter),g=window.MutationObserver||window.WebKitMutationObserver,h="[touch-action]",i={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};b.prototype={watchSubtree:function(b){a.targetFinding.canTarget(b)&&this.observer.observe(b,i)},enableOnSubtree:function(a){this.watchSubtree(a),a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){c(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll(h):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(e(b))},installOnLoad:function(){document.addEventListener("DOMContentLoaded",this.installNewSubtree.bind(this,document))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=d(a,this.findElements,this);return b.push(f(a,this.isElement)),b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){if("childList"===a.type){var b=this.flattenMutationTree(a.addedNodes);b.forEach(this.addElement,this);var c=this.flattenMutationTree(a.removedNodes);c.forEach(this.removeElement,this)}else"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}},g||(b.prototype.watchSubtree=function(){console.warn("PointerEventsPolyfill: MutationObservers not found, touch-action will not be dynamically detected")}),a.Installer=b}(window.PointerEventsPolyfill),function(a){var b=a.dispatcher,c=b.pointermap,d=25,e={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){b.listen(a,this.events)},unregister:function(a){b.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){for(var b,c=this.lastTouches,e=a.clientX,f=a.clientY,g=0,h=c.length;h>g&&(b=c[g]);g++){var i=Math.abs(e-b.x),j=Math.abs(f-b.y);if(d>=i&&d>=j)return!0}},prepareEvent:function(a){var c=b.cloneEvent(a);return c.pointerId=this.POINTER_ID,c.isPrimary=!0,c.pointerType=this.POINTER_TYPE,c},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var d=c.has(this.POINTER_ID);d&&this.cancel(a);var e=this.prepareEvent(a);c.set(this.POINTER_ID,a),b.down(e)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var c=this.prepareEvent(a);b.move(c)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var d=c.get(this.POINTER_ID);if(d&&d.button===a.button){var e=this.prepareEvent(a);b.up(e),this.cleanupMouse()}}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var c=this.prepareEvent(a);b.enterOver(c)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var c=this.prepareEvent(a);b.leaveOut(c)}},cancel:function(a){var c=this.prepareEvent(a);b.cancel(c),this.cleanupMouse()},cleanupMouse:function(){c.delete(this.POINTER_ID)}};a.mouseEvents=e}(window.PointerEventsPolyfill),function(a){var b,c=a.dispatcher,d=a.findTarget,e=a.targetFinding.allShadows.bind(a.targetFinding),f=c.pointermap,g=Array.prototype.map.call.bind(Array.prototype.map),h=2500,i=200,j="touch-action",k="string"==typeof document.head.style.touchAction,l={scrollType:new SideTable,events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){k?c.listen(a,this.events):b.enableOnSubtree(a)
},unregister:function(a){k&&c.unlisten(a,this.events)},elementAdded:function(a){var b=a.getAttribute(j),d=this.touchActionToScrollType(b);d&&(this.scrollType.set(a,d),c.listen(a,this.events),e(a).forEach(function(a){this.scrollType.set(a,d),c.listen(a,this.events)},this))},elementRemoved:function(a){this.scrollType.delete(a),c.unlisten(a,this.events),e(a).forEach(function(a){this.scrollType.delete(a),c.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute(j),d=this.touchActionToScrollType(c),f=this.touchActionToScrollType(b);d&&f?(this.scrollType.set(a,d),e(a).forEach(function(a){this.scrollType.set(a,d)},this)):f?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=a,c=this.scrollTypes;return"none"===b?"none":b===c.XSCROLLER?"X":b===c.YSCROLLER?"Y":c.SCROLLER.exec(b)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){null===this.firstTouch&&(this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryTouch:function(a){this.isPrimaryTouch(a)&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(a,i)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},touchToPointer:function(a){var b=c.cloneEvent(a);return b.pointerId=a.identifier+2,b.target=d(b),b.bubbles=!0,b.cancelable=!0,b.detail=this.clickCount,b.button=0,b.buttons=1,b.width=a.webkitRadiusX||a.radiusX||0,b.height=a.webkitRadiusY||a.radiusY||0,b.pressure=a.webkitForce||a.force||.5,b.isPrimary=this.isPrimaryTouch(a),b.pointerType=this.POINTER_TYPE,b},processTouches:function(a,b){var c=a.changedTouches,d=g(c,this.touchToPointer,this);d.forEach(b,this)},shouldScroll:function(a){if(this.firstXY){var b,c=this.scrollType.get(a.currentTarget);if("none"===c)b=!1;else if("XY"===c)b=!0;else{var d=a.changedTouches[0],e=c,f="Y"===c?"X":"Y",g=Math.abs(d["client"+e]-this.firstXY[e]),h=Math.abs(d["client"+f]-this.firstXY[f]);b=g>=h}return this.firstXY=null,b}},findTouch:function(a,b){for(var c,d=0,e=a.length;e>d&&(c=a[d]);d++)if(c.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(f.size>=b.length){var c=[];f.forEach(function(a,d){if(1!==a&&!this.findTouch(b,a-2)){var e=d.out;c.push(this.touchToPointer(e))}},this),c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a),this.setPrimaryTouch(a.changedTouches[0]),this.dedupSynthMouse(a),this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){f.set(a.pointerId,{target:a.target,out:a,outTarget:a.target}),c.over(a),c.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=a,d=f.get(b.pointerId);if(d){var e=d.out,g=d.outTarget;c.move(b),e&&g!==b.target&&(e.relatedTarget=b.target,b.relatedTarget=g,e.target=g,b.target?(c.leaveOut(e),c.enterOver(b)):(b.target=g,b.relatedTarget=null,this.cancelOut(b))),d.out=b,d.outTarget=b.target}},touchend:function(a){this.dedupSynthMouse(a),this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(c.up(a),c.out(a)),this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){c.cancel(a),c.out(a),this.cleanUpPointer(a)},cleanUpPointer:function(a){f.delete(a.pointerId),this.removePrimaryTouch(a)},dedupSynthMouse:function(b){var c=a.mouseEvents.lastTouches,d=b.changedTouches[0];if(this.isPrimaryTouch(d)){var e={x:d.clientX,y:d.clientY};c.push(e);var f=function(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)}.bind(null,c,e);setTimeout(f,h)}}};k||(b=new a.Installer(l.elementAdded,l.elementRemoved,l.elementChanged,l)),a.touchEvents=l}(window.PointerEventsPolyfill),function(a){var b=a.dispatcher,c=b.pointermap,d=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,e={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(a){b.listen(a,this.events)},unregister:function(a){b.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var c=a;return d&&(c=b.cloneEvent(a),c.pointerType=this.POINTER_TYPES[a.pointerType]),c},cleanup:function(a){c.delete(a)},MSPointerDown:function(a){c.set(a.pointerId,a);var d=this.prepareEvent(a);b.down(d)},MSPointerMove:function(a){var c=this.prepareEvent(a);b.move(c)},MSPointerUp:function(a){var c=this.prepareEvent(a);b.up(c),this.cleanup(a.pointerId)},MSPointerOut:function(a){var c=this.prepareEvent(a);b.leaveOut(c)},MSPointerOver:function(a){var c=this.prepareEvent(a);b.enterOver(c)},MSPointerCancel:function(a){var c=this.prepareEvent(a);b.cancel(c),this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){var c=b.makeEvent("lostpointercapture",a);b.dispatchEvent(c)},MSGotPointerCapture:function(a){var c=b.makeEvent("gotpointercapture",a);b.dispatchEvent(c)}};a.msEvents=e}(window.PointerEventsPolyfill),function(a){var b=a.dispatcher;if(void 0===window.navigator.pointerEnabled){if(Object.defineProperty(window.navigator,"pointerEnabled",{value:!0,enumerable:!0}),window.navigator.msPointerEnabled){var c=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:c,enumerable:!0}),b.registerSource("ms",a.msEvents)}else b.registerSource("mouse",a.mouseEvents),void 0!==window.ontouchstart&&b.registerSource("touch",a.touchEvents);b.register(document)}}(window.PointerEventsPolyfill),function(a){function b(a){if(!e.pointermap.has(a))throw new Error("InvalidPointerId")}var c,d,e=a.dispatcher,f=window.navigator;f.msPointerEnabled?(c=function(a){b(a),this.msSetPointerCapture(a)},d=function(a){b(a),this.msReleasePointerCapture(a)}):(c=function(a){b(a),e.setCapture(a,this)},d=function(a){b(a),e.releaseCapture(a,this)}),Element.prototype.setPointerCapture||Object.defineProperties(Element.prototype,{setPointerCapture:{value:c},releasePointerCapture:{value:d}})}(window.PointerEventsPolyfill),PointerGestureEvent.prototype.preventTap=function(){this.tapPrevented=!0},function(a){a=a||{},a.utils={LCA:{find:function(a,b){if(a===b)return a;if(a.contains){if(a.contains(b))return a;if(b.contains(a))return b}var c=this.depth(a),d=this.depth(b),e=c-d;for(e>0?a=this.walk(a,e):b=this.walk(b,-e);a&&b&&a!==b;)a=this.walk(a,1),b=this.walk(b,1);return a},walk:function(a,b){for(var c=0;b>c;c++)a=a.parentNode;return a},depth:function(a){for(var b=0;a;)b++,a=a.parentNode;return b}}},a.findLCA=function(b,c){return a.utils.LCA.find(b,c)},window.PointerGestures=a}(window.PointerGestures);var SideTable;"undefined"!=typeof WeakMap&&navigator.userAgent.indexOf("Firefox/")<0?SideTable=WeakMap:function(){var a=Object.defineProperty,b=Date.now()%1e9;SideTable=function(){this.name="__st"+(1e9*Math.random()>>>0)+(b++ +"__")},SideTable.prototype={set:function(b,c){var d=b[this.name];d&&d[0]===b?d[1]=c:a(b,this.name,{value:[b,c],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){this.set(a,void 0)}}}(),function(a){function b(){this.ids=[],this.pointers=[]}b.prototype={set:function(a,b){var c=this.ids.indexOf(a);c>-1?this.pointers[c]=b:(this.ids.push(a),this.pointers.push(b))},has:function(a){return this.ids.indexOf(a)>-1},"delete":function(a){var b=this.ids.indexOf(a);b>-1&&(this.ids.splice(b,1),this.pointers.splice(b,1))},get:function(a){var b=this.ids.indexOf(a);return this.pointers[b]},get size(){return this.pointers.length},clear:function(){this.ids.length=0,this.pointers.length=0}},window.Map&&(b=window.Map),a.PointerMap=b}(window.PointerGestures),function(a){var b={handledEvents:new SideTable,targets:new SideTable,handlers:{},recognizers:{},events:{},registerRecognizer:function(a,b){var c=b;this.recognizers[a]=c,c.events.forEach(function(a){if(c[a]){this.events[a]=!0;var b=c[a].bind(c);this.addHandler(a,b)}},this)},addHandler:function(a,b){var c=a;this.handlers[c]||(this.handlers[c]=[]),this.handlers[c].push(b)},registerTarget:function(a){this.listen(Object.keys(this.events),a)},unregisterTarget:function(a){this.unlisten(Object.keys(this.events),a)},eventHandler:function(a){if(!this.handledEvents.get(a)){var b=a.type,c=this.handlers[b];c&&this.makeQueue(c,a),this.handledEvents.set(a,!0)}},makeQueue:function(a,b){var c=this.cloneEvent(b);setTimeout(this.runQueue.bind(this,a,c),0)},runQueue:function(a,b){this.currentPointerId=b.pointerId;for(var c,d=0,e=a.length;e>d&&(c=a[d]);d++)c(b);this.currentPointerId=0},listen:function(a,b){a.forEach(function(a){this.addEvent(a,this.boundHandler,!1,b)},this)},unlisten:function(a){a.forEach(function(a){this.removeEvent(a,this.boundHandler,!1,inTarget)},this)},addEvent:function(a,b,c,d){d.addEventListener(a,b,c)},removeEvent:function(a,b,c,d){d.removeEventListener(a,b,c)},makeEvent:function(a,b){return new PointerGestureEvent(a,b)},cloneEvent:function(a){var b={};for(var c in a)b[c]=a[c];return b},dispatchEvent:function(a,b){var c=b||this.targets.get(a);c&&(c.dispatchEvent(a),a.tapPrevented&&this.preventTap(this.currentPointerId))},asyncDispatchEvent:function(a,b){var c=function(){this.dispatchEvent(a,b)}.bind(this);setTimeout(c,0)},preventTap:function(a){var b=this.recognizers.tap;b&&b.preventTap(a)}};b.boundHandler=b.eventHandler.bind(b),a.dispatcher=b;var c=[],d=!1;a.register=function(b){if(d){var e=window.PointerEventsPolyfill;e&&e.register(b),a.dispatcher.registerTarget(b)}else c.push(b)},document.addEventListener("DOMContentLoaded",function(){d=!0,c.push(document),c.forEach(a.register)})}(window.PointerGestures),function(a){var b=a.dispatcher,c={HOLD_DELAY:200,WIGGLE_THRESHOLD:16,events:["pointerdown","pointermove","pointerup","pointercancel"],heldPointer:null,holdJob:null,pulse:function(){var a=Date.now()-this.heldPointer.timeStamp,b=this.held?"holdpulse":"hold";this.fireHold(b,a),this.held=!0},cancel:function(){clearInterval(this.holdJob),this.held&&this.fireHold("release"),this.held=!1,this.heldPointer=null,this.target=null,this.holdJob=null},pointerdown:function(a){a.isPrimary&&!this.heldPointer&&(this.heldPointer=a,this.target=a.target,this.holdJob=setInterval(this.pulse.bind(this),this.HOLD_DELAY))},pointerup:function(a){this.heldPointer&&this.heldPointer.pointerId===a.pointerId&&this.cancel()},pointercancel:function(){this.cancel()},pointermove:function(a){if(this.heldPointer&&this.heldPointer.pointerId===a.pointerId){var b=a.clientX-this.heldPointer.clientX,c=a.clientY-this.heldPointer.clientY;b*b+c*c>this.WIGGLE_THRESHOLD&&this.cancel()}},fireHold:function(a,c){var d={pointerType:this.heldPointer.pointerType};c&&(d.holdTime=c);var e=b.makeEvent(a,d);b.dispatchEvent(e,this.target),e.tapPrevented&&b.preventTap(this.heldPointer.pointerId)}};b.registerRecognizer("hold",c)}(window.PointerGestures),function(a){var b=a.dispatcher,c=new a.PointerMap,d={events:["pointerdown","pointermove","pointerup","pointercancel"],WIGGLE_THRESHOLD:4,clampDir:function(a){return a>0?1:-1},calcPositionDelta:function(a,b){var c=0,d=0;return a&&b&&(c=b.pageX-a.pageX,d=b.pageY-a.pageY),{x:c,y:d}},fireTrack:function(a,c,d){var e=d,f=this.calcPositionDelta(e.downEvent,c),g=this.calcPositionDelta(e.lastMoveEvent,c);g.x&&(e.xDirection=this.clampDir(g.x)),g.y&&(e.yDirection=this.clampDir(g.y));var h={dx:f.x,dy:f.y,ddx:g.x,ddy:g.y,clientX:c.clientX,clientY:c.clientY,pageX:c.pageX,pageY:c.pageY,screenX:c.screenX,screenY:c.screenY,xDirection:e.xDirection,yDirection:e.yDirection,trackInfo:e.trackInfo,pointerType:c.pointerType};"trackend"===a&&(h._releaseTarget=c.target);var i=b.makeEvent(a,h);e.lastMoveEvent=c,b.dispatchEvent(i,e.downTarget)},pointerdown:function(a){if(a.isPrimary&&("mouse"===a.pointerType?1===a.buttons:!0)){var b={downEvent:a,downTarget:a.target,trackInfo:{},lastMoveEvent:null,xDirection:0,yDirection:0,tracking:!1};c.set(a.pointerId,b)}},pointermove:function(a){var b=c.get(a.pointerId);if(b)if(b.tracking)this.fireTrack("track",a,b);else{var d=this.calcPositionDelta(b.downEvent,a),e=d.x*d.x+d.y*d.y;e>this.WIGGLE_THRESHOLD&&(b.tracking=!0,this.fireTrack("trackstart",b.downEvent,b),this.fireTrack("track",a,b))}},pointerup:function(a){var b=c.get(a.pointerId);b&&(b.tracking&&this.fireTrack("trackend",a,b),c.delete(a.pointerId))},pointercancel:function(a){this.pointerup(a)}};b.registerRecognizer("track",d)}(window.PointerGestures),function(a){var b=a.dispatcher,c={MIN_VELOCITY:.5,MAX_QUEUE:4,moveQueue:[],target:null,pointerId:null,events:["pointerdown","pointermove","pointerup","pointercancel"],pointerdown:function(a){a.isPrimary&&!this.pointerId&&(this.pointerId=a.pointerId,this.target=a.target,this.addMove(a))},pointermove:function(a){a.pointerId===this.pointerId&&this.addMove(a)},pointerup:function(a){a.pointerId===this.pointerId&&this.fireFlick(a),this.cleanup()},pointercancel:function(){this.cleanup()},cleanup:function(){this.moveQueue=[],this.target=null,this.pointerId=null},addMove:function(a){this.moveQueue.length>=this.MAX_QUEUE&&this.moveQueue.shift(),this.moveQueue.push(a)},fireFlick:function(a){for(var c,d,e,f,g,h,i,j=a,k=this.moveQueue.length,l=0,m=0,n=0,o=0;k>o&&(i=this.moveQueue[o]);o++)c=j.timeStamp-i.timeStamp,d=j.clientX-i.clientX,e=j.clientY-i.clientY,f=d/c,g=e/c,h=Math.sqrt(f*f+g*g),h>n&&(l=f,m=g,n=h);var p=Math.abs(l)>Math.abs(m)?"x":"y",q=this.calcAngle(l,m);if(Math.abs(n)>=this.MIN_VELOCITY){var r=b.makeEvent("flick",{xVelocity:l,yVelocity:m,velocity:n,angle:q,majorAxis:p,pointerType:a.pointerType});b.dispatchEvent(r,this.target)}},calcAngle:function(a,b){return 180*Math.atan2(b,a)/Math.PI}};b.registerRecognizer("flick",c)}(window.PointerGestures),function(a){var b=a.dispatcher,c=new a.PointerMap,d={events:["pointerdown","pointermove","pointerup","pointercancel","keyup"],pointerdown:function(a){a.isPrimary&&!a.tapPrevented&&c.set(a.pointerId,{target:a.target,x:a.clientX,y:a.clientY})},pointermove:function(a){if(a.isPrimary){var b=c.get(a.pointerId);b&&a.tapPrevented&&c.delete(a.pointerId)}},pointerup:function(d){var e=c.get(d.pointerId);if(e&&!d.tapPrevented){var f=a.findLCA(e.target,d.target);if(f){var g=b.makeEvent("tap",{x:d.clientX,y:d.clientY,detail:d.detail,pointerType:d.pointerType});b.dispatchEvent(g,f)}}c.delete(d.pointerId)},pointercancel:function(a){c.delete(a.pointerId)},keyup:function(a){var c=a.keyCode;if(32===c){var d=a.target;d instanceof HTMLInputElement||d instanceof HTMLTextAreaElement||b.dispatchEvent(b.makeEvent("tap",{x:0,y:0,detail:0,pointerType:"unavailable"}),d)}},preventTap:function(a){c.delete(a)}};b.registerRecognizer("tap",d)}(window.PointerGestures),Polymer={},function(){var a=document.createElement("style");a.textContent="body {opacity: 0;}";var b=document.querySelector("head");b.insertBefore(a,b.firstChild),window.addEventListener("WebComponentsReady",function(){document.body.style.webkitTransition="opacity 0.3s",document.body.style.opacity=1})}(Polymer),function(a){function b(a,b){return a&&b&&Object.getOwnPropertyNames(b).forEach(function(c){var d=Object.getOwnPropertyDescriptor(b,c);d&&(Object.defineProperty(a,c,d),"function"==typeof d.value&&(a[c].nom=c))}),a}a.extend=b}(Polymer),function(a){function b(a,b,d){return a?a.stop():a=new c(this),a.go(b,d),a}var c=function(a){this.context=a};c.prototype={go:function(a,b){this.callback=a,this.handle=setTimeout(this.complete.bind(this),b)},stop:function(){this.handle&&(clearTimeout(this.handle),this.handle=null)},complete:function(){this.handle&&(this.stop(),this.callback.call(this.context))}},a.job=b}(Polymer),function(){var a={};HTMLElement.register=function(b,c){a[b]=c},HTMLElement.getPrototypeForTag=function(b){var c=b?a[b]:HTMLElement.prototype;return c||Object.getPrototypeOf(document.createElement(b))};var b=Event.prototype.stopPropagation;Event.prototype.stopPropagation=function(){this.cancelBubble=!0,b.apply(this,arguments)},HTMLImports.importer.preloadSelectors+=", polymer-element link[rel=stylesheet]"}(Polymer),function(a){function b(a){var c=b.caller,g=c.nom;"_super"in c||(g||(g=e.call(this,c)),g||console.warn("called super() on a method not installed declaratively (has no .nom property)"),d(c,g,f(this)));var h=c._super;if(h){var i=h[g];return"_super"in i||d(i,g,h),i.apply(this,a||[])}}function c(a,b,c){for(;a&&(!a.hasOwnProperty(b)||a[b]===c);)a=f(a);return a}function d(a,b,d){return a._super=c(d,b,a),a._super&&(a._super[b].nom=b),a._super}function e(a){console.warn("nameInThis called");for(var b=this;b&&b!==HTMLElement.prototype;){for(var c,d=Object.getOwnPropertyNames(b),e=0,f=d.length;f>e&&(c=d[e]);e++){var g=Object.getOwnPropertyDescriptor(b,c);if(g.value==a)return c}b=b.__proto__}}function f(a){return a.__proto__}a.super=b}(Polymer),function(a){function b(a,b){var d=typeof b;return b instanceof Date&&(d="date"),c[d](a,b)}var c={string:function(a){return a},date:function(a){return new Date(Date.parse(a)||Date.now())},"boolean":function(a){return""===a?!0:"false"===a?!1:!!a},number:function(a){var b=parseFloat(a);return String(b)===a?b:a},object:function(a,b){if(null===b)return a;try{return JSON.parse(a.replace(/'/g,'"'))}catch(c){return a}}};a.deserializeValue=b}(Polymer),function(a){var b={};b.declaration={},b.instance={},a.api=b}(Polymer),function(a){var b={async:function(a,b,c){Platform.flush(),b=b&&b.length?b:[b];var d=function(){(this[a]||a).apply(this,b)}.bind(this);return c?setTimeout(d,c):requestAnimationFrame(d)},fire:function(a,b,c,d){var e=c||this;return e.dispatchEvent(new CustomEvent(a,{bubbles:void 0!==d?!1:!0,detail:b})),b},asyncFire:function(){this.async("fire",arguments)},classFollows:function(a,b,c){b&&b.classList.remove(c),a&&a.classList.add(c)}};b.asyncMethod=b.async,a.api.instance.utils=b}(Polymer),function(a){function b(a,b){b.cancelBubble||(b.on=i+b.type,h.events&&console.group("[%s]: listenLocal [%s]",a.localName,b.on),b.path?c(a,b):d(a,b),h.events&&console.groupEnd())}function c(a,b){var c=null;Array.prototype.some.call(b.path,function(d){return d===a?!0:(c=c===a?c:e(d),c&&f(c,d,b)?!0:void 0)},this)}function d(a,b){h.events&&console.log("event.path() not supported for",b.type);for(var c=b.target,d=null;c&&c!=a;){if(d=d===a?d:e(c),d&&f(d,c,b))return!0;c=c.parentNode}}function e(a){for(;a.parentNode;)a=a.parentNode;return a.host}function f(a,b,c){var d=b.getAttribute&&b.getAttribute(c.on);return d&&g(b,c)&&(h.events&&console.log("[%s] found handler name [%s]",a.localName,d),a.dispatchMethod(b,d,[c,c.detail,b])),c.cancelBubble}function g(a,b){var c=l.get(b);return c||l.set(b,c=[]),c.indexOf(a)<0?(c.push(a),!0):void 0}var h=window.logFlags||{},i="on-",j="eventDelegates",k={EVENT_PREFIX:i,DELEGATES:j,addHostListeners:function(){var a=this[j];h.events&&Object.keys(a).length>0&&console.log("[%s] addHostListeners:",this.localName,a),this.addNodeListeners(this,a,this.hostEventListener)},addInstanceListeners:function(a,b){var c=b.delegates;c&&(h.events&&Object.keys(c).length>0&&console.log("[%s:root] addInstanceListeners:",this.localName,c),this.addNodeListeners(a,c,this.instanceEventListener))},addNodeListeners:function(a,b,c){var d;for(var e in b)d||(d=c.bind(this)),a.addEventListener(e,d)},hostEventListener:function(a){if(!a.cancelBubble){h.events&&console.group("[%s]: hostEventListener(%s)",this.localName,a.type);var b=this.findEventDelegate(a);b&&(h.events&&console.log("[%s] found host handler name [%s]",this.localName,b),this.dispatchMethod(this,b,[a,a.detail,this])),h.events&&console.groupEnd()}},findEventDelegate:function(a){return this[j][a.type]},dispatchMethod:function(a,b,c){if(a){h.events&&console.group("[%s] dispatch [%s]",a.localName,b);var d=this[b];d&&d[c?"apply":"call"](this,c),h.events&&console.groupEnd()}},instanceEventListener:function(a){b(this,a)}},l=new SideTable("handledList");a.api.instance.events=k}(Polymer),function(a){var b="__published",c="__instance_attributes",d={PUBLISHED:b,INSTANCE_ATTRIBUTES:c,copyInstanceAttributes:function(){var a=this[c];for(var b in a)this.setAttribute(b,a[b])},takeAttributes:function(){for(var a,b=0,c=this.attributes,d=c.length;(a=c[b])&&d>b;b++)this.attributeToProperty(a.name,a.value)},attributeToProperty:function(b,c){var b=this.propertyForAttribute(b);if(b){if(c&&c.search(a.bindPattern)>=0)return;var d=this[b],c=this.deserializeValue(c,d);c!==d&&(this[b]=c)}},propertyForAttribute:function(a){var b=this.publishedPropertyNames.lcNames.indexOf(a);return b>=0?this.publishedPropertyNames.names[b]:void 0},deserializeValue:function(b,c){return a.deserializeValue(b,c)},serializeValue:function(a,b){return"boolean"===b?a?"":void 0:"object"!==b&&"object"!=typeof a&&void 0!==a?a:void 0},propertyToAttribute:function(a){if(this.publishedPropertyNames.names.indexOf(a)>=0){var b=typeof this.__proto__[a],c=this.serializeValue(this[a],b);void 0!==c?this.setAttribute(a,c):"boolean"===b&&this.removeAttribute(a)}}};String.prototype.toLowerCase.call.bind(String.prototype.toLowerCase),a.api.instance.attributes=d}(Polymer),function(a){function b(a,b){var c=this[a]||a;"function"==typeof c&&c.apply(this,b)}function c(a,b,c,d){h.bind&&console.log(n,c.localName||"object",d,a.localName,b);var e=Path.get(d),f=e.getValueFrom(c);return(null===f||void 0===f)&&e.setValueFrom(c,a[b]),PathObserver.defineProperty(a,b,{object:c,path:d})}function d(a,b,c){var d=g(a);d[b]=c}function e(a,b){var c=g(a);return c&&c[b]?(c[b].close(),c[b]=null,!0):void 0}function f(a){var b=g(a);Object.keys(b).forEach(function(a){b[a].close(),b[a]=null})}function g(a){var b=k.get(a);return b||k.set(a,b={}),b}var h=window.logFlags||{},i="Changed";a.api.instance.attributes.PUBLISHED;var j={OBSERVE_SUFFIX:i,observeProperties:function(){for(var a,b=this.getObservablePropertyNames(),c=0,d=b.length;d>c&&(a=b[c]);c++)this.observeProperty(a)},getCustomPropertyNames:function(){return this.customPropertyNames},getObservablePropertyNames:function(){return this.observeablePropertyNames},observeProperty:function(a){h.watch&&console.log(l,this.localName,a);var b=function(b,c){h.watch&&console.log(m,this.localName,this.id||"",a,this[a],c),this.dispatchPropertyChange(a,c)}.bind(this),c=new PathObserver(this,a,b);d(this,a,c)},bindProperty:function(a,b,d){return c(this,a,b,d)},unbindProperty:function(a,b){return e(this,a,b)},unbindAllProperties:function(){f(this)},dispatchPropertyChange:function(a,c){this.propertyToAttribute(a),b.call(this,a+i,[c])}},k=new SideTable,l="[%s] watching [%s]",m="[%s#%s] watch: [%s] now [%s] was [%s]",n="[%s]: bindProperties: [%s] to [%s].[%s]";a.api.instance.properties=j}(Polymer),function(a){function b(a){d(a,c)}function c(a){a.unbindAll()}function d(a,b){if(a){b(a);for(var c=a.firstChild;c;c=c.nextSibling)d(c,b)}}var e=window.logFlags||0,f=new PolymerExpressions,g={instanceTemplate:function(a){return a.createInstance(this,f)},bind:function(a,b,c){var d=this.propertyForAttribute(a);if(d){this.unbind(a);var e=this.bindProperty(d,b,c);return e.path=c,this.propertyToAttribute(a),this.bindings[a]=e}return this.super(arguments)},asyncUnbindAll:function(){this._unbound||(e.unbind&&console.log("[%s] asyncUnbindAll",this.localName),this._unbindAllJob=this.job(this._unbindAllJob,this.unbindAll,0))},unbindAll:function(){this._unbound||(this.unbindAllProperties(),this.super(),b(this.shadowRoot),this._unbound=!0)},cancelUnbindAll:function(a){return this._unbound?(e.unbind&&console.warn("[%s] already unbound, cannot cancel unbindAll",this.localName),void 0):(e.unbind&&console.log("[%s] cancelUnbindAll",this.localName),this._unbindAllJob&&(this._unbindAllJob=this._unbindAllJob.stop()),a||d(this.shadowRoot,function(a){a.cancelUnbindAll&&a.cancelUnbindAll()}),void 0)}},h=/\{\{([^{}]*)}}/;a.bindPattern=h,a.api.instance.mdv=g}(Polymer),function(a){function b(a){return a.hasOwnProperty("PolymerBase")}function c(){}a.canCreateElements=!1,a.abortedElements=0;var d={PolymerBase:!0,job:Polymer.job,"super":Polymer.super,created:function(){},ready:function(){},readyCallback:function(){this._createdCallback()},createdCallback:function(){this._createdCallback()},_createdCallback:function(){return window.timer&&timer.time("created"),!this.ownerDocument.defaultView&&!Polymer.canCreateElements||Polymer.preventUpgrades===!0?(Polymer.abortedElements++,window.timer&&timer.timeEnd("created"),void 0):(Polymer.canCreateElements=!0,this.observeProperties(),this.copyInstanceAttributes(),this.takeAttributes(),this.addHostListeners(),this.parseElements(this.__proto__),this.ready(),this.created(),window.timer&&timer.timeEnd("created"),void 0)},insertedCallback:function(){this._enteredDocumentCallback()},enteredDocumentCallback:function(){this._enteredDocumentCallback()},_enteredDocumentCallback:function(){this.cancelUnbindAll(!0),this.inserted&&this.inserted(),this.enteredDocument&&this.enteredDocument()},removedCallback:function(){this._leftDocumentCallback()},leftDocumentCallback:function(){this._leftDocumentCallback()},_leftDocumentCallback:function(){this.asyncUnbindAll(),this.removed&&this.removed(),this.leftDocument&&this.leftDocument()},parseElements:function(a){a&&a.element&&(this.parseElements(a.__proto__),a.parseElement.call(this,a.element))},parseElement:function(a){this.shadowFromTemplate(this.fetchTemplate(a))},fetchTemplate:function(a){return a.querySelector("template")},shadowFromTemplate:function(a){if(a){this.shadowRoot;var b=this.createShadowRoot();b.applyAuthorStyles=this.applyAuthorStyles,b.resetStyleInheritance=this.resetStyleInheritance;var c=this.instanceTemplate(a);return b.appendChild(c),this.shadowRootReady(b,a),b}},shadowRootReady:function(a,b){this.marshalNodeReferences(a),this.addInstanceListeners(a,b),PointerGestures.register(a)},marshalNodeReferences:function(a){var b=this.$=this.$||{};if(a)for(var c,d=a.querySelectorAll("[id]"),e=0,f=d.length;f>e&&(c=d[e]);e++)b[c.id]=c},attributeChangedCallback:function(a){this.attributeToProperty(a,this.getAttribute(a)),this.attributeChanged&&this.attributeChanged.apply(this,arguments)}};c.prototype=d,d.constructor=c,a.Base=c,a.isBase=b,a.api.instance.base=d}(Polymer),function(a){function b(a){return a.__proto__}window.logFlags||{};var c="element",d="controller",e={STYLE_SCOPE_ATTRIBUTE:c,installControllerStyles:function(){var a=this.findStyleController();if(a&&!this.scopeHasElementStyle(a,d)){for(var c=b(this),e="";c&&c.element;)e+=c.element.cssTextForScope(d),c=b(c);if(e){var f=this.element.cssTextToScopeStyle(e,d);window.ShadowDOMPolyfill&&Platform.ShadowCSS.shimPolyfillDirectives([f],this.localName),Polymer.applyStyleToScope(f,a)}}},scopeHasElementStyle:function(a,b){var d=c+"="+this.localName+"-"+b;return a.querySelector("style["+d+"]")},findStyleController:function(){if(window.ShadowDOMPolyfill)return wrap(document.head);for(var a=this;a.parentNode;)a=a.parentNode;return a===document?document.head:a}};a.api.instance.styles=e}(Polymer),function(a){var b={addResolvePathApi:function(){var a=this.elementPath(),b=this.getAttribute("assetpath")||"";this.prototype.resolvePath=function(c){return a+b+c}},elementPath:function(){return this.urlToPath(HTMLImports.getDocumentUrl(this.ownerDocument))},urlToPath:function(a){if(a){var b=a.split("/");return b.pop(),b.push(""),b.join("/")}return""}};a.api.declaration.path=b}(Polymer),function(a){function b(a,b){if(a){var d=c(a.textContent),e=a.getAttribute(g);e&&d.setAttribute(g,e),b.appendChild(d)}}function c(a){var b=document.createElement("style");return b.textContent=a,b}function d(a){return a&&a.__resource||""}function e(a,b){return n?n.call(a,b):void 0}window.logFlags||{};var f=a.api.instance.styles,g=f.STYLE_SCOPE_ATTRIBUTE,h="style",i="[rel=stylesheet]",j="global",k="polymer-scope",l={installSheets:function(){this.cacheSheets(),this.cacheStyles(),this.installLocalSheets(),this.installGlobalStyles()},cacheSheets:function(){this.sheets=this.findNodes(i),this.sheets.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)})},cacheStyles:function(){this.styles=this.findNodes(h+"["+k+"]"),this.styles.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)})},installLocalSheets:function(){var a=this.sheets.filter(function(a){return!a.hasAttribute(k)}),b=this.templateContent();if(b){var e="";a.forEach(function(a){e+=d(a)+"\n"}),e&&b.insertBefore(c(e),b.firstChild)}},findNodes:function(a,b){var c=this.querySelectorAll(a).array(),d=this.templateContent();if(d){var e=d.querySelectorAll(a).array();c=c.concat(e)}return b?c.filter(b):c},templateContent:function(){var a=this.querySelector("template");return a&&templateContent(a)},installGlobalStyles:function(){var a=this.styleForScope(j);b(a,document.head)},cssTextForScope:function(a){var b="",c="["+k+"="+a+"]",f=function(a){return e(a,c)},g=this.sheets.filter(f);g.forEach(function(a){b+=d(a)+"\n\n"});var h=this.styles.filter(f);return h.forEach(function(a){b+=a.textContent+"\n\n"}),b},styleForScope:function(a){var b=this.cssTextForScope(a);return this.cssTextToScopeStyle(b,a)},cssTextToScopeStyle:function(a,b){if(a){var d=c(a);return d.setAttribute(g,this.getAttribute("name")+"-"+b),d}}},m=HTMLElement.prototype,n=m.matches||m.matchesSelector||m.webkitMatchesSelector||m.mozMatchesSelector;a.api.declaration.styles=l,a.applyStyleToScope=b}(Polymer),function(a){function b(a){return a.slice(0,k)==g}function c(a){return a.slice(k)}function d(a){return a.ref?a.ref.content:a.content}var e=a.api.instance.events,f=e.DELEGATES,g=e.EVENT_PREFIX,h=window.logFlags||{},i={inheritDelegates:function(a){this.inheritObject(a,f)},parseHostEvents:function(){var a=this.prototype[f];this.addAttributeDelegates(a)},addAttributeDelegates:function(a){for(var d,e=0;d=this.attributes[e];e++)b(d.name)&&(a[c(d.name)]=d.value)},parseLocalEvents:function(){Array.prototype.forEach.call(this.querySelectorAll("template"),function(a){a.delegates={},this.accumulateTemplatedEvents(a,a.delegates),h.events&&console.log("[%s] parseLocalEvents:",this.attributes.name.value,a.delegates)},this)},accumulateTemplatedEvents:function(a,b){if("template"===a.localName){var c=d(a);c&&this.accumulateChildEvents(c,b)}},accumulateChildEvents:function(a,b){Array.prototype.forEach.call(a.childNodes,function(a){this.accumulateEvents(a,b)},this)},accumulateEvents:function(a,b){return this.accumulateAttributeEvents(a,b),this.accumulateChildEvents(a,b),this.accumulateTemplatedEvents(a,b),b},accumulateAttributeEvents:function(a,d){a.attributes&&Array.prototype.forEach.call(a.attributes,function(a){b(a.name)&&this.accumulateEvent(c(a.name),d)},this)},accumulateEvent:function(a,b){a=j[a]||a,b[a]=b[a]||1}},j={webkitanimationstart:"webkitAnimationStart",webkitanimationend:"webkitAnimationEnd",webkittransitionend:"webkitTransitionEnd",domfocusout:"DOMFocusOut",domfocusin:"DOMFocusIn"},k=g.length;i.event_translations=j,a.api.declaration.events=i}(Polymer),function(a){var b=a.api.instance.attributes.PUBLISHED,c=a.api.instance.properties.OBSERVE_SUFFIX,d=[],e={cacheProperties:function(){this.prototype.customPropertyNames=this.fetchCustomPropertyNames(),this.prototype.publishedPropertyNames=this.fetchPublishedPropertyNames(),this.prototype.observeablePropertyNames=this.fetchObserveablePropertyNames()},fetchCustomPropertyNames:function(){for(var b,c=this.prototype,e={};c&&!a.isBase(c);){for(var f,g=Object.getOwnPropertyNames(c),h=0,i=g.length;i>h&&(f=g[h]);h++)e[f]=!0,b=!0;c=c.__proto__}return b?Object.keys(e):d},fetchPublishedPropertyNames:function(){var a=[],c=[];return Object.keys(this.prototype[b]).forEach(function(b){a.push(b),c.push(b.toLowerCase())},this),{names:a,lcNames:c}},fetchObserveablePropertyNames:function(){for(var a,b=this.prototype.publishedPropertyNames.names.slice(),d=this.prototype.customPropertyNames,e=0,f=d.length;f>e;e++)a=d[e],this.prototype[a+c]&&b.push(a);return b}};a.api.declaration.properties=e
}(Polymer),function(a){var b=a.api.instance.attributes,c=b.PUBLISHED,d=b.INSTANCE_ATTRIBUTES,e="publish",f="attributes",g={inheritAttributesObjects:function(a){this.inheritObject(a,c),this.inheritObject(a,d)},parseAttributes:function(){this.publishAttributes(this.prototype),this.publishProperties(this.prototype),this.accumulateInstanceAttributes()},publishAttributes:function(a){var b=a[c],d=this.getAttribute(f);if(d){var e=d.split(d.indexOf(",")>=0?",":" ");e.forEach(function(a){a=a.trim(),!a||a in b||(b[a]=null)})}Object.keys(b).forEach(function(c){c in a||(a[c]=b[c])})},publishProperties:function(a){this.publishPublish(a)},publishPublish:function(a){if(a.hasOwnProperty(e)){var b=a[e];b&&(Object.keys(b).forEach(function(c){a[c]=b[c]}),Platform.mixin(a[c],b))}},accumulateInstanceAttributes:function(){var a=this.prototype[d];this.attributes.forEach(function(b){this.isInstanceAttribute(b.name)&&(a[b.name]=b.value)},this)},isInstanceAttribute:function(a){return!this.blackList[a]&&"on-"!==a.slice(0,3)},blackList:{name:1,"extends":1,constructor:1,noscript:1}};g.blackList[f]=1,a.api.declaration.attributes=g}(Polymer),function(a){function b(a){return Object.create(HTMLElement.getPrototypeForTag(a))}function c(a){if(!Object.__proto__){var b=Object.getPrototypeOf(a);a.__proto__=b,f(b)&&(b.__proto__=Object.getPrototypeOf(b))}}function d(){return h||(h={},Object.keys(e.instance).forEach(function(a){g(h,e.instance[a])})),h}var e=a.api,f=a.isBase,g=a.extend,h=null,i=b(),i={generateCustomPrototype:function(a,b){var d=this.generateBasePrototype(b);return this.addNamedApi(d,a),c(d),d},generateBasePrototype:function(a){var c=b(a);return this.ensureBaseApi(c)},ensureBaseApi:function(a){return a.PolymerBase||(g(a,d()),a=Object.create(a)),this.inheritAttributesObjects(a),this.inheritDelegates(a),a},addNamedApi:function(b,c){return g(b,a.getRegisteredPrototype(c))},inheritObject:function(a,b){a[b]=g({},Object.getPrototypeOf(a)[b])},registerPrototype:function(a){this.ctor=document.register(a,{prototype:this.prototype}),this.prototype.constructor=this.ctor,HTMLElement.register(a,this.prototype)}};e.declaration.prototype=i}(Polymer),function(a){function b(a,b){k[a]=b||{},d(a)}function c(a){return k[a]}function d(a){l[a]&&(l[a].registerWhenReady(),delete l[a])}function e(a){n[a]=!0;var b=m[a];b&&(b.forEach(function(a){a.registerWhenReady()}),delete m[a])}function f(a){return n[a]}function g(a){window.HTMLImports&&!HTMLImports.readyTime?addEventListener("HTMLImportsLoaded",a):a()}var h=a.extend,i=a.api.declaration,j=h(Object.create(HTMLElement.prototype),{createdCallback:function(){this.name=this.getAttribute("name"),this.registerWhenReady()},registerWhenReady:function(){var a=this.name;{if(c(a)){var d=this.getAttribute("extends");return d&&d.indexOf("-")>=0&&!f(d)?((m[d]=m[d]||[]).push(this),void 0):(document.contains(this)?g(function(){this.register(a,d)}.bind(this)):this.register(a,d),void 0)}if(l[a]=this,this.hasAttribute("noscript"))if(window.CustomElements&&!CustomElements.useNative)b(a);else{var e=document.createElement("script");e.textContent="Polymer('"+a+"');",this.appendChild(e)}}},register:function(a,b){window.timer&&timer.time("register"),this.prototype=this.generateCustomPrototype(a,b),this.prototype.element=this,this.addResolvePathApi(),this.desugar(),window.ShadowDOMPolyfill&&Platform.ShadowCSS.shimStyling(this.templateContent(),a,b),window.timer&&timer.timeEnd("register"),this.registerPrototype(a),this.publishConstructor(),e(a)},desugar:function(){this.parseAttributes(),this.parseHostEvents(),this.parseLocalEvents(),this.installSheets(),this.prototype.registerCallback&&this.prototype.registerCallback(this),this.cacheProperties()},publishConstructor:function(){var a=this.getAttribute("constructor");a&&(window[a]=this.ctor)}});Object.keys(i).forEach(function(a){h(j,i[a])}),document.register("polymer-element",{prototype:j});var k={},l={},m={},n={};a.getRegisteredPrototype=c,h(b,a),window.Polymer=b}(Polymer),Polymer.register=function(a){if(a!=window){var b=a.getAttribute("name");throw new Error("Polymer.register is deprecated in declaration of "+b+". Please see http://www.polymer-project.org/getting-started.html")}};


if(!window['googleLT_']){window['googleLT_']=(new Date()).getTime();}if (!window['google']) {
window['google'] = {};
}
if (!window['google']['loader']) {
window['google']['loader'] = {};
google.loader.ServiceBase = 'https://www.google.com/uds';
google.loader.GoogleApisBase = 'https://ajax.googleapis.com/ajax';
google.loader.ApiKey = 'notsupplied';
google.loader.KeyVerified = true;
google.loader.LoadFailure = false;
google.loader.Secure = true;
google.loader.GoogleLocale = 'www.google.com';
google.loader.ClientLocation = null;
google.loader.AdditionalParams = '';
(function() {var d=encodeURIComponent,g=window,h=document;function l(a,b){return a.load=b}var m="push",n="replace",q="charAt",r="indexOf",t="ServiceBase",u="name",v="getTime",w="length",x="prototype",y="setTimeout",z="loader",A="substring",B="join",C="toLowerCase";function D(a){return a in E?E[a]:E[a]=-1!=navigator.userAgent[C]()[r](a)}var E={};function F(a,b){var c=function(){};c.prototype=b[x];a.U=b[x];a.prototype=new c}
function G(a,b,c){var e=Array[x].slice.call(arguments,2)||[];return function(){var c=e.concat(Array[x].slice.call(arguments));return a.apply(b,c)}}function H(a){a=Error(a);a.toString=function(){return this.message};return a}function I(a,b){for(var c=a.split(/\./),e=g,f=0;f<c[w]-1;f++)e[c[f]]||(e[c[f]]={}),e=e[c[f]];e[c[c[w]-1]]=b}function J(a,b,c){a[b]=c}if(!K)var K=I;if(!L)var L=J;google[z].v={};K("google.loader.callbacks",google[z].v);var M={},N={};google[z].eval={};K("google.loader.eval",google[z].eval);
l(google,function(a,b,c){function e(a){var b=a.split(".");if(2<b[w])throw H("Module: '"+a+"' not found!");"undefined"!=typeof b[1]&&(f=b[0],c.packages=c.packages||[],c.packages[m](b[1]))}var f=a;c=c||{};if(a instanceof Array||a&&"object"==typeof a&&"function"==typeof a[B]&&"function"==typeof a.reverse)for(var k=0;k<a[w];k++)e(a[k]);else e(a);if(a=M[":"+f]){c&&(!c.language&&c.locale)&&(c.language=c.locale);c&&"string"==typeof c.callback&&(k=c.callback,k.match(/^[[\]A-Za-z0-9._]+$/)&&(k=g.eval(k),c.callback=
k));if((k=c&&null!=c.callback)&&!a.s(b))throw H("Module: '"+f+"' must be loaded before DOM onLoad!");k?a.m(b,c)?g[y](c.callback,0):a.load(b,c):a.m(b,c)||a.load(b,c)}else throw H("Module: '"+f+"' not found!");});K("google.load",google.load);
google.T=function(a,b){b?(0==O[w]&&(P(g,"load",Q),!D("msie")&&!D("safari")&&!D("konqueror")&&D("mozilla")||g.opera?g.addEventListener("DOMContentLoaded",Q,!1):D("msie")?h.write("<script defer onreadystatechange='google.loader.domReady()' src=//:>\x3c/script>"):(D("safari")||D("konqueror"))&&g[y](S,10)),O[m](a)):P(g,"load",a)};K("google.setOnLoadCallback",google.T);
function P(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var e=a["on"+b];a["on"+b]=null!=e?aa([c,e]):c}}function aa(a){return function(){for(var b=0;b<a[w];b++)a[b]()}}var O=[];google[z].P=function(){var a=g.event.srcElement;"complete"==a.readyState&&(a.onreadystatechange=null,a.parentNode.removeChild(a),Q())};K("google.loader.domReady",google[z].P);var ba={loaded:!0,complete:!0};function S(){ba[h.readyState]?Q():0<O[w]&&g[y](S,10)}
function Q(){for(var a=0;a<O[w];a++)O[a]();O.length=0}google[z].d=function(a,b,c){if(c){var e;"script"==a?(e=h.createElement("script"),e.type="text/javascript",e.src=b):"css"==a&&(e=h.createElement("link"),e.type="text/css",e.href=b,e.rel="stylesheet");(a=h.getElementsByTagName("head")[0])||(a=h.body.parentNode.appendChild(h.createElement("head")));a.appendChild(e)}else"script"==a?h.write('<script src="'+b+'" type="text/javascript">\x3c/script>'):"css"==a&&h.write('<link href="'+b+'" type="text/css" rel="stylesheet"></link>')};
K("google.loader.writeLoadTag",google[z].d);google[z].Q=function(a){N=a};K("google.loader.rfm",google[z].Q);google[z].S=function(a){for(var b in a)"string"==typeof b&&(b&&":"==b[q](0)&&!M[b])&&(M[b]=new T(b[A](1),a[b]))};K("google.loader.rpl",google[z].S);google[z].R=function(a){if((a=a.specs)&&a[w])for(var b=0;b<a[w];++b){var c=a[b];"string"==typeof c?M[":"+c]=new U(c):(c=new V(c[u],c.baseSpec,c.customSpecs),M[":"+c[u]]=c)}};K("google.loader.rm",google[z].R);google[z].loaded=function(a){M[":"+a.module].l(a)};
K("google.loader.loaded",google[z].loaded);google[z].O=function(){return"qid="+((new Date)[v]().toString(16)+Math.floor(1E7*Math.random()).toString(16))};K("google.loader.createGuidArg_",google[z].O);I("google_exportSymbol",I);I("google_exportProperty",J);google[z].a={};K("google.loader.themes",google[z].a);google[z].a.I="//www.google.com/cse/style/look/bubblegum.css";L(google[z].a,"BUBBLEGUM",google[z].a.I);google[z].a.K="//www.google.com/cse/style/look/greensky.css";L(google[z].a,"GREENSKY",google[z].a.K);
google[z].a.J="//www.google.com/cse/style/look/espresso.css";L(google[z].a,"ESPRESSO",google[z].a.J);google[z].a.M="//www.google.com/cse/style/look/shiny.css";L(google[z].a,"SHINY",google[z].a.M);google[z].a.L="//www.google.com/cse/style/look/minimalist.css";L(google[z].a,"MINIMALIST",google[z].a.L);google[z].a.N="//www.google.com/cse/style/look/v2/default.css";L(google[z].a,"V2_DEFAULT",google[z].a.N);function U(a){this.b=a;this.o=[];this.n={};this.e={};this.f={};this.j=!0;this.c=-1}
U[x].g=function(a,b){var c="";void 0!=b&&(void 0!=b.language&&(c+="&hl="+d(b.language)),void 0!=b.nocss&&(c+="&output="+d("nocss="+b.nocss)),void 0!=b.nooldnames&&(c+="&nooldnames="+d(b.nooldnames)),void 0!=b.packages&&(c+="&packages="+d(b.packages)),null!=b.callback&&(c+="&async=2"),void 0!=b.style&&(c+="&style="+d(b.style)),void 0!=b.noexp&&(c+="&noexp=true"),void 0!=b.other_params&&(c+="&"+b.other_params));if(!this.j){google[this.b]&&google[this.b].JSHash&&(c+="&sig="+d(google[this.b].JSHash));
var e=[],f;for(f in this.n)":"==f[q](0)&&e[m](f[A](1));for(f in this.e)":"==f[q](0)&&this.e[f]&&e[m](f[A](1));c+="&have="+d(e[B](","))}return google[z][t]+"/?file="+this.b+"&v="+a+google[z].AdditionalParams+c};U[x].t=function(a){var b=null;a&&(b=a.packages);var c=null;if(b)if("string"==typeof b)c=[a.packages];else if(b[w])for(c=[],a=0;a<b[w];a++)"string"==typeof b[a]&&c[m](b[a][n](/^\s*|\s*$/,"")[C]());c||(c=["default"]);b=[];for(a=0;a<c[w];a++)this.n[":"+c[a]]||b[m](c[a]);return b};
l(U[x],function(a,b){var c=this.t(b),e=b&&null!=b.callback;if(e)var f=new W(b.callback);for(var k=[],p=c[w]-1;0<=p;p--){var s=c[p];e&&f.B(s);if(this.e[":"+s])c.splice(p,1),e&&this.f[":"+s][m](f);else k[m](s)}if(c[w]){b&&b.packages&&(b.packages=c.sort()[B](","));for(p=0;p<k[w];p++)s=k[p],this.f[":"+s]=[],e&&this.f[":"+s][m](f);if(b||null==N[":"+this.b]||null==N[":"+this.b].versions[":"+a]||google[z].AdditionalParams||!this.j)b&&b.autoloaded||google[z].d("script",this.g(a,b),e);else{c=N[":"+this.b];
google[this.b]=google[this.b]||{};for(var R in c.properties)R&&":"==R[q](0)&&(google[this.b][R[A](1)]=c.properties[R]);google[z].d("script",google[z][t]+c.path+c.js,e);c.css&&google[z].d("css",google[z][t]+c.path+c.css,e)}this.j&&(this.j=!1,this.c=(new Date)[v](),1!=this.c%100&&(this.c=-1));for(p=0;p<k[w];p++)s=k[p],this.e[":"+s]=!0}});
U[x].l=function(a){-1!=this.c&&(X("al_"+this.b,"jl."+((new Date)[v]()-this.c),!0),this.c=-1);this.o=this.o.concat(a.components);google[z][this.b]||(google[z][this.b]={});google[z][this.b].packages=this.o.slice(0);for(var b=0;b<a.components[w];b++){this.n[":"+a.components[b]]=!0;this.e[":"+a.components[b]]=!1;var c=this.f[":"+a.components[b]];if(c){for(var e=0;e<c[w];e++)c[e].C(a.components[b]);delete this.f[":"+a.components[b]]}}};U[x].m=function(a,b){return 0==this.t(b)[w]};U[x].s=function(){return!0};
function W(a){this.F=a;this.q={};this.r=0}W[x].B=function(a){this.r++;this.q[":"+a]=!0};W[x].C=function(a){this.q[":"+a]&&(this.q[":"+a]=!1,this.r--,0==this.r&&g[y](this.F,0))};function V(a,b,c){this.name=a;this.D=b;this.p=c;this.u=this.h=!1;this.k=[];google[z].v[this[u]]=G(this.l,this)}F(V,U);l(V[x],function(a,b){var c=b&&null!=b.callback;c?(this.k[m](b.callback),b.callback="google.loader.callbacks."+this[u]):this.h=!0;b&&b.autoloaded||google[z].d("script",this.g(a,b),c)});V[x].m=function(a,b){return b&&null!=b.callback?this.u:this.h};V[x].l=function(){this.u=!0;for(var a=0;a<this.k[w];a++)g[y](this.k[a],0);this.k=[]};
var Y=function(a,b){return a.string?d(a.string)+"="+d(b):a.regex?b[n](/(^.*$)/,a.regex):""};V[x].g=function(a,b){return this.G(this.w(a),a,b)};
V[x].G=function(a,b,c){var e="";a.key&&(e+="&"+Y(a.key,google[z].ApiKey));a.version&&(e+="&"+Y(a.version,b));b=google[z].Secure&&a.ssl?a.ssl:a.uri;if(null!=c)for(var f in c)a.params[f]?e+="&"+Y(a.params[f],c[f]):"other_params"==f?e+="&"+c[f]:"base_domain"==f&&(b="http://"+c[f]+a.uri[A](a.uri[r]("/",7)));google[this[u]]={};-1==b[r]("?")&&e&&(e="?"+e[A](1));return b+e};V[x].s=function(a){return this.w(a).deferred};V[x].w=function(a){if(this.p)for(var b=0;b<this.p[w];++b){var c=this.p[b];if(RegExp(c.pattern).test(a))return c}return this.D};function T(a,b){this.b=a;this.i=b;this.h=!1}F(T,U);l(T[x],function(a,b){this.h=!0;google[z].d("script",this.g(a,b),!1)});T[x].m=function(){return this.h};T[x].l=function(){};T[x].g=function(a,b){if(!this.i.versions[":"+a]){if(this.i.aliases){var c=this.i.aliases[":"+a];c&&(a=c)}if(!this.i.versions[":"+a])throw H("Module: '"+this.b+"' with version '"+a+"' not found!");}return google[z].GoogleApisBase+"/libs/"+this.b+"/"+a+"/"+this.i.versions[":"+a][b&&b.uncompressed?"uncompressed":"compressed"]};
T[x].s=function(){return!1};var ca=!1,Z=[],da=(new Date)[v](),fa=function(){ca||(P(g,"unload",ea),ca=!0)},ga=function(a,b){fa();if(!(google[z].Secure||google[z].Options&&!1!==google[z].Options.csi)){for(var c=0;c<a[w];c++)a[c]=d(a[c][C]()[n](/[^a-z0-9_.]+/g,"_"));for(c=0;c<b[w];c++)b[c]=d(b[c][C]()[n](/[^a-z0-9_.]+/g,"_"));g[y](G($,null,"//gg.google.com/csi?s=uds&v=2&action="+a[B](",")+"&it="+b[B](",")),1E4)}},X=function(a,b,c){c?ga([a],[b]):(fa(),Z[m]("r"+Z[w]+"="+d(a+(b?"|"+b:""))),g[y](ea,5<Z[w]?0:15E3))},ea=function(){if(Z[w]){var a=
google[z][t];0==a[r]("http:")&&(a=a[n](/^http:/,"https:"));$(a+"/stats?"+Z[B]("&")+"&nc="+(new Date)[v]()+"_"+((new Date)[v]()-da));Z.length=0}},$=function(a){var b=new Image,c=$.H++;$.A[c]=b;b.onload=b.onerror=function(){delete $.A[c]};b.src=a;b=null};$.A={};$.H=0;I("google.loader.recordCsiStat",ga);I("google.loader.recordStat",X);I("google.loader.createImageForLogging",$);

}) ();google.loader.rm({"specs":["feeds","spreadsheets","gdata","visualization",{"name":"sharing","baseSpec":{"uri":"http://www.google.com/s2/sharing/js","ssl":null,"key":{"string":"key"},"version":{"string":"v"},"deferred":false,"params":{"language":{"string":"hl"}}}},"search","orkut","ads","elements",{"name":"books","baseSpec":{"uri":"http://books.google.com/books/api.js","ssl":"https://encrypted.google.com/books/api.js","key":{"string":"key"},"version":{"string":"v"},"deferred":true,"params":{"callback":{"string":"callback"},"language":{"string":"hl"}}}},{"name":"friendconnect","baseSpec":{"uri":"http://www.google.com/friendconnect/script/friendconnect.js","ssl":null,"key":{"string":"key"},"version":{"string":"v"},"deferred":false,"params":{}}},"identitytoolkit","ima",{"name":"maps","baseSpec":{"uri":"http://maps.google.com/maps?file\u003dgoogleapi","ssl":"https://maps-api-ssl.google.com/maps?file\u003dgoogleapi","key":{"string":"key"},"version":{"string":"v"},"deferred":true,"params":{"callback":{"regex":"callback\u003d$1\u0026async\u003d2"},"language":{"string":"hl"}}},"customSpecs":[{"uri":"http://maps.googleapis.com/maps/api/js","ssl":"https://maps.googleapis.com/maps/api/js","version":{"string":"v"},"deferred":true,"params":{"callback":{"string":"callback"},"language":{"string":"hl"}},"pattern":"^(3|3..*)$"}]},"payments","wave","annotations_v2","earth","language",{"name":"annotations","baseSpec":{"uri":"http://www.google.com/reviews/scripts/annotations_bootstrap.js","ssl":null,"key":{"string":"key"},"version":{"string":"v"},"deferred":true,"params":{"callback":{"string":"callback"},"language":{"string":"hl"},"country":{"string":"gl"}}}},"picker"]});
google.loader.rfm({":search":{"versions":{":1":"1",":1.0":"1"},"path":"/api/search/1.0/cf717ce13f86fb2ebeed8f0046aba6ef/","js":"default+en.I.js","css":"default+en.css","properties":{":JSHash":"cf717ce13f86fb2ebeed8f0046aba6ef",":NoOldNames":false,":Version":"1.0"}},":language":{"versions":{":1":"1",":1.0":"1"},"path":"/api/language/1.0/f66252f80431973fa38526a329b0a47b/","js":"default+en.I.js","properties":{":JSHash":"f66252f80431973fa38526a329b0a47b",":Version":"1.0"}},":feeds":{"versions":{":1":"1",":1.0":"1"},"path":"/api/feeds/1.0/e658fb253c8b588196cf534cc43ab319/","js":"default+en.I.js","css":"default+en.css","properties":{":JSHash":"e658fb253c8b588196cf534cc43ab319",":Version":"1.0"}},":spreadsheets":{"versions":{":0":"1",":0.4":"1"},"path":"/api/spreadsheets/0.4/87ff7219e9f8a8164006cbf28d5e911a/","js":"default.I.js","properties":{":JSHash":"87ff7219e9f8a8164006cbf28d5e911a",":Version":"0.4"}},":ima":{"versions":{":3":"1",":3.0":"1"},"path":"/api/ima/3.0/28a914332232c9a8ac0ae8da68b1006e/","js":"default.I.js","properties":{":JSHash":"28a914332232c9a8ac0ae8da68b1006e",":Version":"3.0"}},":wave":{"versions":{":1":"1",":1.0":"1"},"path":"/api/wave/1.0/3b6f7573ff78da6602dda5e09c9025bf/","js":"default.I.js","properties":{":JSHash":"3b6f7573ff78da6602dda5e09c9025bf",":Version":"1.0"}},":annotations":{"versions":{":1":"1",":1.0":"1"},"path":"/api/annotations/1.0/bacce7b6155a1bbadda3c05d65391b22/","js":"default+en.I.js","properties":{":JSHash":"bacce7b6155a1bbadda3c05d65391b22",":Version":"1.0"}},":earth":{"versions":{":1":"1",":1.0":"1"},"path":"/api/earth/1.0/109c7b2bae7fe6cc34ea875176165d81/","js":"default.I.js","properties":{":JSHash":"109c7b2bae7fe6cc34ea875176165d81",":Version":"1.0"}},":picker":{"versions":{":1":"1",":1.0":"1"},"path":"/api/picker/1.0/d03c082e01cb6cbfc1021a3d173d057a/","js":"default.I.js","css":"default.css","properties":{":JSHash":"d03c082e01cb6cbfc1021a3d173d057a",":Version":"1.0"}}});
google.loader.rpl({":scriptaculous":{"versions":{":1.8.3":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"},":1.9.0":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"},":1.8.2":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"},":1.8.1":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"}},"aliases":{":1.8":"1.8.3",":1":"1.9.0",":1.9":"1.9.0"}},":yui":{"versions":{":2.6.0":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.9.0":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.7.0":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.8.0r4":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.8.2r1":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.8.1":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":3.3.0":{"uncompressed":"build/yui/yui.js","compressed":"build/yui/yui-min.js"}},"aliases":{":3":"3.3.0",":2":"2.9.0",":2.7":"2.7.0",":2.8.2":"2.8.2r1",":2.6":"2.6.0",":2.9":"2.9.0",":2.8":"2.8.2r1",":2.8.0":"2.8.0r4",":3.3":"3.3.0"}},":swfobject":{"versions":{":2.1":{"uncompressed":"swfobject_src.js","compressed":"swfobject.js"},":2.2":{"uncompressed":"swfobject_src.js","compressed":"swfobject.js"}},"aliases":{":2":"2.2"}},":webfont":{"versions":{":1.0.28":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.27":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.29":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.12":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.13":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.14":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.15":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.10":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.11":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.2":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.1":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.0":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.6":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.19":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.5":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.18":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.4":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.17":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.3":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.16":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.9":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.21":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.22":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.25":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.26":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.23":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.24":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"}},"aliases":{":1":"1.0.29",":1.0":"1.0.29"}},":ext-core":{"versions":{":3.1.0":{"uncompressed":"ext-core-debug.js","compressed":"ext-core.js"},":3.0.0":{"uncompressed":"ext-core-debug.js","compressed":"ext-core.js"}},"aliases":{":3":"3.1.0",":3.0":"3.0.0",":3.1":"3.1.0"}},":mootools":{"versions":{":1.3.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.1.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.3.0":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.3.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.1.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.3":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.4":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.5":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.4.0":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.4.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.4.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"}},"aliases":{":1":"1.1.2",":1.11":"1.1.1",":1.4":"1.4.2",":1.3":"1.3.2",":1.2":"1.2.5",":1.1":"1.1.2"}},":jqueryui":{"versions":{":1.8.0":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.2":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.1":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.15":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.14":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.13":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.12":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.11":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.10":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.17":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.16":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.6.0":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.9":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.7":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.8":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.2":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.5":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.3":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.6":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.0":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.1":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.4":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.5.3":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.5.2":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"}},"aliases":{":1.8":"1.8.17",":1.7":"1.7.3",":1.6":"1.6.0",":1":"1.8.17",":1.5":"1.5.3",":1.8.3":"1.8.4"}},":chrome-frame":{"versions":{":1.0.2":{"uncompressed":"CFInstall.js","compressed":"CFInstall.min.js"},":1.0.1":{"uncompressed":"CFInstall.js","compressed":"CFInstall.min.js"},":1.0.0":{"uncompressed":"CFInstall.js","compressed":"CFInstall.min.js"}},"aliases":{":1":"1.0.2",":1.0":"1.0.2"}},":dojo":{"versions":{":1.3.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.3.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.6.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.1.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.3.2":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.6.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.2.3":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.7.2":{"uncompressed":"dojo/dojo.js.uncompressed.js","compressed":"dojo/dojo.js"},":1.7.0":{"uncompressed":"dojo/dojo.js.uncompressed.js","compressed":"dojo/dojo.js"},":1.7.1":{"uncompressed":"dojo/dojo.js.uncompressed.js","compressed":"dojo/dojo.js"},":1.4.3":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.5.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.5.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.2.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.4.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.4.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"}},"aliases":{":1.7":"1.7.2",":1":"1.6.1",":1.6":"1.6.1",":1.5":"1.5.1",":1.4":"1.4.3",":1.3":"1.3.2",":1.2":"1.2.3",":1.1":"1.1.1"}},":prototype":{"versions":{":1.7.0.0":{"uncompressed":"prototype.js","compressed":"prototype.js"},":1.6.0.2":{"uncompressed":"prototype.js","compressed":"prototype.js"},":1.6.1.0":{"uncompressed":"prototype.js","compressed":"prototype.js"},":1.6.0.3":{"uncompressed":"prototype.js","compressed":"prototype.js"}},"aliases":{":1.7":"1.7.0.0",":1.6.1":"1.6.1.0",":1":"1.7.0.0",":1.6":"1.6.1.0",":1.7.0":"1.7.0.0",":1.6.0":"1.6.0.3"}},":jquery":{"versions":{":1.6.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.3.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.6.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.3.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.6.4":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.6.3":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.3.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.6.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.2.3":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.7.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.7.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.2.6":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.3":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.4":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.5.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.5.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.5.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"}},"aliases":{":1.7":"1.7.1",":1.6":"1.6.4",":1":"1.7.1",":1.5":"1.5.2",":1.4":"1.4.4",":1.3":"1.3.2",":1.2":"1.2.6"}}});
}


    logBoot.scriptsDone();

    Polymer.preventUpgrades = true;
  </script>
  
  
<!--
/*
 * Copyright 2012 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<!--
/**
 * @module Polymer Elements
 */
-->
<polymer-element name="g-panel-transition" assetpath="../../toolkit-ui/elements/panel-transitions/">
  <script>
    Polymer('g-panel-transition', {
      transitionClass: 'transition',
      timeout: 1000,
      //* indicates only one panel should be displayed at a time.
      highlander: true,
      setup: function(inPanels) {
        this.cancelUnbindAll();
        this.panels = inPanels;
        this.panels.getPanels().forEach(function(p, i) {
          this.setupPanel(p, i);
        }, this);
        this.finishListener = this.finish.bind(this);
      },
      teardown: function() {
        this.panels.getPanels().forEach(function(p, i) {
          this.teardownPanel(p, i);
        }, this);
        this.asyncUnbindAll();
      },
      setupPanel: function(inPanel, inIndex) {
        if (this.transitionClass) {
          inPanel.classList.add(this.transitionClass);
        }
      },
      teardownPanel: function(inPanel, inIndex) {
        inPanel.classList.remove(this.transitionClass);  
        inPanel.style.opacity = inPanel.style.webkitTransform = inPanel.style.transform = null;
        if (this.highlander) {
          this.panels.enablePanelShowing(inPanel, true);
        }
      },
      canTransition: function() {
        return true;
      },
      go: function(inFrom, inTo, inForward) {
        this.from = inFrom;
        this.to = inTo;
        this.forward = inForward;
        this._transitioning = true;
        this.setupTimeout();
        this.begin(inFrom, inTo, inForward);
      },
      finish: function() {
        if (this._transitioning) {
          this.complete(); 
          this.cancel();
          this.panels.finishTransition(this.from, this.to, this.forward);
        }
      },
      setupTimeout: function() {
        requestAnimationFrame(function() {
          this._timeout = this.asyncMethod('finishListener', null,
            this.timeout);
        }.bind(this));
      },
      cancel: function() {
        clearTimeout(this._timeout);
        this._transitioning = this._timeout = false;
      },
      stop: function() {
        this.finish();
      },
      // transitions typically override begin/complete
      begin: function() {
      },
      complete: function() {
      },
      // refresh the transition state
      refresh: function() {
      }
    });
  </script>
</polymer-element>

<polymer-element name="g-none-panel-transition" extends="g-panel-transition" assetpath="../../toolkit-ui/elements/panel-transitions/">
  <script>
    Polymer('g-none-panel-transition', {
      begin: function() {
        this.finish();
      }
    });
  </script>
</polymer-element>
<!--
/*
 * Copyright 2012 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<!--
/**
 * @module Polymer Elements
 */
-->
<polymer-element name="g-keyframe-panel-transition" extends="g-panel-transition" assetpath="../../toolkit-ui/elements/panel-transitions/">
  <script>
    (function() {
      var END_EVENT = 'animationEnd';
      var WEBKIT_END_EVENT = 'webkitAnimationEnd';
      
      Polymer('g-keyframe-panel-transition', {
        transitionClass: 'animate',
        setup: function(inPanels) {
          this.super(arguments);
          this.panels.addEventListener(END_EVENT, this.finishListener);
          this.panels.addEventListener(WEBKIT_END_EVENT, this.finishListener);
        },
        teardown: function() {
          this.super(arguments);
          this.panels.removeEventListener(END_EVENT, this.finishListener);
          this.panels.removeEventListener(WEBKIT_END_EVENT, this.finishListener);
        },
        begin: function() {
          this.from.classList.add(this.forward ? 'panels-ascending-from' :
              'panels-descending-from');
          this.to.classList.add(this.forward ? 'panels-ascending-to' :
              'panels-descending-to');
        },
        complete: function() {
          this.from.classList.remove('panels-ascending-from', 
              'panels-descending-from');
          this.to.classList.remove('panels-ascending-to', 
              'panels-descending-to');
        }
      });
    })();
  </script>
</polymer-element>


<!--
/*
 * Copyright 2012 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<!--
/**
 * @module Polymer Elements
 */
-->
<polymer-element name="g-flow-panel-transition" extends="g-panel-transition" assetpath="../../toolkit-ui/elements/panel-transitions/">
  <template>
    <style scoped id="flowsheet">
      g-panels[transition='flow'] > .right {
        left: auto;
        right: 0;
      }
      
      g-panels[transition='flow'] > .narrow-layout {
        width: 100%;
        box-shadow: none;
      }
      
      g-panels[transition='flow'] > .narrow-layout.custom-panel {
        width: auto;
      }
    </style>
  </template>
  <script>
    (function() {
      var WEBKIT_END_EVENT = 'webkitTransitionEnd';
      var END_EVENT = 'transitionEnd';
      
      Polymer('g-flow-panel-transition', {
        highlander: false,
        narrowMedia: '(max-width: 800px)',
        setup: function() {
          this.super(arguments);
          this.listenForMediaMatch();
          // TODO(sorvell): redo when reference combinators arrive
          //this.panels.appendChild(this.$.flowsheet);
  
          this.boundResizeHandler = this.resizeHandler.bind(this);
          window.addEventListener('resize', this.boundResizeHandler);
          this.panels.addEventListener(END_EVENT, this.finishListener);
          this.panels.addEventListener(WEBKIT_END_EVENT, this.finishListener);
        },
        teardown: function() {
          window.removeEventListener('resize', this.boundResizeHandler);
          // TODO(sorvell): how do we remove a node from lightDOM?
          // Need a ref to the node in lightDOM; workaround until fixed.
          var sheet = this.panels.querySelector(this.$.flowsheet.id);
          if (sheet) {
            this.panels.removeChild(sheet);
          }
          this.super();
          this.panels.removeEventListener(END_EVENT, this.finishListener);
          this.panels.removeEventListener(WEBKIT_END_EVENT, this.finishListener);
        },
        listenForMediaMatch: function() {
          var mq = window.matchMedia(this.narrowMedia);
          mq.addListener(this.layoutChange.bind(this));
          this.layoutChange(mq);
        },
        layoutChange: function(inQuery) {
          this.narrowLayout = inQuery.matches;
          this.panels.getPanels().forEach(function(p) {
            p.classList.toggle('narrow-layout', this.narrowLayout);
          }, this);
          this.refresh();
        },
        enableTransitions: function(inEnable) {
          this.panels.getPanels().forEach(function(p) {
            p.style.webkitTransition = p.style.transition = inEnable ? null : 'none';
          });
        },
        resizeHandler: function(e) {
          if (this.narrowLayout && !this.resizing) {
            this.resizing = this.asyncMethod('resize', null, 50);
          }
        },
        resize: function() {
          clearTimeout(this.resizing);
          this.resizing = null;
          this.refresh();
        },
        refresh: function() {
          this.enableTransitions(false);
          this.to = this.panels.getSelectedPanel();
          if (this.canTransition()) {
            this.begin();
          }
          requestAnimationFrame(function() {
            this.enableTransitions(true);
          }.bind(this));
        },
        begin: function() {
          var i = this.panels.indexOf(this.to);
          if (this.panelIsRightAligned(this.to)) {
            this.applyRightLayout(this.to, i);
          } else {
            this.applyLeftLayout(this.to, i);
          }
        },
        // inIndex appears at the left with subsequent nodes
        // moved out of the way to the right; right aligned nodes are ignored
        applyLeftLayout: function(inTo, inIndex) {
          if (!inTo) {
            return;
          }
          var l, count = this.count;
          this.panels.getPanels().forEach(function(p, i) {
            var x = !l ? 0 : l.offsetWidth + 'px';
            var right = this.panelIsRightAligned(p);
            p.style.zIndex = right ? -i : null;
            p.style.webkitTransform = p.style.transform = 'translate3d(' + (right ? 0 : x) + ',0,0)';
            if (i >= inIndex) {
              l = p;
            }
          }, this);
        },
        // inIndex appears at the right with previous nodes
        // moved out of the way to the left; note z-index used to get proper stacking
        applyRightLayout: function(inTo, inIndex) {
          var p$ = this.panels.getPanels(), right=true, l;
          for (var i=p$.length-1, p; p=p$[i]; i--) {
            var x = l ? -l.offsetWidth : 0;
            p.style.zIndex = right ? p$.length - i : null;
            p.style.webkitTransform = p.style.transform = 'translate3d(' + x + 'px,0,0)';
            if (i <= inIndex) {
              l = p;
            }
            // record where we stop being right aligned so we can stop z-stacking
            right = right && this.panelIsRightAligned(p);
          }
        },
        // TODO(sorvell): it's unsatisfying that we need a specific class to 
        // determine right alignment because this defeats applying rightness via
        // selectors (e.g. :last-child or media queries). We could look for 
        // computed style right == 0 but this seems more brittle.
        panelIsRightAligned: function(inNode) {
          return !this.panels.narrowLayout && inNode &&
              inNode.classList.contains('right');
        }
      });
    })();
  </script>
</polymer-element>


<!--
Copyright 2012 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
 /**
  * g-panels is used to display a list of elements that can be selected.
  * The attribute "selected" indicates which element is being selected.
  * Typically only the selected element is displayed. By default, elements
  * inside g-panels fit to its size.
  *
  * When the selected panel changes, a transition occurs between the current
  * and new selection. The transition property specifies an element that
  * manages the selected transition. The 'keyframe' transition uses css
  * animations to manage trasnitions. A number of different classes can be
  * applied to g-panels to customize the css animations used for a keyframe
  * transition:
  *
  * * g-panels-hslide, g-panels-vslide
  * * g-panels-hslideover, g-panels-vslideover
  * * g-panels-explode
  * * g-panels-scale-slide
  * * g-panels-fly-up-right
  *
  * The 'flow' transition moves horizontally to reveal content.
  *
  * Example:
  *
  *     <g-panels selected="bar" transition="keyframe" class="g-panels-explode">
  *       <section name="foo">Panel 1</section>
  *       <section name="bar">Panel 2</section>
  *       <section name="baz">Panel 3</section>
  *    </g-panels>
  *
  * @class g-panels
  */
 /**
  * Fired when an element is selected via tap.
  *
  * @event g-panels-select
  * @param {Object} inDetail
  *   @param {Object} inDetail.selected the selected element
  *   @param {Object} inDetail.index the index in the list of elements
  */
 /**
  * Fired when an element is about to be selected. Call the preventSelect
  * to prevent the selection.
  * @event g-panels-canSelect
  * @param {Object} inDetail
  *   @param {Object} inDetail.selected the selected element
  *   @param {Object} inDetail.item the selected element
  *   @param {Function} inDetail.preventSelect call to prevent selection
  */
  -->



<polymer-element name="g-panels" attributes="transition selected index autoselect" on-keydown="keydownHandler" assetpath="../../toolkit-ui/elements/">
<!-- chrome 30 needs g-panels-transitions.css in controller, not global scope -->
<template>
  <style>/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
@host {
  * {
    display: block;
    position: relative;
    outline: none;
    overflow: hidden;
  }
}

/* TODO(sorvell): need to style only distributed children.
  (*) styles children and all descendants.
  Filed related issue
  https://www.w3.org/Bugs/Public/show_bug.cgi?id=21389
*/

/*
content::-webkit-distributed(*) {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-transform: translateZ(0);
}

content::-webkit-distributed(g-panels), g-panels > g-panels {
  position: absolute;
}

content::-webkit-distributed(.transition), g-panels > .transition {
  -webkit-transition: all 0.218s ease-in-out;
}

content::-webkit-distributed(.animate), g-panels > .animate {
  -webkit-animation-duration: 0.218s;
  -webkit-animation-fill-mode: both;
}
*/</style>
  <style polymer-scope="global">/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
@-webkit-keyframes g-panels-fadeOut {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@keyframes g-panels-fadeOut {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@-webkit-keyframes g-panels-fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes g-panels-fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@-webkit-keyframes g-panels-fadeInPartial {
  0% {
    opacity: 0.25;
  }
  100% {
    opacity: 1;
  }
}

@keyframes g-panels-fadeInPartial {
  0% {
    opacity: 0.25;
  }
  100% {
    opacity: 1;
  }
}

@-webkit-keyframes g-panels-fadeOutPartial {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0.25;
  }
}

@keyframes g-panels-fadeOutPartial {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0.25;
  }
}

@-webkit-keyframes g-panels-fadeScaleIn {
  0% {
    z-index: 0;
    opacity: 0.5;
    -webkit-transform: scale(0.9) translateZ(0);
  }
  20% {
    z-index: 0;
    -webkit-transform: scale(0.9) translateZ(0);
  }
  100% {
    z-index: 0;
    opacity: 1;
    -webkit-transform: scale(1) translateZ(0);
  }
}

@keyframes g-panels-fadeScaleIn {
  0% {
    z-index: 0;
    opacity: 0.5;
    transform: scale(0.9) translateZ(0);
  }
  20% {
    z-index: 0;
    transform: scale(0.9) translateZ(0);
  }
  100% {
    z-index: 0;
    opacity: 1;
    transform: scale(1) translateZ(0);
  }
}

@-webkit-keyframes g-panels-fadeScaleOut {
  0% {
    z-index: 0;
    opacity: 1;
    -webkit-transform: scale(1) translateZ(0);
  }
  20% {
    z-index: 0;
    -webkit-transform: scale(0.9) translateZ(0);
  }
  100% {
    z-index: 0;
    opacity: 0.5;
    -webkit-transform: scale(0.9) translateZ(0);
  }
}

@keyframes g-panels-fadeScaleOut {
  0% {
    z-index: 0;
    opacity: 1;
    transform: scale(1) translateZ(0);
  }
  20% {
    z-index: 0;
    transform: scale(0.9) translateZ(0);
  }
  100% {
    z-index: 0;
    opacity: 0.5;
    transform: scale(0.9) translateZ(0);
  }
}

@-webkit-keyframes g-panels-slideRight {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(100%, 0, 0);
  }
}

@keyframes g-panels-slideRight {
  0% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(100%, 0, 0);
  }
}

@-webkit-keyframes g-panels-slideFromRight {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(100%, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@keyframes g-panels-slideFromRight {
  0% {
    z-index: 1;
    transform: translate3d(100%, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes g-panels-slideLeft {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(-100%, 0, 0);
  }
}

@keyframes g-panels-slideLeft {
  0% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(-100%, 0, 0);
  }
}

@-webkit-keyframes g-panels-slideFromLeft {
  0% {
    z-index: 1;  
    -webkit-transform: translate3d(-100%, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@keyframes g-panels-slideFromLeft {
  0% {
    z-index: 1;  
    transform: translate3d(-100%, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes g-panels-slideBottom {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, 100%, 0);
  }
}

@keyframes g-panels-slideBottom {
  0% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, 100%, 0);
  }
}

@-webkit-keyframes g-panels-slideFromBottom {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, 100%, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@keyframes g-panels-slideFromBottom {
  0% {
    z-index: 1;
    transform: translate3d(0, 100%, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes g-panels-slideTop {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, -100%, 0);
  }
}

@keyframes g-panels-slideTop {
  0% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, -100%, 0);
  }
}

@-webkit-keyframes g-panels-slideFromTop {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, -100%, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@keyframes g-panels-slideFromTop {
  0% {
    z-index: 1;
    transform: translate3d(0, -100%, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes g-panels-explodeOut {
  0% {
    -webkit-transform: scale(1) translateZ(0);
    opacity: 1;
  }
  100% {
    -webkit-transform: scale(0) translateZ(0);
    opacity: 0;
  }
}

@keyframes g-panels-explodeOut {
  0% {
    transform: scale(1) translateZ(0);
    opacity: 1;
  }
  100% {
    transform: scale(0) translateZ(0);
    opacity: 0;
  }
}

@-webkit-keyframes g-panels-explodeIn {
  0% {
    z-index: 1;
    -webkit-transform: scale(0) translateZ(0);
    opacity: 0;
  }
  100% {
    z-index: 1;
    -webkit-transform: scale(1) translateZ(0);
    opacity: 1;
  }
}

@keyframes g-panels-explodeIn {
  0% {
    z-index: 1;
    transform: scale(0) translateZ(0);
    opacity: 0;
  }
  100% {
    z-index: 1;
    transform: scale(1) translateZ(0);
    opacity: 1;
  }
}

@-webkit-keyframes g-panels-flyOutRight {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0,0,0) rotate(0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(10%, -110%, 0) rotate(5deg);
  }
}

@keyframes g-panels-flyOutRight {
  0% {
    z-index: 1;
    transform: translate3d(0,0,0) rotate(0);
  }
  100% {
    z-index: 1;
    transform: translate3d(10%, -110%, 0) rotate(5deg);
  }
}

@-webkit-keyframes g-panels-flyInLeft {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(10%, -110%, 0) rotate(5deg);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0,0,0) rotate(0deg);
  }
}

@keyframes g-panels-flyInLeft {
  0% {
    z-index: 1;
    transform: translate3d(10%, -110%, 0) rotate(5deg);
  }
  100% {
    z-index: 1;
    transform: translate3d(0,0,0) rotate(0deg);
  }
}</style>
  <style polymer-scope="controller">/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
@-webkit-keyframes g-panels-fadeOut {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@keyframes g-panels-fadeOut {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@-webkit-keyframes g-panels-fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes g-panels-fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@-webkit-keyframes g-panels-fadeInPartial {
  0% {
    opacity: 0.25;
  }
  100% {
    opacity: 1;
  }
}

@keyframes g-panels-fadeInPartial {
  0% {
    opacity: 0.25;
  }
  100% {
    opacity: 1;
  }
}

@-webkit-keyframes g-panels-fadeOutPartial {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0.25;
  }
}

@keyframes g-panels-fadeOutPartial {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0.25;
  }
}

@-webkit-keyframes g-panels-fadeScaleIn {
  0% {
    z-index: 0;
    opacity: 0.5;
    -webkit-transform: scale(0.9) translateZ(0);
  }
  20% {
    z-index: 0;
    -webkit-transform: scale(0.9) translateZ(0);
  }
  100% {
    z-index: 0;
    opacity: 1;
    -webkit-transform: scale(1) translateZ(0);
  }
}

@keyframes g-panels-fadeScaleIn {
  0% {
    z-index: 0;
    opacity: 0.5;
    transform: scale(0.9) translateZ(0);
  }
  20% {
    z-index: 0;
    transform: scale(0.9) translateZ(0);
  }
  100% {
    z-index: 0;
    opacity: 1;
    transform: scale(1) translateZ(0);
  }
}

@-webkit-keyframes g-panels-fadeScaleOut {
  0% {
    z-index: 0;
    opacity: 1;
    -webkit-transform: scale(1) translateZ(0);
  }
  20% {
    z-index: 0;
    -webkit-transform: scale(0.9) translateZ(0);
  }
  100% {
    z-index: 0;
    opacity: 0.5;
    -webkit-transform: scale(0.9) translateZ(0);
  }
}

@keyframes g-panels-fadeScaleOut {
  0% {
    z-index: 0;
    opacity: 1;
    transform: scale(1) translateZ(0);
  }
  20% {
    z-index: 0;
    transform: scale(0.9) translateZ(0);
  }
  100% {
    z-index: 0;
    opacity: 0.5;
    transform: scale(0.9) translateZ(0);
  }
}

@-webkit-keyframes g-panels-slideRight {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(100%, 0, 0);
  }
}

@keyframes g-panels-slideRight {
  0% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(100%, 0, 0);
  }
}

@-webkit-keyframes g-panels-slideFromRight {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(100%, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@keyframes g-panels-slideFromRight {
  0% {
    z-index: 1;
    transform: translate3d(100%, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes g-panels-slideLeft {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(-100%, 0, 0);
  }
}

@keyframes g-panels-slideLeft {
  0% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(-100%, 0, 0);
  }
}

@-webkit-keyframes g-panels-slideFromLeft {
  0% {
    z-index: 1;  
    -webkit-transform: translate3d(-100%, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@keyframes g-panels-slideFromLeft {
  0% {
    z-index: 1;  
    transform: translate3d(-100%, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes g-panels-slideBottom {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, 100%, 0);
  }
}

@keyframes g-panels-slideBottom {
  0% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, 100%, 0);
  }
}

@-webkit-keyframes g-panels-slideFromBottom {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, 100%, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@keyframes g-panels-slideFromBottom {
  0% {
    z-index: 1;
    transform: translate3d(0, 100%, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes g-panels-slideTop {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, -100%, 0);
  }
}

@keyframes g-panels-slideTop {
  0% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, -100%, 0);
  }
}

@-webkit-keyframes g-panels-slideFromTop {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0, -100%, 0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@keyframes g-panels-slideFromTop {
  0% {
    z-index: 1;
    transform: translate3d(0, -100%, 0);
  }
  100% {
    z-index: 1;
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes g-panels-explodeOut {
  0% {
    -webkit-transform: scale(1) translateZ(0);
    opacity: 1;
  }
  100% {
    -webkit-transform: scale(0) translateZ(0);
    opacity: 0;
  }
}

@keyframes g-panels-explodeOut {
  0% {
    transform: scale(1) translateZ(0);
    opacity: 1;
  }
  100% {
    transform: scale(0) translateZ(0);
    opacity: 0;
  }
}

@-webkit-keyframes g-panels-explodeIn {
  0% {
    z-index: 1;
    -webkit-transform: scale(0) translateZ(0);
    opacity: 0;
  }
  100% {
    z-index: 1;
    -webkit-transform: scale(1) translateZ(0);
    opacity: 1;
  }
}

@keyframes g-panels-explodeIn {
  0% {
    z-index: 1;
    transform: scale(0) translateZ(0);
    opacity: 0;
  }
  100% {
    z-index: 1;
    transform: scale(1) translateZ(0);
    opacity: 1;
  }
}

@-webkit-keyframes g-panels-flyOutRight {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(0,0,0) rotate(0);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(10%, -110%, 0) rotate(5deg);
  }
}

@keyframes g-panels-flyOutRight {
  0% {
    z-index: 1;
    transform: translate3d(0,0,0) rotate(0);
  }
  100% {
    z-index: 1;
    transform: translate3d(10%, -110%, 0) rotate(5deg);
  }
}

@-webkit-keyframes g-panels-flyInLeft {
  0% {
    z-index: 1;
    -webkit-transform: translate3d(10%, -110%, 0) rotate(5deg);
  }
  100% {
    z-index: 1;
    -webkit-transform: translate3d(0,0,0) rotate(0deg);
  }
}

@keyframes g-panels-flyInLeft {
  0% {
    z-index: 1;
    transform: translate3d(10%, -110%, 0) rotate(5deg);
  }
  100% {
    z-index: 1;
    transform: translate3d(0,0,0) rotate(0deg);
  }
}</style>
  <style polymer-scope="controller">/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
 
/* Styling to apply to component children based on conditional
host styling. This should be removed when the ::shadow pseudo 
selector is available. */
/*
  TODO(sorvell): include a reasonable set of default panel
  animations.
*/
/*
TODO(sorvell): remove when this issue is addressed:
  https://www.w3.org/Bugs/Public/show_bug.cgi?id=21389

*/
g-panels > * {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

g-panels > g-panels {
  position: absolute;
}

g-panels > .transition {
  -webkit-transition: all 0.218s ease-in-out;
  transition: all 0.218s ease-in-out;
}

g-panels > .animate {
  -webkit-animation-duration: 0.218s;
  -webkit-animation-fill-mode: both;
  animation-duration: 0.218s;
  animation-fill-mode: both;
}

/* fade */
g-panels > .panels-ascending-from, g-panels > .panels-descending-from {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-fadeOut;
  animation: 0.218s both;
  animation-name: g-panels-fadeOut;
}
g-panels > .panels-ascending-to, g-panels > .panels-descending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-fadeIn;
  animation: 0.218s both;
  animation-name: g-panels-fadeIn;
}

/*
TODO(sorvell): remove host conditional styling when this issue is addressed:
  https://www.w3.org/Bugs/Public/show_bug.cgi?id=21390
*/
g-panels-hslide > .panels-ascending-from {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideLeft;
  animation: 0.218s both;
  animation-name: g-panels-slideLeft;
}
.g-panels-hslide > .panels-ascending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideFromRight;
  animation: 0.218s both;
  animation-name: g-panels-slideFromRight;
}
.g-panels-hslide > .panels-descending-from {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideRight;
  animation: 0.218s both;
  animation-name: g-panels-slideRight;
}
.g-panels-hslide > .panels-descending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideFromLeft;
  animation: 0.218s both;
  animation-name: g-panels-slideFromLeft;
}

/* vslide */
.g-panels-vslide > .panels-ascending-from {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideTop;
  animation: 0.218s both;
  animation-name: g-panels-slideTop;
}
.g-panels-vslide > .panels-ascending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideFromBottom;
  animation: 0.218s both;
  animation-name: g-panels-slideFromBottom;
}
.g-panels-vslide > .panels-descending-from {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideBottom;
  animation: 0.218s both;
  animation-name: g-panels-slideBottom;
}
.g-panels-vslide > .panels-descending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideFromTop;
  animation: 0.218s both;
  animation-name: g-panels-slideFromTop;
}

/* hslideover */
.g-panels-hslideover > .panels-ascending-from,
.g-panels-hslideover > .panels-descending-from {
  -webkit-animation-name: none;
  animation-name: none;
}
.g-panels-hslideover > .panels-ascending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideFromRight;
  animation: 0.218s both;
  animation-name: g-panels-slideFromRight;
}
.g-panels-hslideover > .panels-descending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideFromLeft;
  animation: 0.218s both;
  animation-name: g-panels-slideFromLeft;
}

/* vslideover */
.g-panels-vslideover > .panels-ascending-from,
.g-panels-vslideover > .panels-descending-from {
  -webkit-animation-name: none;
  animation-name: none;
}
.g-panels-vslideover > .panels-ascending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideFromBottom;
  animation: 0.218s both;
  animation-name: g-panels-slideFromBottom;
}
.g-panels-vslideover > .panels-descending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideFromTop;
  animation: 0.218s both;
  animation-name: g-panels-slideFromTop;
}

/* explode */
.g-panels-explode > .panels-ascending-from,
.g-panels-explode > .panels-descending-from {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-explodeOut;
  animation: 0.218s both;
  animation-name: g-panels-explodeOut;
}
.g-panels-explode > .panels-ascending-to,
.g-panels-explode > .panels-descending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-explodeIn;
  animation: 0.218s both;
  animation-name: g-panels-explodeIn;
}

/* scale-slide */
.g-panels-scale-slide > .panels-ascending-from {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-fadeScaleOut;
  animation: 0.218s both;
  animation-name: g-panels-fadeScaleOut;
}
.g-panels-scale-slide > .panels-ascending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideFromRight;
  animation: 0.218s both;
  animation-name: g-panels-slideFromRight;
}
.g-panels-scale-slide > .panels-descending-from {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-slideRight;
  animation: 0.218s both;
  animation-name: g-panels-slideRight;
}
.g-panels-scale-slide > .panels-descending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-fadeScaleIn;
  animation: 0.218s both;
  animation-name: g-panels-fadeScaleIn;
}

/* fly-up-right */
.g-panels-fly-up-right > .panels-ascending-from {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-flyOutRight;
  animation: 0.218s both;
  animation-name: g-panels-flyOutRight;
}
.g-panels-fly-up-right > .panels-ascending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-fadeInPartial;
  animation: 0.218s both;
  animation-name: g-panels-fadeInPartial;
}
.g-panels-fly-up-right > .panels-descending-from {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-fadeOutPartial;
  animation: 0.218s both;
  animation-name: g-panels-fadeOutPartial;
}
.g-panels-fly-up-right > .panels-descending-to {
  -webkit-animation: 0.218s both;
  -webkit-animation-name: g-panels-flyInLeft;
  animation: 0.218s both;
  animation-name: g-panels-flyInLeft;
}</style>
  <content id="content" select="*"></content>
</template>
<script>
  (function() {
    // TODO(sorvell): promote this and figure out canonical way to do this;
    // and support contenteditable.
    var documentIsEditing = function() {
      var a = document.activeElement;
      if (a.tagName == "INPUT" || a.tagName == "SELECT" || a.tagName == "TEXTAREA") {
        return true;
      }
    }
    
    // TODO(sorvell): need key table
    var RIGHT_ARROW_KEY = 39;
    var LEFT_ARROW_KEY = 37;
    
    var element = this;
    
    Polymer('g-panels', {
      /**
       * The type of transition g-panels should use to change between selected
       * panels. The transition property corresponds to an element that is used
       * to manage panel transitions. If it's not a custom element name,
       * transition is converted into g-<transition>-panel-transition.
       *
       * @attribute transition
       * @type string
       * @default keyframe
       *
  
       */
      transition: 'keyframe',
      /**
       * The selected panel to select. Panels are identify by either their name
       * or id attributes. If this value is unset, then when g-panels is created
       * its first panel will be selected.
       *
       * @attribute selected
       * @type string
       * @default null
       */
      selected: null,
      index: -1,
      autoSelect: false,
      defaultTransition: 'keyframe',
      _canTransition: false,
      created: function() {
        if (!this.hasAttribute('tabindex')) {
          this.tabIndex = -1;
        }
      },
      enteredDocument: function() {
        this.installControllerStyles(this, element);
        this.initPanels();
        this.enableTransitions(false);
        if (this.index === -1 && this.selected === null) {
          this.indexChanged();
        }
        this.enableTransitions(true);
        this.observeChildren();
      },
      initPanels: function() {
        this.getPanels().forEach(function(p, i) {
          this.initPanel(p, i);
        }, this);
      },
      observeChildren: function() {
        this.boundHandleMutations = this.handleMutations.bind(this);
        this.childrenObserver = new MutationObserver(this.boundHandleMutations);
        this.childrenObserver.observe(this, {childList: true});
      },
      handleMutations: function(mutations) {
        Array.prototype.forEach.call(mutations, function(m) {
          if (m.removedNodes) {
            this.nodesRemoved(m.removedNodes);
          }
          if (m.addedNodes) {
            this.nodesAdded(m.addedNodes);
          }
        }, this);
      },
      flushChildrenMutations: function() {
        this.boundHandleMutations(this.childrenObserver.takeRecords());
      },
  
      /**
       * Extendors can implement initPanel to initialize the panels in a g-panels.
       * @method initPanel
       * @param inPanel The panel to initialize.
       * @param inIndex The index of the panel.
       */
      initPanel: function(inPanel, inIndex) {
        this.ensureTransition();
        this.transitionNode.setupPanel(inPanel, inIndex);
      },
      teardownPanel: function(inPanel) {
        this.ensureTransition();
        this.transitionNode.teardownPanel(inPanel);
      },
      indexChanged: function(inOldValue) {
        var i = this.clampIndex(this.index);
        if (!this.canSelect(i)) {
          this.index = inOldValue;
          //console.log('cannot select')
          return;
        }
        if (i != this.index) {
          this.index = i;
        }
        if (this.index != this.lastIndex) {
          var fromPanel = this.panelAtIndex(this.lastIndex),
              toPanel = this.panelAtIndex(this.index),
              forward = Boolean(this.index > this.lastIndex);
          this.ensureTransition();
          if (this.canTransition(fromPanel, toPanel, forward)) {
            this.beginTransition(fromPanel, toPanel, forward);
          } else {
            this.finishTransition(fromPanel, toPanel, forward);
          }
          this.lastIndex = this.index;
          this.selected = this.getSelectedValue();
        }
      },
      ensureTransition: function() {
        if (!this.transitionNode) {
          this.transitionChanged();
        }
      },
      canSelect: function(inIndex) {
        var canSelect = true;
        // TODO(sorvell): Platform.flush(); before we sent the canSelect event since
        // it's likely that the decision needs to rely on binding state.
        // consider doing this in g-component.send.
        Platform.flush();
        this.fire('g-panels-canselect', {
          index: inIndex, 
          selected: this.selectedValueForIndex(inIndex),
          preventSelect: function() {
            canSelect = false;
          }
        });
        return canSelect;
      },
      clampIndex: function(inIndex) {
        var i = isNaN(inIndex) ? 0 : inIndex;
        return Math.max(0, Math.min(this.count-1, i));
      },
      getSelectedValue: function() {
        var selected = this.getSelectedPanel();
        return this.selectedValueForPanel(selected);
      },
      selectedValueForPanel: function(inPanel) {
        var name = inPanel && (inPanel.getAttribute('id') ||
            inPanel.getAttribute('name'));
        return name || ('' + this.indexOf(inPanel));
      },
      selectedValueForIndex: function(inIndex) {
        var panel = this.panelAtIndex(inIndex);
        return this.selectedValueForPanel(panel);
      },
      // selected is the name property of the panel to select
      selectedChanged: function(inOldValue) {
        var index = this.indexOfPropValue('id', this.selected);
        index = index >= 0 ? index : this.indexOfPropValue('name', this.selected);
        index = index >= 0 ? index : Number(this.selected);
        if (index >= 0) {
          this.index = index;
        }
      },
      transitionChanged: function(inOldValue) {
        var userTransition = this.findTransitionNode();
        if (userTransition) {
          this.transitionNode = userTransition;
        } else {
          if (this.transitionNode) {
            if (this.transitionNode.localName == 
                this.tagNameForTransition(this.transition)) {
              return;
            }
            this.transitionNode.teardown();
          }
          this.transitionNode = this.makeTransitionNode(this.transition);
          //this.setAttribute('transition', this.transition);
        }
        this.transitionNode.setup(this);
        this.refresh();
      },
      findTransitionNode: function() {
        if (!this.$.content) {
          return;
        }
        var n$ = this.$.content.getDistributedNodes();
        for (var i=0, n; n=n$[i]; i++) {
          if (this.isTransitionNode(n)) {
            return n;
          }
        };
      },
      isTransitionNode: function(inNode) {
        return inNode && (inNode.nodeType == Node.ELEMENT_NODE) &&
          inNode.localName.match(/^g-.*panel-transition$/);
      },
      makeTransitionNode: function(inName) {
        var name = this.tagNameForTransition(inName);
        var transition = document.createElement(name);
        return transition.setup ? transition :
            this.makeTransitionNode(this.defaultTransition);
      },
      tagNameForTransition: function(inName) {
        return 'g-' + inName + (inName ? '-' : '') + 'panel-transition';
      },
      indexOfPropValue: function(inProp, inValue) {
        var c$ = this.getPanels();
        for (var i=0, c; c=c$[i]; i++) {
          if (c.getAttribute(inProp) == inValue) {
            return i;
          }
        }
        return -1;
      },
      panelAtName: function(inName) {
        return this.panelAtIndex(this.indexOfName(inName));
      },
      canTransition: function(inFrom, inTo, inForward) {
        return this._canTransition && Boolean(this.transitionNode && inFrom && inTo &&
            this.transitionNode.canTransition(inFrom, inTo, inForward));
      },
      beginTransition: function(inFrom, inTo, inForward) {
        if (this.transitionNode) {
          this.transitionNode.stop();
        }
        //console.time('transition: ' + this.transition + ', ' + this.className);
        requestAnimationFrame(function() {
          this.enablePanelShowing(inFrom, true);
          this.enablePanelShowing(inTo, true);
          if (this.showByZ) {
            this.applyZ(inFrom, this.topZ);
            this.applyZ(inTo, this.topZ - 1);
          }
          this.transitionNode.go(inFrom, inTo, inForward);
        }.bind(this));
      },
      finishTransition: function(inFrom, inTo, inForward) {
        if (!this.canTransition(inFrom, inTo, inForward)) {
          this.transitionNode.refresh();
        }
        this.ensureSelectedShowing();
        //console.timeEnd('transition: ' + this.transition + ', ' + this.className);
        this.asyncFire('g-panels-select', {selected: this.selected, index: this.index});
      },
      keydownHandler: function(e) {
        if (this.autoselect && !documentIsEditing()) {
          var oldIndex = this.index;
          if (e.keyCode == RIGHT_ARROW_KEY) {
            this.next();
          } else if (e.keyCode == LEFT_ARROW_KEY) {
            this.previous();
          }
          // TODO(sorvell): Platform.flush() so we know syncronously if index changed.
          Platform.flush();
          if (this.index != oldIndex) {
            e.cancelBubble = true;
            this.focus();
          }
        }
      },
      refresh: function() {
        if (this._canTransition && this.transitionNode && 
            this.transitionNode.canTransition()) {
          this.transitionNode.refresh();
          this.ensureSelectedShowing();
        }
      },
      ensureSelectedShowing: function() {
        if (this.transitionNode.highlander) {
          this.getPanels().forEach(function(p, i) {
            if (this.showByZ) {
              this.applyZ(p, i == this.index ? this.topZ : 0);
            } else {
              this.enablePanelShowing(p, i == this.index);
            }
          }, this);
        }
      },
      // TODO(sorvell): this is an experimental mode where panels are 
      // shown by altering z-index... will probably either be removed
      // or used exclusively.
      showByZ: false,
      topZ: 2,
      applyZ: function(inNode, inZ) {
        inNode.style.zIndex = inZ;
      },
      enableTransitions: function(inEnable) {
        return this._canTransition = inEnable;
      },
      // note: cannot use hidden attr for this since it's trumped by display
      // setting e.g. hidden + display: -webkit-flex == showing.
      enablePanelShowing: function(inPanel, inEnable) {
        if (inPanel) {
          inPanel.style.display = inEnable ? null : 'none';
        }
      },
      /**
       *
       * Get the panel elements inside the g-panels.
       *
       * @method getPanels
       * @returns {Array}
       */
      getPanels: function() {
        var n$ = this.$.content ? this.$.content.getDistributedNodes() : [];
        return Array.prototype.filter.call(n$, this.nodeIsPanel, this);
      },
      nodeIsPanel: function(node) {
        var excluded = ['style', 'template'];
        return (node.nodeType == Node.ELEMENT_NODE) && 
          (excluded.indexOf(node.localName) < 0) && 
          !this.isTransitionNode(node);
      },
      /**
       * The number of panel elements inside the g-panels
       *
       * @attribute count
       * @returns {Number}
       */
      get count() {
        return this.getPanels().length;
      },
      /**
       * Returns the currently selected panel
       * @method getSelectedPanel
       * @returns {Object}
       */
      getSelectedPanel: function() {
        return this.getPanels()[this.index];
      },
      /**
       *  Returns the index of given panel element.
       *
       * @method indexOf
       * @param inPanel
       * @returns {Number}
       */
      indexOf: function(inPanel) {
        return this.getPanels().indexOf(inPanel);
      },
      /**
       * Returns the panel element at the given index in the list of panels
       *
       * @method panelAtIndex
       * @param inIndex
       * @returns {Object}
       */
      panelAtIndex: function(inIndex) {
        return this.getPanels()[inIndex];
      },
      /**
       * Selects the next panel in the list of panel elements.
       *
       * @method next
       */
      next: function() {
        this.index++;
      },
      /**
       * Selects the previous panel in the list of panel elements.
       *
       * @method previous
       */
      previous: function() {
        this.index--;
      },
      /**
       * Toggles the selected panel between two values
       *
       * @method toggleBetween
       * @param inA
       * @param inB
       */
      toggleBetween: function(inA, inB) {
        this.selected = this.selected == inA ? inB : inA;
      },
      // deprecrated
      panelAdded: function(inPanel) {
        this.flushChildrenMutations();
      },
      nodesAdded: function(nodes) {
        var panels = this.getPanels();
        this.ensureTransition();
        Array.prototype.forEach.call(nodes, function(node) {
          var i = panels.indexOf(node);
          if (i >= 0) {
            this.initPanel(node, i);
          }
        }, this);
        this.refresh();
      },
      nodesRemoved: function(nodes) {
        Array.prototype.forEach.call(nodes, function(node) {
          if (this.nodeIsPanel(node)) {
            this.teardownPanel(node);
          }
        }, this);
      }
    });
  })();
</script>
</polymer-element>
<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
* Polymer Elements
* @module Polymer Elements
* @main Polymer Elements
*/  
/**
 * g-icon is a 24x24 glyph expressed as a background-image.
 *
 * Example:
 *
 *     <g-icon src="star.png"></g-icon>
 *
 * Optionally can use other size like 32x32 by setting the attribute "size" to "32":
 *
 *     <g-icon src="big_star.png" size="32"></g-icon>
 *
 * @class g-icon
 */
-->
<polymer-element name="g-icon" attributes="src size" assetpath="../../toolkit-ui/elements/">
  <template>
    <style>
      @host {
        * {
          display: inline-block;
          vertical-align: middle;
        }
      }

      #icon {
        width: 24px;
        height: 24px;
        cursor: pointer;
        background-repeat: no-repeat;
        background-position: center;
        background-size: 100% 100%;
      }
    </style>
    <div id="icon" style="background-image:url({{src}}); width:{{size}}px; height:{{size}}px"></div>
  </template>
  <script>
    Polymer('g-icon', {
      /**
       * The URL of an image for the icon.
       *
       * @attribute src
       * @type string
       * @default ''
       */
      src: '',
      /**
       * Specifies the size of the icon.
       *
       * @attribute size
       * @type string
       * @default 24
       */
      size: 24
    });
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */

/**
 * g-menu-item is intended for use in a g-menu.
 *
 * @class g-menu-item
 */
-->

<polymer-element name="g-menu-item" attributes="src label iconsize" assetpath="../../toolkit-ui/elements/">
  <template>
    <style>
      .label {
        margin: 0 15px;
      }

      g-icon, .label, .label > * {
        display: inline-block;
        vertical-align: middle;
      }
    </style>
    <g-icon src="{{src}}" size="{{iconsize}}"></g-icon>
    <div class="label">
      <span>{{label}}</span>
      <content></content>
    </div>
  </template>
  <script>
    Polymer('g-menu-item', {
      /**
       * The URL of an image for the icon.
       *
       * @attribute src
       * @type string
       * @default ''
       */
      src: '',
      /**
       * Specifies the label for the menu item.
       *
       * @attribute label
       * @type string
       * @default ''
       */
      label: '',
      /**
       * Specifies the size of the icon.
       *
       * @attribute size
       * @type string
       * @default 24
       */
      iconsize: 24
    });
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
-->
<polymer-element name="g-selection" attributes="multi" assetpath="../../toolkit-ui/elements/">
  <template>
    <style>
      @host {
        * {
          display: none !important;
        }
      }
    </style>
  </template>
  <script>
    Polymer('g-selection', {
      multi: false,
      created: function() {
        this.clear();
      },
      clear: function() {
        this.selection = [];
      },
      getSelection: function() {
        return this.multi ? this.selection : this.selection[0];
      },
      isSelected: function(inItem) {
        return this.selection.indexOf(inItem) >= 0;
      },
      setItemSelected: function(inItem, inIsSelected) {
        if (inItem) {
          if (inIsSelected) {
            this.selection.push(inItem);
          } else {
            var i = this.selection.indexOf(inItem);
            if (i >= 0) {
              this.selection.splice(i, 1);
            }
          }
          // TODO(sjmiles): consider replacing with summary
          // notifications (asynchronous job)
          this.asyncFire("select", {isSelected: inIsSelected, item: inItem});
        }
      },
      select: function(inItem) {
        if (this.multi) {
          this.toggle(inItem);
        } else if (this.getSelection() !== inItem) {
          this.setItemSelected(this.getSelection(), false);
          this.setItemSelected(inItem, true);
        }
      },
      toggle: function(inItem) {
        this.setItemSelected(inItem, !this.isSelected(inItem));
      }
    });
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
/**
 * g-selector is used to display a list of elements that can be selected.
 * The attribute "selected" indicates which element is being selected.
 * Tapping on the element to change selection would fire "activate"
 * event.
 *
 * Example:
 *
 *     <g-selector selected="0" on-activate="activateHandler">
 *       <div>Item 1</div>
 *       <div>Item 2</div>
 *       <div>Item 3</div>
 *     </g-selector>
 *
 * g-selector is not styled.  So one needs to use "selected" CSS class
 * to style the selected element.
 * 
 *     <style>
 *       .item.selected {
 *         background: #eee;
 *       }
 *     </style>
 *     ...
 *     <g-selector>
 *       <div class="item">Item 1</div>
 *       <div class="item">Item 2</div>
 *       <div class="item">Item 3</div>
 *     </g-selector>
 *
 * @class g-selector
 */
/**
 * Fired when an element is selected via tap.
 * 
 * @event activate
 * @param {Object} inDetail
 *   @param {Object} inDetail.item the selected element
 */
-->

<!--<polymer-element name="g-selector" on-tap="activateHandler" attributes="selected selectedClass selectedModel multi valueattr notap">
  <template>
    <g-selection id="selection" multi="{{multi}}" on-select="selectionSelect"></g-selection>
    <content id="items" select="*"></content>
  </template>
  <script>
    Polymer('g-selector', {
      /**
       * Gets or sets the selected element.  Default is to use the index
       * of the currently selected element.
       *
       * If you want a specific attribute value of the selected element to be
       * used instead of index, set "valueattr" to that attribute name.
       *
       * Example:
       *
       *     <g-selector valueattr="label" selected="foo">
       *       <div label="foo"></div>
       *       <div label="bar"></div>
       *       <div label="zot"></div>
       *     </g-selector>
       *
       * @attribute selected
       * @type string
       * @default null
       */
      selected: null,
      /**
       * If true, multiple selections are allowed.
       *
       * @attribute multi
       * @type boolean
       * @default false
       */
      multi: false,
      /**
       * Specifies the attribute to be used for "selected" attribute.
       *
       * @attribute valueattr
       * @type string
       * @default 'name'
       */
      valueattr: 'name',
      /**
       * Specifies the CSS class to be used to add to the selected element.
       * 
       * @attribute selectedClass
       * @type string
       * @default 'selected'
       */
      selectedClass: 'selected',
      /**
       * Returns the model associated with the selected element.
       * 
       * @attribute selectedModel
       * @type Object
       * @default null
       */
      selectedModel: null,
      created: function() {
        this.setAttribute('touch-action', 'none');
      },
      get items() {
        return this.$.items.getDistributedNodes();
      },
      get selection() {
        return this.$.selection.getSelection();
      },
      selectedChanged: function() {
        this.valueToSelection(this.selected);
      },
      valueToSelection: function(inValue) {
        var item = this.items[this.valueToIndex(inValue)];
        if (item) {
          this.$.selection.select(item);
          var t = item.templateInstance;
          this.selectedModel = t ? t.model : undefined;
        } else {
          this.selectedModel = null;
        }
      },
      valueToIndex: function(inValue) {
        // find an item with value == inValue and return it's index
        for (var i=0, items=this.items, c; (c=items[i]); i++) {
          if (this.valueForNode(c) == inValue) {
            return i;
          }
        }
        // if no item found, the value itself is probably the index
        return inValue;
      },
      valueForNode: function(inNode) {
        return inNode[this.valueattr] || inNode.getAttribute(this.valueattr);
      },
      // events fired from <g-selection> object
      selectionSelect: function(inEvent, inInfo) {
        if (inInfo.item && this.selectedClass) {
          inInfo.item.classList.toggle(this.selectedClass, inInfo.isSelected);
        }
      },
      // event fired from host
      activateHandler: function(inEvent) {
        if (this.notap) {
          return;
        }
        var items = this.items;
        var i = this.findDistributedTarget(inEvent.target, items);
        if (i >= 0) {
          var selected = this.valueForNode(items[i]) || i;
          if (this.multi) {
            this.valueToSelection(selected);
          } else {
            this.selected = selected;
          }
          this.asyncFire('activate', {item: items[i]});
        }
      },
      findDistributedTarget: function(target, nodes) {
        // find first ancestor of target (including itself) that
        // is in inNodes, if any
        while (target && target != this) {
          var i = Array.prototype.indexOf.call(nodes, target);
          if (i >= 0) {
            return i;
          }
          target = target.parentNode;
        }
      }
    });
  </script>
</polymer-element>-->
<polymer-element name="g-selector" attributes="selected multi valueattr selectedClass selectedProperty selectedItem selectedModel notap target itemsSelector activateEvent" assetpath="../../toolkit-ui/elements/">
  <template>
    <g-selection id="selection" multi="{{multi}}" on-select="selectionSelect"></g-selection>
    <content id="items" select="*"></content>
  </template>
  <script>
    Polymer('g-selector', {
      /**
       * Gets or sets the selected element.  Default to use the index
       * of the item element.
       *
       * If you want a specific attribute value of the element to be
       * used instead of index, set "valueattr" to that attribute name.
       *
       * Example:
       *
       *     <polymer-selector valueattr="label" selected="foo">
       *       <div label="foo"></div>
       *       <div label="bar"></div>
       *       <div label="zot"></div>
       *     </polymer-selector>
       *
       * In multi-selection this should be an array of values.
       *
       * Example:
       *
       *     <polymer-selector id="selector" valueattr="label" multi>
       *       <div label="foo"></div>
       *       <div label="bar"></div>
       *       <div label="zot"></div>
       *     </polymer-selector>
       *
       *     this.$.selector.selected = ['foo', 'zot'];
       *
       * @attribute selected
       * @type Object
       * @default null
       */
      selected: null,
      /**
       * If true, multiple selections are allowed.
       *
       * @attribute multi
       * @type boolean
       * @default false
       */
      multi: false,
      /**
       * Specifies the attribute to be used for "selected" attribute.
       *
       * @attribute valueattr
       * @type string
       * @default 'name'
       */
      valueattr: 'name',
      /**
       * Specifies the CSS class to be used to add to the selected element.
       * 
       * @attribute selectedClass
       * @type string
       * @default 'polymer-selected'
       */
      selectedClass: 'selected',
      /**
       * Specifies the property to be used to set on the selected element
       * to indicate its active state.
       *
       * @attribute selectedProperty
       * @type string
       * @default 'active'
       */
      selectedProperty: 'active',
      /**
       * Returns the currently selected element. In multi-selection this returns
       * an array of selected elements.
       * 
       * @attribute selectedItem
       * @type Object
       * @default null
       */
      selectedItem: null,
      /**
       * In single selection, this returns the model associated with the
       * selected element.
       * 
       * @attribute selectedModel
       * @type Object
       * @default null
       */
      selectedModel: null,
      /**
       * The target element that contains items.  If this is not set 
       * polymer-selector is the container.
       * 
       * @attribute target
       * @type Object
       * @default null
       */
      target: null,
      itemsSelector: '',
      activateEvent: 'tap',
      notap: false,
      created: function() {
        this.activateListener = this.activateHandler.bind(this);
        this.observer = new MutationObserver(this.updateSelected.bind(this));
        if (!this.target) {
          this.target = this;
        }
      },
      get items() {
        var nodes = this.target !== this ? (this.itemsSelector ? 
            this.target.querySelectorAll(this.itemsSelector) : 
                this.target.children) : this.$.items.getDistributedNodes();
        return Array.prototype.filter.call(nodes || [], function(n) {
          return n && n.localName !== 'template';
        });
      },
      targetChanged: function(old) {
        if (old) {
          this.removeListener(old);
          this.observer.disconnect();
        }
        if (this.target) {
          this.addListener(this.target);
          this.observer.observe(this.target, {childList: true});
        }
      },
      addListener: function(node) {
        node.addEventListener(this.activateEvent, this.activateListener);
      },
      removeListener: function(node) {
        node.removeEventListener(this.activateEvent, this.activateListener);
      },
      get selection() {
        return this.$.selection.getSelection();
      },
      selectedChanged: function() {
        this.updateSelected();
      },
      updateSelected: function() {
        this.validateSelected();
        if (this.multi) {
          this.clearSelection();
          this.selected && this.selected.forEach(function(s) {
            this.valueToSelection(s);
          }, this);
        } else {
          this.valueToSelection(this.selected);
        }
      },
      validateSelected: function() {
        // convert to an array for multi-selection
        if (this.multi && !Array.isArray(this.selected) && 
            this.selected !== null && this.selected !== undefined) {
          this.selected = [this.selected];
        }
      },
      clearSelection: function() {
        if (this.multi) {
          this.selection.slice().forEach(function(s) {
            this.$.selection.setItemSelected(s, false);
          }, this);
        } else {
          this.$.selection.setItemSelected(this.selection, false);
        }
        this.selectedItem = null;
        this.$.selection.clear();
      },
      valueToSelection: function(value) {
        var item = (value === null || value === undefined) ? 
            null : this.items[this.valueToIndex(value)];
        this.$.selection.select(item);
      },
      updateSelectedItem: function() {
        this.selectedItem = this.selection;
      },
      selectedItemChanged: function() {
        if (this.selectedItem) {
          var t = this.selectedItem.templateInstance;
          this.selectedModel = t ? t.model : undefined;
        } else {
          this.selectedModel = null;
        }
      },
      valueToIndex: function(value) {
        // find an item with value == value and return it's index
        for (var i=0, items=this.items, c; (c=items[i]); i++) {
          if (this.valueForNode(c) == value) {
            return i;
          }
        }
        // if no item found, the value itself is probably the index
        return value;
      },
      valueForNode: function(node) {
        return node[this.valueattr] || node.getAttribute(this.valueattr);
      },
      // events fired from <polymer-selection> object
      selectionSelect: function(e, detail) {
        this.updateSelectedItem();
        if (detail.item) {
          this.applySelection(detail.item, detail.isSelected)
        }
      },
      applySelection: function(item, isSelected) {
        if (this.selectedClass) {
          item.classList.toggle(this.selectedClass, isSelected);
        }
        if (this.selectedProperty) {
          item[this.selectedProperty] = isSelected;
        }
      },
      // event fired from host
      activateHandler: function(e) {
        if (!this.notap) {
          var i = this.findDistributedTarget(e.target, this.items);
          if (i >= 0) {
            var item = this.items[i];
            var s = this.valueForNode(item) || i;
            if (this.multi) {
              if (this.selected) {
                this.addRemoveSelected(s);
              } else {
                this.selected = [s];
              }
            } else {
              this.selected = s;
            }
            this.asyncFire('activate', {item: item});
          }
        }
      },
      addRemoveSelected: function(value) {
        var i = this.selected.indexOf(value);
        if (i >= 0) {
          this.selected.splice(i, 1);
        } else {
          this.selected.push(value);
        }
        this.valueToSelection(value);
      },
      findDistributedTarget: function(target, nodes) {
        // find first ancestor of target (including itself) that
        // is in nodes, if any
        while (target && target != this) {
          var i = Array.prototype.indexOf.call(nodes, target);
          if (i >= 0) {
            return i;
          }
          target = target.parentNode;
        }
      }
    });
  </script>
</polymer-element>
<!--
 Copyright 2013 The Polymer Authors. All rights reserved.
 Use of this source code is governed by a BSD-style
 license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
/**
 * g-ribbon is a g-selector styled to look like a sidebar menu.
 * Use it in conjunction with g-menu-item.
 *
 * Example:
 *
 *     <g-ribbon selected="0" label="Google">
 *       <g-menu-item src="home.png">Home</g-menu-item>
 *       <g-menu-item src="topics.png">Topics</g-menu-item>
 *       <g-menu-item src="accounts.png">Accounts</g-menu-item>
 *       <g-menu-item src="explore.png">Explore</g-menu-item>
 *     </g-ribbon>
 *
 * @class g-ribbon
 * @extends g-selector
 */
-->

<polymer-element name="g-ribbon" extends="g-selector" attributes="label" assetpath="../../toolkit-ui/elements/">
  <template>
    <style>
      @host {
        * {
          display: -webkit-box;
          display: -webkit-flex;
          display: flex;
          -webkit-box-orient: vertical;
          -webkit-flex-flow: column;
          flex-direction: column;
          background: -webkit-linear-gradient(-60deg, #3d3d3d, #353535);
          background: -moz-linear-gradient(-60deg, #3d3d3d, #353535);
          background: linear-gradient(-60deg, #3d3d3d, #353535);
          box-shadow: inset -5px 0px 8px rgba(0, 0, 0, 0.4);
          color: white;
          font-size: 15px;
        }
      }
      
      .ribbon-label {
        height: 60px;
        line-height: 60px;
        padding-left: 30px;
        font-size: 21px;
        color: white;
        border-bottom: 1px solid rgba(0, 0, 0, 0.2);
        box-shadow: 0 1px 0 rgba(255, 255, 255, 0.02);
        cursor: pointer;
      }
       
      .menu {
        -webkit-box-flex: 1;
        -webkit-flex: 1;
        flex: 1;
        overflow: auto;
      }
      
      /*@polyfill g-menu-item */
      shadow::-webkit-distributed(g-menu-item) {
        display: block;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        padding: 12px 14px;
        margin: 10px 14px;
        border: 1px solid transparent;
        border-radius: 3px;
        opacity: 0.7;
        cursor: pointer;
        -webkit-user-select: none;
      }
      
      /*@polyfill g-menu-item.selected */
      shadow::-webkit-distributed(g-menu-item.selected) {
        background-color: rgba(0,0,0,0.5);
        border: 1px solid #3D3D3D;
        opacity: 1;
      }
      
      /*@polyfill g-menu-item.selected:before */
      shadow::-webkit-distributed(g-menu-item.selected:before) {
        content: "";
        position: absolute;
        margin-top: 6px;
        right: 0;
        width: 0; 
        height: 0; 
        border-top: 10px solid transparent;
        border-bottom: 10px solid transparent; 
        border-right: 10px solid white; 
      }
    </style>
    <div class="ribbon-label">{{label}}</div>
    <div class="menu">
      <shadow></shadow>
    </div>
  </template>
  <script>
    Polymer('g-ribbon', {
      /**
       * Label to put on the top portion of ribbon.
       *
       * @attribute label
       * @type string
       * @default ''
       */
      label: ''
    });
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
/**
 * g-toolbar is a horizontal bar containing elements that can perform actions.
 *
 * Example:
 *
 *     <g-toolbar>
 *       <g-icon-button src="menu.png" on-click="menuAction"></g-icon-button>
 *       <div class="flex">Title</div>
 *       <g-icon-button src="more.png" on-click="moreAction"></g-icon-button>
 *     </g-toolbar>
 *
 * @class g-toolbar
 */
-->
<polymer-element name="g-toolbar" attributes="responsive" assetpath="../../toolkit-ui/elements/">
  <template>
    <style>
      .toolbar {
        display: -webkit-box;
        display: -webkit-flex;
        display: flex;
        -webkit-box-align: center;
        -webkit-align-items: center;
        align-items: center;
        min-height: 60px;
        background-color: whitesmoke;
        box-shadow: inset 0px 0px 3px rgba(255, 255, 255, 1);
        border-bottom: 1px solid rgba(0, 0, 0, 0.28);
      }
      
      /* toolbars can be made plain and nested toolbars are unstyled by default */
      /* TODO(ffu): use :scope when it is available */
      .toolbar[responsive=true] {
        box-shadow: none;
        border-bottom: 0;
      }
      
      /*@polyfill .toolbar > *:not(g-toolbar) */
      ::-webkit-distributed(:not(g-toolbar)) {
        margin: 0 10px;
      }
      
      /*@polyfill .toolbar > .flex */
      ::-webkit-distributed(.flex) {
        -webkit-box-flex: 1;
        -webkit-flex: 1;
        flex: 1;
      }
      
      /* TODO(ffu): ad hoc, replace with a more thoughtful set of responsive rules */
      @media screen and (max-width: 800px) {
        .toolbar[responsive=true] {
          position: fixed;
          right: 0;
          bottom: 0;
          left: 0;
          z-index: 1;
          background-color: whitesmoke;
          border: 0;
          border-top: 1px solid rgba(0, 0, 0, 0.28);
        }
        
        /*@polyfill .toolbar > *.hidden-narrow */
        ::-webkit-distributed(.hidden-narrow) {
          display: none;
        }
      }
    </style>
    <div class="toolbar" responsive="{{responsive}}">
      <content></content>
    </div>
  </template>
  <script>
    Polymer('g-toolbar', {
      responsive: false,
      created: function() {
        this.setAttribute('touch-action', 'none');
      }
    });
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
/**
 * g-icon-button enables you to place an image centered in a button.
 *
 * Example:
 *
 *     <g-icon-button src="star.png"></g-icon-button>
 *
 * @class g-icon-button
 */
-->

<polymer-element name="g-icon-button" attributes="src active" assetpath="../../toolkit-ui/elements/">
  <template>
    <style>
      @host {
        * {
          display: inline-block;
          position: relative;
          box-sizing: border-box;
          -moz-box-sizing: border-box;
          width: 44px;
          height: 44px;
          line-height: 24px;
          padding: 10px;
          cursor: pointer;
          border: none;
          background-color: rgba(0, 0, 0, 0);
          background-position: top left;
          background-size: cover;
          background-repeat: no-repeat;
          background-image: url(../../toolkit-ui/elements/images/btn_light.png);
          background-position: 0 0;
          vertical-align: middle;
        }
        
        *:hover {
          background-position: 0 -44px;
        }
        
        *.selected {
          background-position: 0 -88px;
        }
        
        *:active, *.selected:active {
          background-position: 0 -132px;
        }
      }
    </style>
    <g-icon src="{{src}}"></g-icon>
  </template>
  <script>
    Polymer('g-icon-button', {
      /**
       * The URL of an image for the icon.
       *
       * @attribute src
       * @type string
       * @default ''
       */
      src: '',
      /**
       * If true, border is placed around the button to indicate
       * active state.
       *
       * @attribute active
       * @type boolean
       * @default false
       */
      active: false,
      activeChanged: function() {
        // TODO(sjmiles): 'class' attributes should have special handling 
        //   for this common use case
        this.classList.toggle('selected', this.active);
      }
    });
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->


<polymer-element name="pi-toolbar" attributes="label nav hideActionbar" assetpath="components/">
  <template>
    <style>.toolbar-label {
  font-size: 21px;
  margin: 0;
}

@media screen and (max-width: 800px) {
  /*@polyfill #actionbar > .toolbar > *:not(:last-child):not([hidden]) */
  #actionbar content::-webkit-distributed(*:not(:last-child):not([hidden])) {
    display: -webkit-box;
    -webkit-box-flex: 1;
    -webkit-flex: 1;
    flex: 1;
  }
}</style>
    <g-toolbar>
      <g-icon-button src="{{navIconSrc}}" on-tap="navAction"></g-icon-button>
      <div class="toolbar-label flex">{{label}}</div>
      <g-toolbar id="actionbar" hidden?="{{hideActionbar}}" responsive="true">
        <content></content>
      </g-toolbar>
    </g-toolbar>
  </template>
  <script>
    Polymer('pi-toolbar', {
      nav: 'menu',
      created: function() {
        this.navChanged();
      },
      navAction: function(event) {
        this.fire('nav-action');
        event.cancelBubble = true;
      },
      navChanged: function() {
        if (this.nav) {
          this.navIconSrc = this.resolvePath('../images/' + this.nav + '.png');
        }
      }
    });
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
/**
 * g-overlay displays overlayed on top of other content. It starts out
 * hidden and is displayed by setting it's opened property
 * to true. A g-overlay's opened state can be toggled by calling the toggle
 * method.
 * 
 * It's common to want a g-overlay to animate to its opened position. A number
 * of helper css classes provide some basic open/close animations. For example,
 * assigning the class g-overlay-fade to a g-overlay will make it fade into 
 * and out of view as it opens and closes. Note, if multiple g-overlay's are
 * opened, they should stack on top of each other.
 * 
 * Styling: The size and position of a g-overlay should be setup via css.
 * g-overlay is natually sized around its content. When a g-overlay is opened
 * it is shown and the 'opened' class is added to it. This is typically where
 * css transitions and animations are applied. When the g-overlay is closed,
 * the 'opened' class is removed and a 'closing' class is added. Use 'closing'
 * to customize the closing animation. 
 * 
 * Classes for animating g-overlay:
 * 
 * * g-overlay-fade: fade in/out when opened/closed
 * * g-overlay-scale-slideup: open: fade in and shrink; close: slide up
 * * g-overlay-shake: open: fly in and shake; close: shake and fly out.
 *
 * It's common to use g-overlay to gather user input, for example a login
 * dialog. To facilitate this, g-overlay supports automatic focusing of a 
 * specific element when it's opened. The element to be focused should be given
 * an autofocus attribute.
 * 
 * An element that should close the g-overlay will automatically do so if it
 * is given the overlay-toggle attribute. Please note that g-overlay will 
 * close whenever the user taps outside it or presses the escape key. The 
 * behavior can be turned off via the autoCloseDisabled property.
 * 
 *     <g-overlay class="g-overlay-scale-slideup">
 *	     <h2>Dialog</h2>
 *       <input placeholder="say something..." autofocus"></input>
 *       <div>I agree with this wholeheartedly.</div>
 *       <button overlay-toggle>OK</button>
 *     </g-overlay>
 * 
 * 
 * @class g-overlay
 */
/**
 * Fired when the g-overlay opened property is set.
 * 
 * @event open
 * @param {Object} inDetail
 * @param {Object} inDetail.opened the opened state
 */
-->
<polymer-element name="g-overlay" attributes="opened autoCloseDisabled" on-webkitanimationstart="openedAnimationStart" on-animationstart="openedAnimationStart" on-webkitanimationend="openedAnimationEnd" on-animationend="openedAnimationEnd" on-webkittransitionend="openedTransitionEnd" on-transitionend="openedTransitionEnd" on-tap="tapHandler" on-keydown="keydownHandler" assetpath="../../toolkit-ui/elements/">

<template>
  <style>/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */

/*
  TODO(sorvell): include a reasonable set of default overlay opening 
  animations. What's here right now is ad hoc.
*/
 
 /*
    Styling a g-overlay:
 
    1. use the 'opened' class to style the overlay when it is open.
    A transition or animation can be applied to animate the overlay into place.
    Note: there's no need to set the display property of an overlay. That's
    managed automatically.
 
    2. To apply a different animation when the overlay closes, use the 
    'closing' class.
 */
 
/* Note that trbl: 0 + position: fixed will not 'fit to window'
if a transform is applied to a parent of this element. That parent
becomes the containing block; see:
http://dev.w3.org/csswg/css3-transforms/#transform-rendering
We address this by using script based positioning =(
*/
@host {
  * {
    position: fixed;
    z-index: 10;
    outline: none;
    display: none;
    opacity: 0.99;
    -webkit-transition: opacity 0.001s;
    transition: opacity 0.001s;
  }

  /*
    The revealed class exists because it's necessary to 'show' a node
    before applying a transition. When an overlay is opened, it is 
    immediately revealed (display: block) and then asynchronously the 
    opened or closing classes are added.

    Because we don't want to actually show the node before a transition
    or animation is applied, when the node is 
    revealed, it is made display: block but visibility: hidden.
    It is then made visibility: visible when it is opened.
  */

  .revealed {
    display: block;
    visibility: hidden;
  }

  .revealed.opened {
    opacity: 1;
    display: block;
    visibility: visible;
  }

  .revealed.closing {
    display: block;
    visibility: visible;
  }

  /* 
    When an animation is detected (via an animationstart event) this class
    is applied to remove any transition. This ensures only 1 animation end event
    will be processed.

    NOTE: if a rule such as a media query changes an overlay from using a css 
    animation to a transition, the animation class must be altered or removed.
  */
  .animation {
    -webkit-transition: none;
    transition: none;
  }

  .g-overlay-fade {
    opacity: 0;
    -webkit-transition: all 0.218s;
    transition: all 0.218s;
  }

  .g-overlay-fade.opened {
    opacity: 1;
  }

  .g-overlay-scale-slideup {
    opacity: 0.0;
    -webkit-transform: scale(1.05);
    transform: scale(1.05);
  }

  .g-overlay-scale-slideup.opened {
    opacity: 1.0;
    -webkit-transform: scale(1.0);
    transform: scale(1.0);
    -webkit-transition: all 0.218s;
    transition: all 0.218s;
  }

  .g-overlay-scale-slideup.closing {
    opacity: 0;
    -webkit-transform: translateY(-100%);
    transform: translateY(-100%);
    -webkit-transition: all 0.4s;
    transition: all 0.4s;
  }
  
  .g-overlay-shake.opened {
    -webkit-animation-duration: 0.5s;
    -webkit-animation-fill-mode: both;
    -webkit-animation-name: g-overlay-shakeFadeIn;
    animation-duration: 0.5s;
    animation-fill-mode: both;
    animation-name: g-overlay-shakeFadeIn;
  }

  .g-overlay-shake.closing {
    -webkit-animation-duration: 0.5s;
    -webkit-animation-fill-mode: both;
    -webkit-animation-name: g-overlay-shakeFadeOut;
    animation-duration: 0.5s;
    animation-fill-mode: both;
    animation-name: g-overlay-shakeFadeOut;
  }
}
</style>
  <style polymer-scope="global">/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */

@-webkit-keyframes g-overlay-shakeFadeIn {
  0% {
    opacity: 0;
    -webkit-transform: translateX(0);
  }
  10% {
    -webkit-transform: translateX(-50px);
  }
  30% {
    -webkit-transform: translateX(50px);
  }
  50% {
    -webkit-transform: translateX(-25px);
  }
  70% {
    -webkit-transform: translateX(25px);
  }
  90% {
    -webkit-transform: translateX(-13px);
  }
  100% {
    -webkit-transform: translateX(0);
    opacity: 1;
  }
}

@keyframes g-overlay-shakeFadeIn {
  0% {
    opacity: 0;
    transform: translateX(0);
  }
  10% {
    transform: translateX(-50px);
  }
  30% {
    transform: translateX(50px);
  }
  50% {
    transform: translateX(-25px);
  }
  70% {
    transform: translateX(25px);
  }
  90% {
    transform: translateX(-13px);
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@-webkit-keyframes g-overlay-shakeFadeOut {
  0% {
    opacity: 1;
    -webkit-transform: translateX(0);
  }
  10% {
    -webkit-transform: translateX(-50px);
  }
  30% {
    -webkit-transform: translateX(50px);
  }
  100% {
    -webkit-transform: translateX(-100%);
    opacity: 0;
  }
}

@keyframes g-overlay-shakeFadeOut {
  0% {
    opacity: 1;
    transform: translateX(0);
  }
  10% {
    transform: translateX(-50px);
  }
  30% {
    transform: translateX(50px);
  }
  100% {
    transform: translateX(-100%);
    opacity: 0;
  }
}</style>
  <content></content>
</template>
<script>
  (function() {
    // TODO(sorvell): need keyhelper component.
    var ESCAPE_KEY = 27;
    
    // track overlays for z-index and focus managemant
    var overlays = [];
    var trackOverlays = function(inOverlay) {
      if (inOverlay.opened) {
        var z0 = currentOverlayZ();
        overlays.push(inOverlay);
        var z1 = currentOverlayZ();
        if (z1 <= z0) {
          applyOverlayZ(inOverlay, z0);
        } 
      } else {
        var i = overlays.indexOf(inOverlay);
        if (i >= 0) {
          overlays.splice(i, 1);
          setZ(inOverlay, null);
        }
      }
    }
    
    var applyOverlayZ = function(inOverlay, inAboveZ) {
      setZ(inOverlay, inAboveZ + 2);
    }
    
    var setZ = function(inNode, inZ) {
      inNode.style.zIndex = inZ;
    }
  
    var currentOverlay = function() {
      return overlays[overlays.length-1];
    }
    
    var DEFAULT_Z = 10;
    
    var currentOverlayZ = function() {
      var z;
      var current = currentOverlay();
      if (current) {
        var z1 = window.getComputedStyle(current).zIndex;
        if (!isNaN(z1)) {
          z = Number(z1);
        }
      }
      return z || DEFAULT_Z;
    }
    
    var focusOverlay = function() {
      var current = currentOverlay();
      if (current) {
        current.applyFocus();
      }
    }
  
    Polymer('g-overlay', {
      /**
       * Set opened to true to show an overlay and to false to hide it.
       * A g-overlay may be made intially opened by setting its opened 
       * attribute.
       * @attribute opened
       * @type boolean
       * @default false
       */
      opened: false,
      /**
       * By default an overlay will close automatically if the user taps outside
       * it or presses the escape key. Disable this behavior by setting the 
       * autoCloseDisabled property to true.
       * @attribute autoCloseDisabled
       * @type boolean
       * @default false
       */
      autoCloseDisabled: false,
      timeout: 1000,
      captureEventType: 'tap',
      created: function() {
        if (this.tabIndex === undefined) {
          this.tabIndex = -1;
        }
        this.setAttribute('touch-action', 'none');
      },
      /** 
       * Toggle the opened state of the overlay.
       * @method toggle
       */
      toggle: function() {
        this.opened = !this.opened;
      },
      openedChanged: function() {
        this.renderOpened();
        trackOverlays(this);
        if (!this.autoCloseDisabled) {
          this.enableCaptureHandler(this.opened);
        }
        this.enableResizeHandler(this.opened);
        this.fire('opened', this.opened);
      },
      enableHandler: function(inEnable, inMethodName, inNode, inEventName, inCapture) {
        var m = 'bound' + inMethodName;
        this[m] = this[m] || this[inMethodName].bind(this);
        
        inNode[inEnable ? 'addEventListener' : 'removeEventListener'](
          inEventName, this[m], inCapture);
      },
      enableResizeHandler: function(inEnable) {
        this.enableHandler(inEnable, 'resizeHandler', window, 
          'resize');
      },
      enableCaptureHandler: function(inEnable) {
        this.enableHandler(inEnable, 'captureHandler', document, 
          this.captureEventType, true);
      },
      getFocusNode: function() {
        return this.querySelector('[autofocus]') || this;
      },
      // TODO(sorvell): nodes stay focused when they become un-focusable due to
      // an ancestory becoming display: none; file bug.
      applyFocus: function() {
        var focusNode = this.getFocusNode();
        if (this.opened) {
          focusNode.focus();
        } else {
          focusNode.blur();
          focusOverlay();
        }
      },
      renderOpened: function() {
        this.classList.remove('closing');
        this.classList.add('revealed');
        // continue styling after delay so display state can change without
        // aborting transitions
        this.asyncMethod('continueRenderOpened');
      },
      continueRenderOpened: function() {
        this.classList.toggle('opened', this.opened);
        this.classList.toggle('closing', !this.opened);
        //this.animating = this.asyncMethod('completeOpening', null, this.timeout);
      },
      completeOpening: function() {
        //clearTimeout(this.animating);
        this.animating = null;
        this.classList.remove('closing');
        this.classList.toggle('revealed', this.opened);
        this.applyFocus();
      },
      openedAnimationEnd: function(e) {
        if (!this.opened) {
          this.classList.remove('animation');
        }
        // same steps as when a transition ends
        this.openedTransitionEnd(e);
      },
      openedTransitionEnd: function(e) {
        // TODO(sorvell): Necessary due to 
        // https://bugs.webkit.org/show_bug.cgi?id=107892
        // Remove when that bug is addressed.
        if (e.target == this) {
          this.completeOpening();
          e.stopPropagation();
          e.cancelBubble = true;
        }
      },
      openedAnimationStart: function(e) {
        this.classList.add('animation');
        e.stopPropagation();
        e.cancelBubble = true;
      },
      tapHandler: function(e) {
        if (e.target && e.target.hasAttribute('overlay-toggle')) {
          this.toggle();
        } else {
          if (this.autoCloseJob) {
            this.autoCloseJob.stop();
            this.autoCloseJob = null;
          }
        }
      },
      // TODO(sorvell): This approach will not work with modal. For this we need a
      // scrim.
      captureHandler: function(e) {
        if (!this.autoCloseDisabled && (currentOverlay() == this) && (this 
            != e.target) && !(this.contains(e.target))) {
          this.autoCloseJob = this.job(this.autoCloseJob, function() {
            this.opened = false;
          });
        }
      },
      keydownHandler: function(e) {
        if (!this.autoCloseDisabled && (e.keyCode == ESCAPE_KEY)) {
          this.opened = false;
          e.stopPropagation();
          e.cancelBubble = true;
        }
      },
      /**
       * Extensions of g-overlay should implement the resizeHandler
       * method to adjust the size and position of the overlay when the 
       * browser window resizes.
       * @method resizeHandler
       */
      resizeHandler: function() {
      }
    });
  })();
</script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
/**
 * g-menu is a g-selector styled to look like a menu. Use it
 * in conjunction with g-menu-item.
 *
 * Example:
 *
 *     <g-menu selected="email">
 *       <g-menu-item name="post" src="images/comment.png">Post a Comment</g-menu-item>
 *       <g-menu-item name="share" src="images/hangout.png">Share Link</g-menu-item>
 *       <g-menu-item name="email" src="images/mail.png">Email Link</g-menu-item>
 *       <g-menu-item name="favorite" src="images/favorite.png">Add to Favorites</g-menu-item>
 *     </g-menu>
 *
 * @class g-menu
 * @extends g-selector
 */
-->

<polymer-element name="g-menu" extends="g-selector" assetpath="../../toolkit-ui/elements/">
  <template>
    <style>
      /*@polyfill g-menu-item */
      shadow::-webkit-distributed(g-menu-item) {
        display: block;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        height: 40px;
        line-height: 35px;
        padding: 0 10px;
        margin: 10px;
        -webkit-transform: translate3d(0, 0, 0);
        border-radius: 3px;
        border: 1px solid transparent;
        font-weight: bold;
        font-size: 15px;
        cursor: pointer;
        white-space: nowrap;
        opacity: .5;
      }
      
      /* TODO(sorvell): please note, styling broken due to:
      https://code.google.com/p/chromium/issues/detail?id=229667
      */
      /*@polyfill g-menu-item.selected */
      shadow::-webkit-distributed(g-menu-item.selected) {
        background: #f2f2f2;
        border: 1px solid rgba(0, 0, 0, 0.15);
        opacity: 0.9;
      }
    </style>
    <shadow></shadow>
  </template>
  <script>
    Polymer('g-menu');
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
-->



<polymer-element name="g-menu-button" attributes="src selected opened responsive valign selectedClass" assetpath="../../toolkit-ui/elements/">
  <template>
    <style>@host {
  * {
    display: inline-block;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    width: 44px;
    height: 44px;
  }
}
 
#overlay {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.15);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  margin: 9px 0 0 22px;
  -webkit-transform: translateX(-50%);
  transform: translateX(-50%);
}

[valign=right] #overlay {
  -webkit-transform: translateX(-90%);
  transform: translateX(-90%);
}

[valign=left] #overlay {
  -webkit-transform: translateX(-10%);
  transform: translateX(-10%);
}

.arrow {
  height: 1px;
  width: 0;
  margin: -17px auto 0;
  border-color: transparent transparent #cfcfcf transparent;
  border-style: solid;
  border-width: 8px;
}
 
.arrow-inner {
  border-bottom-color: white;
  margin-top: -16px;
}

[valign=right] .arrow {
  position: relative;
  left: -7px;
  margin-left: 90%;
}

[valign=left] .arrow {
  position: relative;
  left: -7px;
  margin-left: 10%;
}
 
#overlayMenu {
  display: block;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
}

/* TODO(ffu): adding responsive class won't work in native; to work in native
automatically we'll need to add a feature to detect if we're in a responsive
container */
@media screen and (max-width: 800px) {
  [responsive=true] .arrow-border, .arrow {
    display: none;
  }
  
  [responsive=true] #overlayMenu {
    width: 100%;
  }
  
  [responsive=true] #overlay  {
    /* override g-overlay @host rule style */
    position: absolute !important;
    -webkit-transform: translateX(0);
    transform: translateX(0);
    right: 0;
    bottom: 0;
    left: 0;
    margin: 0;
    border-bottom: 0;
    box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
  }
  
  [responsive=true] #overlay.slideup {
    -webkit-transform: translateY(100%);
    transform: translateY(100%);
    /* override g-overlay @host rule style */
    -webkit-transition: -webkit-transform 0.218s !important;
    transition: transform 0.218s !important;
  }
  
  [responsive=true] #overlay.slideup.opened {
    -webkit-transform: translateY(0);
    transform: translateY(0);
  }
}</style>
    <g-icon-button id="button" touch-action="none" on-tap="toggle" src="{{src}}" active="{{opened}}"></g-icon-button>
    <div responsive="{{responsive}}" valign="{{valign}}">
      <g-overlay id="overlay" class="slideup" opened="{{opened}}" modal="">
        <div class="arrow"></div>
        <div class="arrow arrow-inner"></div>
        <g-menu id="overlayMenu" selected="{{selected}}" selectedclass="{{selectedClass}}" on-activate="toggle">
          <content select="*"></content>
        </g-menu>
      </g-overlay>
    </div>
  </template>
  <script>
    Polymer('g-menu-button', {
      src: '',
      selected: '',
      opened: false,
      responsive: false,
      valign: 'center',
      //* Toggle the opened state of the dropdown.
      toggle: function() {
        this.opened = !this.opened;
      },
      //* Returns the selected item.
      get selection() {
        return this.$.overlayMenu.selection;
      }
    });
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->


<polymer-element name="pi-view-button" attributes="layout" assetpath="components/">
  <template>
    <style>
      g-menu-item.hidden-wide {
        display: none;
      }
        
      @media screen and (max-width: 800px) {
        g-menu-item.hidden-narrow {
          display: none;
        }
        
        g-menu-item.hidden-wide {
          display: block;
        }
      }
    </style>
    <g-menu-button id="viewButton" responsive="true" src="images/view_quilt.png" selected="{{layout}}">
      <g-menu-item name="quilt" label="Quilt" class="hidden-narrow" src="images/view_quilt.png"></g-menu-item>
      <g-menu-item name="quilt-horiz" label="Quilt (Horizontal)" class="hidden-narrow" src="images/view_quilt.png"></g-menu-item>
      <g-menu-item name="grid" label="Grid" src="images/view_module.png"></g-menu-item>
      <g-menu-item name="list" label="List" class="hidden-wide" src="images/view_list.png"></g-menu-item>
      <g-menu-item name="stream" label="Stream" src="images/view_stream.png"></g-menu-item>
      <g-menu-item name="column" label="Column" src="images/view_column.png"></g-menu-item>
    </g-menu-button>
  </template>
  <script>
    Polymer('pi-view-button');
  </script>
</polymer-element>



<polymer-element name="pi-action-button" assetpath="components/">
  <template>
    <g-menu-button src="images/plus.png" responsive="true" valign="right">
      <g-menu-item src="images/comment.png">Post a Comment</g-menu-item>
      <g-menu-item src="images/hangout.png">Share Link</g-menu-item>
      <g-menu-item src="images/mail.png">Email Link</g-menu-item>
      <g-menu-item src="images/favorite.png">Add to Favorites</g-menu-item>
    </g-menu-button>
  </template>
  <script>
    Polymer('pi-action-button');
  </script>
</polymer-element>


<polymer-element name="pi-link-button" attributes="link" assetpath="components/">
  <template>
    <a href="{{link}}" target="_blank">
      <g-icon-button src="images/web.png"></g-icon-button>
    </a>
  </template>
  <script>
    Polymer('pi-link-button');
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<polymer-element name="pi-gfeeds" attributes="feed query results loading count" assetpath="components/">
  <script>
    (function() {
      var feedsAreReady = false;
      var pendingFeeds = [];
      
      var feedsReady = function() {
        feedsAreReady = true;
        pendingFeeds.forEach(function(cb) {
          cb();
        });
        pendingFeeds = null;
      };
      
      var XGFeeds = {
        require: function(inCb) {
          if (feedsAreReady) {
            inCb();
          } else {
            pendingFeeds.push(inCb);
          }
        }
      };
      
      google.load('feeds', '1', {callback: feedsReady.bind(this)});
      
      Polymer('pi-gfeeds', {
        count: 24,
        feedChanged: function() {
          if (this.feed) {
            this.loading = true;
            // call fetchFeeds async to make sure any binding to count property is resolved
            // before fetchFeeds is called
            XGFeeds.require(this.asyncMethod.bind(this, 'fetchFeeds'));
          } else {
            this.results = null;
          }
        },
        fetchFeeds: function() {
          var feed = new google.feeds.Feed(this.feed);
          feed.includeHistoricalEntries(); // tell the API we want to have old entries too
          feed.setNumEntries(this.count); // we want this maximum number of entries, if they exist
          feed.load(this.fetchFeedsDone.bind(this));
        },
        fetchFeedsDone: function(results) {
          this.loading = false;
          if (results.error) {
            this.results = {};
            this.fire('error', {status: results.status});
          } else {
            this.results = results.feed;
            this.fire('response', {feed: results.feed});
          }
        },
        queryChanged: function() {
          if (this.query) {
            this.loading = true;
            XGFeeds.require(this.asyncMethod.bind(this, 'findFeeds'));
          }
        },
        findFeeds: function() {
          google.feeds.findFeeds(this.query, this.findFeedsDone.bind(this));
        },
        findFeedsDone: function(results) {
          this.loading = false;
          if (results.error) {
            this.fire('queryerror', {status: results.status});
          } else {
            this.fire('queryresponse', {entries: results.entries});
          }
        }
      });
    })();
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->

<polymer-element name="pi-feed-aggregator" attributes="feed count entries loading" assetpath="components/">
  <template>
    <pi-gfeeds feed="{{feedUrl}}" count="{{feedCount}}" results="{{feedResults}}"></pi-gfeeds>
  </template>
  <script>
    (function() {
      var GET_FAVICON_URL = 'http://s2.googleusercontent.com/s2/favicons?alt=feed&domain_url=';
      
      function timeSince(date) {
        var s = Math.floor(((new Date()) - date) / 1000);
        var t = Math.floor(s / 31536000);
        if (t > 1) {
          return t + 'y';
        }
        t = Math.floor(s / 2592000);
        if (t > 1) {
          return t + 'M';
        }
        t = Math.floor(s / 86400);
        if (t >= 1) {
          return t + 'd';
        }
        t = Math.floor(s / 3600);
        if (t >= 1) {
          return t + 'h';
        }
        t = Math.floor(s / 60);
        if (t > 1) {
          return t + 'm';
        }
        return Math.floor(s) + 's';
      };
      
      var DUMMY_TEXT = [
        'Forma temperiemque cornua sidera dissociata cornua recessit innabilis ligavit: solidumque coeptis nullus caelum sponte phoebe di regat mentisque tanta austro capacius amphitrite sui quin postquam semina fossae liquidum umor galeae coeptis caligine liberioris quin liquidum matutinis invasit posset: flexi glomeravit radiis certis invasit oppida postquam onerosior inclusum dominari opifex terris pace finxit quam aquae nunc sine altae auroram quam habentem homo totidemque scythiam in pondus ensis tegit caecoque poena lapidosos humanas coeperunt poena aetas totidem nec natura aethera locavit caelumque distinxit animalibus phoebe cingebant moderantum porrexerat terrae possedit sua sole diu summaque obliquis melioris orbem',
        'Quae zephyro praecipites vos frigida membra foret gentes ne librata liquidas lacusque animus liquidum ne orba opifex circumdare scythiam tuba militis chaos: sidera regio utramque quia effervescere proximus arce illic diversa homo ille aethere ventos qui principio coeperunt di colebat et nebulas adsiduis glomeravit lanient otia usu habitandae glomeravit librata cepit possedit metusque habentia sed mundi aetas sublime oppida consistere dixere dixere aequalis evolvit mixta animus sibi duae circumfluus litem egens metusque modo otia tumescere occiduo dispositam nix ut caeca innabilis conversa sponte flamina lucis lumina tegit pulsant adhuc zephyro recessit quoque tanto regio tegi terrarum extendi aeris pondus manebat summaque',
        'Coercuit iunctarum vix sic aberant spisso imagine litem cetera nubes ambitae tanta usu circumfuso fulminibus umentia rectumque iuga pluviaque meis semina regat ne campoque meis coeperunt nix cura iunctarum ligavit: secant ventos seductaque permisit sic iunctarum locoque his coeptis tum terras animalia recepta aethera cornua invasit tollere videre tonitrua humanas otia tuba alta dissociata sanctius adsiduis inclusum caesa ita onus sine pluviaque litem manebat fixo extendi ubi inposuit cum sublime membra undas orba forma deducite aethera turba coercuit retinebat obliquis bracchia nisi mentisque origine peregrinum manebat',
        'Obstabatque cingebant nitidis rapidisque cepit moderantum discordia habentia frigore solidumque fert inter caecoque sine coeperunt corpore quarum fluminaque coercuit vultus animal austro quem os sectamque animus origo solidumque quoque melioris adspirate recepta utramque rapidisque caelumque orba unus pluviaque erant mutastis gravitate illic quisque alta calidis speciem mixtam ante contraria duae',
        'Ut aer semina aequalis egens videre tum deus pluviaque quae tellure ad orbe habentia solidumque consistere pluvialibus neu ripis emicuit foret hanc abscidit et fulgura bracchia sorbentur caelo cuncta liberioris finxit tum obliquis terris deerat inter caecoque piscibus fidem otia caesa usu induit radiis supplex exemit neu cinxit nova facientes'
      ];
  
      Polymer('pi-feed-aggregator', {
        count: 24,
        useCache: true,
        feedResults: null,
        created: function() {
          this.resetCache();
          this.contentNode = document.createElement('div');
        },
        reload: function() {
          this.forceLoad = true;
          this.feedChanged();
        },
        resetCache: function() {
          this.feedResultsCache = {};
        },
        feedChanged: function() {
          if (this.feed) {
            this._entries = [];
            this.feeds = this.feed.slice(0);
            this.feedCount = Math.ceil(this.count / this.feeds.length);
            this.fetch();
          } else {
            this.entries = null;
          }
        },
        fetch: function() {
          if (this.feeds && this.feeds.length) {
            // processing feeds one by one
            var f = this.feeds.shift().feed;
            if (!this.forceLoad && this.useCache && this.feedResultsCache[f]) {
              this.gotFeedResults(this.feedResultsCache[f]);
            } else {
              // retrive feed data using pi-gfeeds (google Feed API)
              this.loading = true;
              this.feedUrl = f;
            }
          } else {
            // done processing all feeds
            this.fetchCompleted();
          }
        },
        fetchCompleted: function() {
          this.entries = this._entries.sort(this.dateSortDesc.bind(this));
          this.forceLoad = false;
          this.feedUrl = null;
          this.loading = false;
          this.fire('response', {entries: this.entries});
        },
        gotFeedResults: function(results) {
          if (results && results.feedUrl) {
            this.feedResultsCache[results.feedUrl] = results;
            var entries = this.processFeedResults(results);
            this._entries.push.apply(this._entries, entries);
          }
          // next feed
          this.fetch();
        },
        feedResultsChanged: function() {
          if (this.feedResults) {
            this.gotFeedResults(this.feedResults);
          }
        },
        dateSortDesc: function(inEntry1, inEntry2) {
          var d1 = inEntry1._date || new Date(inEntry1.publishedDate);
          var d2 = inEntry2._date || new Date(inEntry2.publishedDate);
          if (d1 > d2) {
            return -1;
          } else if (d1 < d2) {
            return 1;
          }
          return 0;
        },
        processFeedResults: function(results) {
          var n = this.contentNode;
          var entries = results.entries;
          entries.forEach(function(entry) {
            // feed source
            entry.source = results.title;
            entry.sourceLink = results.link;
            entry.feedUrl = results.feedUrl;
            // scrape image url
            if (!entry.imgSrc && entry.content) {
              var m$ = entry.content.match(/<img[^>]+src="([^">]+)"/);
              entry.imgSrc = m$ && m$[1];
            }
            entry.imageShowing = !!entry.imgSrc;
            // unescape html content
            if (!entry.desc && entry.contentSnippet) {
              n.innerHTML = entry.contentSnippet;
              n.innerHTML = n.textContent;
              entry.desc = n.textContent.trim();
            }
            // favicon
            if (entry.sourceLink) {
              entry.sourceIcon = GET_FAVICON_URL + entry.sourceLink;
            }
            // time since
            if (entry.publishedDate) {
              var d = entry._date || new Date(entry.publishedDate);
              entry._date = d;
              entry.since = timeSince(d);
            }
            // dummy text used for filling white spaces (for demo only)
            entry.dummyText = DUMMY_TEXT[Math.floor(Math.random() * DUMMY_TEXT.length)];
          });
          return entries;
        }
      });
    })();
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<polymer-element name="pi-feed-tracker" assetpath="components/">
  <script>
    (function() {
      var FEED_TRACKER_STORAGE_NAME = 'pica-feed-tracker-1';
      
      Polymer('pi-feed-tracker', {
        created: function() {
          this.feeds = {};
          this.load();
        },
        load: function() {
          var s = window.localStorage.getItem(FEED_TRACKER_STORAGE_NAME);
          if (s) {
            this.feeds = JSON.parse(s).feeds;
          }
        },
        save: function() {
          window.localStorage.setItem(FEED_TRACKER_STORAGE_NAME,
              JSON.stringify({feeds: this.feeds}));
        },
        loadStories: function(stories) {
          var feeds = {};
          stories.forEach(function(s) {
            var l = s.feedUrl;
            var t = s.title;
            var f = this.feeds[l];
            var nf = feeds[l] = feeds[l] || {};
            s.read = !!(f && f[t] && f[t].read);
            nf[t] = {read: s.read};
          }.bind(this));
          for (var f in feeds) {
            this.feeds[f] = feeds[f];
          }
          this.save();
        },
        markRead: function(story) {
          var f = this.feeds[story.feedUrl];
          if (f) {
            f[story.title].read = story.read = true;
            this.save();
          }
        },
        getReadCountForTopic: function(topic) {
          var read = 0;
          topic.feed.forEach(function(f) {
            var feed = this.feeds[f.feed];
            for (var t in feed) {
              feed[t].read && read++;
            }
          }.bind(this));
          return read;
        }
      });
    })();
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->

<polymer-element name="pi-items-view" attributes="layout view items selected" assetpath="components/">
  <template>
    <style>/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */

#container {
  overflow: hidden
}

.item {
  position: relative;
  border: 1px solid #ddd;
  border-top: 0;
  border-left: 0;
  height: auto;
}

.card {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  margin: 25px;
  font-family: 'Helvetica Neue', Helvetica, Arial, 'open sans', sans-serif;
  font-size: 15px;
}

.image {
  height: 50%;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center;
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 20px;
}

[showing=false] {  
  display: none;
}

.topics .image {
  height: 70%;
}

.title {
  font-weight: 500;
  font-size: 18px;
  opacity: .8;
}

.topics .title {
  font-weight: normal;
}

.unread-count {
  display: none;
  padding-left: 4px;
  color: #aaa;
}

.topics:not(.list) .unread-count {
  display: inline-block;
}

.description {
  padding-top: 10px;
}

/* hide description if there is an image */
.image[showing=true] + .info > .description {
  display: none;
}

.topics .description {
  display: none;
  padding: 0;
}

.content {
  display: none;
  padding-top: 20px;
}

.content img {
  display: none;
}

.source {
  position: absolute;
  bottom: 0;
}

.topics .source {
  display: none;
}

.source > * {
  vertical-align: middle;
}

.source-icon {
  display: inline-block;
  width: 20px;
  height: 20px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 100% 100%;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.source-title {
  padding-left: 2px;
  font-weight: 600;
  font-size: 12px;
  opacity: .5;
}

.source-time {
  padding-left: 8px;
  font-weight: 400;
}

#more {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  align-items: center;
  float: none;
  width: 100%;
  height: 60px;
  min-height: 0;
  padding: 0 18px;
  background: #5f5f5f;
  color: white;
  font-size: 14px;
  -webkit-user-select: none;
  cursor: pointer;
}

#more g-icon {
  padding-right: 10px;
}

/* grid layout */
.grid.topics {
  padding-right: 25px;
}

.grid .item {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

.grid.topics .item {
  border: 0;
}

.grid.topics .card {
  margin-right: 0;
}

/* quilt layout */
.quilt .image {
  height: 50%;
}

@media all and (min-width: 1200px) {
  .quilt > .item:nth-of-type(8n+1) .image {
    height: 75%;
  }
}

@media all and (max-width: 1200px) {
  .quilt > .item:nth-of-type(5n+1) .image {
    height: 80%;
  }
}

/* quilt (horiz) layout */
.quilt-horiz .image {
  height: 55%;
}

@media all and (min-height: 1400px) {
  .quilt-horiz > .item:nth-of-type(8n+1) .image {
    height: 80%;
  }
}

@media all and (max-height: 1400px) {
  .quilt-horiz > .item:nth-of-type(5n+1) .image {
    height: 80%;
  }
}

.quilt-horiz #more {
  -webkit-writing-mode: horizontal-tb;
  writing-mode: horizontal-tb;
  width: 150px;
  min-width: 0;
  height: 100%;
}

/* column layout */
.column .image {
  height: 300px;
}

.column .content {
  display: block;
  overflow: hidden;
}

.column .source {
  position: relative;
  padding: 20px 0;
}

.column #more {
  display: -webkit-inline-box;
  display: -webkit-inline-flex;
  display: inline-flex;
  width: 150px;
  min-width: 0;
  height: 100%;
}


/* stream layout */
.stream .card {
  position: relative;
  height: 300px;
}
      
.stream .image {
  width: 300px;
  height: 300px;
  margin: 0;
  float: left;
  margin-right: 20px;
}

.stream .info {
  height: 300px;
  overflow: auto;
}

.stream .description {
  display: block;
}

.stream .content {
  display: block;
  overflow: hidden;
}

@media all and (max-width: 800px) {
  .stream .card {
    height: auto;
  }
  
  .stream .image {
    width: auto;
    height: 240px;
    float: none;
    margin-bottom: 20px;
  }
  
  .stream .info {
    height: auto;
  }
  
  .stream .description {
    display: none;
  }
  
  .stream .content {
    display: none;
  }
  
  .stream .source {
    position: relative;
    margin-top: 20px;
  }
}

/* list layout */
.list > .item {
  border-right: 0;
}

.list .card {
  position: relative;
  margin: 0;
  padding: 25px;
}

.list .image {
  display: none;
}

.list:not(.topics) .description {
  display: block;
}

.list .source {
  position: relative;
  margin-top: 20px;
}
</style>
    <style>/*
  grid layout
  each cell has min-width: 256px and height: 380px
*/
.flex.grid {
  display: -webkit-flex;
  -webkit-flex-wrap: wrap;
}

.flex.grid > * {
  -webkit-flex: auto;
  box-sizing: border-box;
  min-width: 256px;
  height: 380px;
}
</style>
    <style>/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */

/* list layout */
.list > .item {
  display: block;
}

/* stream layout */
.stream > .item {
  display: block;
}

/*
  column layout
  each column has width: 320px and height: 100%
*/
.column {
  position: absolute;
  top: 0;
  bottom: 0;
  white-space: nowrap;
}

.column > .item {
  display: inline-block;
  width: 320px;
  height: 100%;
  vertical-align: top;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  white-space: normal;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

/* 
  grid layout 
  each cell has min-width: 256px and height: 380px
*/
.grid > * {
  float: left;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  height: 380px;
  width: 25%;
}

/* 5 columns */
@media all and (min-width: 1280px) {
  .grid > * {
    width: 20%;
  }
}

/* 6 columns */
@media all and (min-width: 1536px) {
  .grid > * {
    width: 16.66%;
    width: -webkit-calc(100% / 6);
  }
}

/* 7 columns ... */
@media all and (min-width: 1792px) {
  .grid > * {
    width: 14.28%;
    width: -webkit-calc(100% / 7);
  }
}

/* 3 columns */
@media all and (max-width: 1023px) {
  .grid > * {
    width: 33.33%;
    width: -webkit-calc(100% / 3);
  }
}

/* 2 columns */
@media all and (max-width: 767px) {
  .grid > * {
    width: 50%;
  }
}

/* 1 column */
@media all and (max-width: 511px) {
  .grid > * {
    width: 100%;
  }
}

/* quilt layout */
.quilt > * {
  float: left;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  min-height: 350px;
}

.quilt > .item:nth-of-type(8n+1) {
  width: 50%;
  height: 700px;
}

.quilt > .item:nth-of-type(8n+2), .quilt > .item:nth-of-type(8n+3), .quilt > .item:nth-of-type(8n+4), .quilt > .item:nth-of-type(8n+5) {
  width: 25%;
}

.quilt > .item:nth-of-type(8n+6), .quilt > .item:nth-of-type(8n+7), .quilt > .item:nth-of-type(8n+8) {
  width: 33.33%;
  width: -webkit-calc(100% / 3);
}

@media all and (max-width: 1200px) {
  .quilt > .item:nth-of-type(5n+1) {
    width: 60%;
    height: 700px;
  }

  .quilt > .item:nth-of-type(5n+2), .quilt > .item:nth-of-type(5n+3) {
    width: 40%;
    height: auto;
  }

  .quilt > .item:nth-of-type(5n+4), .quilt > .item:nth-of-type(5n+5) {
    width: 50%;
    height: auto;
  }
}

/* quilt (horiz) layout */
.quilt-horiz {
  -webkit-writing-mode: vertical-lr;
  -moz-writing-mode: vertical-lr;
  -ms-writing-mode: tb-lr;
  position: absolute;
  top: 0;
  bottom: 0;
}

.quilt-horiz > * {
  float: left;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  overflow: hidden;
  min-width: 350px;
}

.quilt-horiz > * > * {
  -webkit-writing-mode: horizontal-tb;
  -moz-writing-mode: horizontal-tb;
  -ms-writing-mode: lr-tb;
}

.quilt-horiz > .item:nth-of-type(8n+1) {
  width: 700px;
  height: 50%;
}

.quilt-horiz > .item:nth-of-type(8n+2), .quilt-horiz > .item:nth-of-type(8n+3), .quilt-horiz > .item:nth-of-type(8n+4), .quilt-horiz > .item:nth-of-type(8n+5) {
  height: 25%;
}

.quilt-horiz > .item:nth-of-type(8n+6), .quilt-horiz > .item:nth-of-type(8n+7), .quilt-horiz > .item:nth-of-type(8n+8) {
  height: 33.33%;
  height: -webkit-calc(100% / 3);
}

@media all and (max-height: 1400px) {
  .quilt-horiz > .item:nth-of-type(5n+1) {
    width: 700px;
    height: 60%;
  }

  .quilt-horiz > .item:nth-of-type(5n+2), .quilt-horiz > .item:nth-of-type(5n+3) {
    width: auto;
    height: 40%;
  }

  .quilt-horiz > .item:nth-of-type(5n+4), .quilt-horiz > .item:nth-of-type(5n+5) {
    width: auto;
    height: 50%;
  }
}
</style>
    <div id="container" loaded="{{loaded}}" class="{{layout}} {{view}}">
      <template repeat="{{viewItems}}">
        <div class="item">
          <div class="card" on-tap="selectItem">
            <div class="image" style="background-image: url({{imgSrc}});" showing="{{imageShowing}}"></div>
            <div class="info">
              <div class="title">{{title}}
                <span class="unread-count">{{unread}}</span>
              </div>
              <div class="description">{{desc}}</div>
              <div class="content">{{dummyText}}</div>
              <div class="source">
                <span class="source-icon" style="background-image: url({{sourceIcon}});"></span>
                <span class="source-title">{{source}}
                  <span class="source-time">{{since}}</span>
                </span>
              </div>
            </div>
          </div>
        </div>
      </template>
      <div id="more" on-tap="loadMore">
        <g-icon src="images/refresh_lightreg.png"></g-icon>
          Load more articles
      </div>
    </div>
  </template>
  <script>
    (function() {
      function toNumber(s) {
        return Number(s.substring(0, s.length - 2));
      }
    
      function calcMaxX() {
        var maxX = 0;
        for (var i = 0; i < cards.length; i++) {
          if (maxX < cards[i].offsetLeft) { maxX = cards[i].offsetLeft; }
        }
        return maxX;
      }
      
      Polymer('pi-items-view', {
        layout: 'grid',
        loaded: true,
        pageSize: 24,
        created: function() {
          this.setAttribute('touch-action', 'scroll');
        },
        enteredDocument: function() {
          this.updateMoreShowing();
        },
        loadedChanged: function() {
          if (this.loaded && this.layout === 'grid') {
            this.animateCascade();
          }
        },
        itemsChanged: function() {
          if (this.items && this.pageSize > 0) {
            this.viewItems = this.items.slice(0, this.pageSize);
          }
          this.updateMoreShowing();
          this.scrollToTop();
        },
        scrollToTop: function() {
          requestAnimationFrame(function() {
            this.scrollTop = 0;
          }.bind(this));
        },
        updateMoreShowing: function() {
          this.$.more.style.display = 
              (this.viewItems && this.viewItems.length < 
                  (this.items && this.items.length)) ? null : 'none';
        },
        loadMore: function() {
          var l = this.viewItems.length;
          var more = this.items.slice(l, l + this.pageSize);
          this.viewItems.push.apply(this.viewItems, more);
          this.updateMoreShowing();
        },
        selectItem: function(event, detail, sender) {
          this.selected = sender.templateInstance.model;
          this.fire('select', {item: this.selected});
        },
        animateCascade: function() {
          /*
          var container = this.$.container;
          var cards = container.querySelectorAll('.item');
          
          var width = toNumber(window.getComputedStyle(cards[0]).width);
          var height = toNumber(window.getComputedStyle(cards[0]).height);
  
          var containerWidth = toNumber(window.getComputedStyle(container).width);
          var containerHeight = document.documentElement.clientHeight;
          
          var scaledMiddleX = containerWidth / width / 2;
          var scaledMiddleY = containerHeight / height / 2;
  
          var parGroup = new ParGroup();
  
          for (var i = 0; i < cards.length; i++) {
            var y = cards[i].offsetTop / height;
            var x = cards[i].offsetLeft / width;
            var yDist = scaledMiddleY - y + 0.5;
            var xDist = scaledMiddleX - x + 0.5;
            var dist = Math.sqrt(yDist * yDist + xDist * xDist);
            var yTrans = yDist * 10 / dist;
            var xTrans = xDist * 10 / dist;
            var d = x + y;
            parGroup.append(
              new Animation(cards[i], {
                opacity: ["0", "1"],
                "-webkit-transform": [
                  "translate(" + xTrans + "px, " + yTrans + "px) translateZ(0)", 
                  "translate(0px, 0px) translateZ(0)"]},
                {duration: 0.5, startDelay: 0.03 * d, fillMode: "backwards"}));
          }
          document.timeline.play(parGroup);
          */
        }
      });
    })();
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<polymer-element name="pi-story" attributes="story" assetpath="components/">
  <template>
    <style>.main {
  position: absolute;
  top: 0;
  bottom: 44px;
  width: 100%;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

.body {
  max-width: 770px;
  margin: 0 auto;
  padding: 40px;
  font-size: 12px;
}
 
.title {
  padding-bottom: 20px;
  font-size: 26px;
}

.author {
  color: #666;
}

.content {
  padding-top: 20px;
}

.content img {
  pointer-events: none;
}

.content a:link {
  text-decoration: none;
  color: #3c80f6;
}

.source-bar {
  position: absolute;
  width: 100%;
  height: 44px;
  bottom: 0;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  border-top: 1px solid #ddd;
  padding: 12px;
}

.source-bar > * {
  display: inline-block;
  vertical-align: middle;
}

.source-icon {
  width: 20px;
  height: 20px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 100% 100%;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.source-title {
  padding-left: 2px;
  font-weight: 600;
  font-size: 12px;
  opacity: .5;
}

.source-time {
  padding-left: 8px;
  font-weight: 400;
}

@media screen and (max-width: 1024px) {
  .body {
    max-width: 688px;
  }
}

@media screen and (max-width: 800px) {
  .main {
    bottom: 0;
  }
  
  .body {
    padding: 15px;
  }
  
  .content img {
    max-width: 100%;
    height: auto;
  }
  
  .source-bar {
    display: none;
  }
}</style>
    <template if="{{story}}">
      <div class="main" touch-action="pan-y">
        <div class="body">
          <div class="title">{{story.title}}</div>
          <div class="author">by {{story.author}} on {{story.publishedLocaleDate}}</div>
          <div id="content" class="content"></div>
        </div>
      </div>
      <div class="source-bar">
        <div class="source-icon" style="background-image: url({{story.sourceIcon}});"></div>
        <div class="source-title">{{story.source}}
          <span class="source-time">{{story.since}}</span>
        </div>
      </div>
    </template>
  </template>
  <script>
    Polymer('pi-story', {
      content: '',
      created: function() {
        if (!this.hasAttribute('tabindex')) {
          this.tabIndex = -1;
        }
      },
      storyChanged: function() {
        var c = this.story && this.story.content;
        if (c) {
          this.content = c;
          if (!this.story.publishedLocaleDate) {
            var d = new Date(this.story.publishedDate);
            this.story.publishedLocaleDate = d.toLocaleString();
          }
        }
      },
      contentChanged: function() {
        var content = this.content || '';
        if (content) {
          content = content.replace(/(<iframe.*?>.*?<\/iframe>)/g, '');
          content = content.replace(/<a/g, '<a target="' + this.targetWindow + '" ');
        }
        this.$.content.innerHTML = content;
      }
    });
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->





<polymer-element name="pi-feed-viewer" attributes="topics topic stories story layout topicsLayout panel loading disableTracking" assetpath="components/">
  <template>
    <style>/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
@host {
  * {
    display: -webkit-box;
    display: -webkit-flex;
    display: flex;
  }
}

.feed-viewer-panels {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  flex: 1;
  position: relative;
}

.feed-viewer-panels > * {
  background: white;
  font-size: 15px;
}

.feed-viewer-panels pi-items-view {
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

#loading {
  display: none;
  position: absolute;
  bottom: 50%;
  left: 50%;
  width: 160px;
  height: 160px;
  margin: -80px;
  background: url(images/loading.png);
  z-index: 1;
}

#loading[loading=true] {
  display: block;
}
</style>
    <g-panels id="panels" class="feed-viewer-panels" autoselect="" selected="{{panel}}" transition="keyframe" on-g-panels-select="panelSelected" on-g-panels-canselect="panelCanSelect">
      <pi-items-view id="topics" layout="{{topicsLayout}}" items="{{topics}}" view="topics" selected="{{topic}}"></pi-items-view>
      <pi-items-view id="stories" layout="{{layout}}" items="{{stories}}" view="flex" selected="{{story}}"></pi-items-view>
      <pi-story id="story" story="{{story}}" on-flick="storyFlickHandler" on-keydown="storyKeydownHandler"></pi-story>
    </g-panels>
    <div id="loading" loading="{{loading}}"></div>
    <pi-feed-aggregator id="feeds" feed="{{topic.feed}}" count="{{feedCount}}" entries="{{stories}}" loading="{{loading}}"></pi-feed-aggregator>
    <pi-feed-tracker id="tracker"></pi-feed-tracker>
  </template>
  <script>
    (function() {
      var RIGHT_ARROW_KEY = 39;
      var LEFT_ARROW_KEY = 37;
      
      Polymer('pi-feed-viewer', {
        loading: true,
        disableTracking: false,
        feedCount: 200,
        enteredDocument: function() {
          var mq = window.matchMedia('(max-width: 800px)');
          mq.addListener(this.layoutChange.bind(this));
          this.layoutChange(mq);
          this.asyncMethod('loaded');
        },
        get canPrevious() {
          return this.panel !== 'topics';
        },
        previous: function() {
          if (this.canPrevious) {
            this.$.panels.previous();
            return true;
          }
        },
        reload: function() {
          if (this.panel === 'topics') {
            this.topicsChanged();
            this.$.feeds.resetCache();
          } else if (this.panel === 'stories') {
            this.$.feeds.reload();
          }
        },
        loaded: function() {
          this.loading = false;
        },
        layoutChange: function(inQuery) {
          this.$.panels.classList.toggle('g-panels-fly-up-right', inQuery.matches);
          this.$.panels.classList.toggle('g-panels-scale-slide', !inQuery.matches);
        },
        topicsChanged: function() {
          if (this.topics) {
            this.fetchImageForTopics();
            this.updateReadCount();
          }
        },
        storiesChanged: function() {
          if (this.stories) {
            if (!this.disableTracking) {
              this.$.tracker.loadStories(this.stories);
              this.updateReadCount(this.topic);
            }
            this.panel = 'stories';
            this.$.stories.loaded = false;
            this.asyncMethod('storiesLoaded');
          }
        },
        storiesLoaded: function() {
          this.$.stories.loaded = true;
        },
        storyChanged: function() {
          if (this.story) {
            if (!this.disableTracking) {
              this.$.tracker.markRead(this.story);
              this.updateReadCount(this.topic);
            }
            this.panel = 'story';
          }
        },
        nextPrevStory: function(next, prev) {
          if (prev || next) {
            var i = this.stories.indexOf(this.story);
            var s = this.stories[i + (prev ? -1 : 1)];
            if (s) {
              this.story = s;
              return true;
            }
          }
        },
        fetchImageForTopics: function() {
          this.topics.forEach(function(t) {
            t.imgSrc = '';
            var fa = document.createElement('pi-feed-aggregator');
            fa.cancelUnbindAll();
            fa.count = 4;
            fa.addEventListener('response', function(e) {
              var ns = e.detail && e.detail.entries || [];
              ns.forEach(function(n) {
                if (n.imgSrc) {
                  var image = new Image();
                  image.onload = function(e) {
                    var img = e.currentTarget;
                    // use the image if the size > 10x10px
                    if (img.width > 10 && img.height > 10 && !t.imgSrc) {
                      t.imgSrc = img.src;
                    }
                  }.bind(this);
                  image.src = n.imgSrc;
                }
                fa.unbindAll();
              });
            });
            fa.feed = t.feed;
          });
        },
        updateReadCount: function(topic) {
          if (!this.disableTracking) {
            var topics = topic ? [topic] : this.topics;
            topics.forEach(function(t) {
              t.unread = this.feedCount - this.$.tracker.getReadCountForTopic(t);
            }.bind(this));
          }
        },
        // TODO(sorvell): handle selected event since this fires after the selection
        // is complete and this is when we want to make the following changes.
        // note, we want selected topic/story to become unset
        // when the panel that shows them is not selected, this allows
        // us to rely on topic/storyChanged to show the relevant
        // panel.
        panelSelected: function(e, detail, sender) {
          if (e.target === this.$.panels) {
            if (sender.selected === 'topics') {
              this.topic = null;
            } else if (sender.selected === 'stories') {
              this.story = null;
            }
            if (sender.selected === 'story') {
              this.$.story.focus();
            } else {
              sender.focus();
            }
          }
        },
        panelCanSelect: function(e, detail) {
          if ((detail.selected === 'stories' && (!this.stories && !this.$.feeds.loading)) || 
             (detail.selected === 'story' && !this.story)) {
            detail.preventSelect();
          }
        },
        storyKeydownHandler: function(e) {
          var n = e.keyCode === RIGHT_ARROW_KEY, p = e.keyCode === LEFT_ARROW_KEY;
          if (this.nextPrevStory(n, p)) {
            e.cancelBubble = true;
          }
        },
        storyFlickHandler: function(e) {
          if (e.majorAxis === 'x' && e.pointerType === 'touch') {
            var n = e.xVelocity < 0, p = e.xVelocity > 0;
            if (this.nextPrevStory(n, p)) {
              e.cancelBubble = true;
            }
          }
        }
      });
    })();
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<polymer-element name="speech-mic" assetpath="../../more-elements/speech-mic/">
  <template>
    <style>
      @host {
        * {
          display: inline-block;
        }
      }
      
      #mic {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: url(../../more-elements/speech-mic/images/mic.png) center no-repeat;
        cursor: pointer;
      }
      
      #mic[recognizing=true] {
        background-color: red;
        -webkit-animation: zoom 0.75s linear infinite;
      }
      
      @-webkit-keyframes zoom {
        0% {-webkit-transform: scale(0.75);}
        100% {-webkit-transform: scale(1);}
      }
    </style>
    <div id="mic" recognizing="{{recognizing}}" on-click="toggleRecognition"></div>
  </template>
  <script>
    Polymer('speech-mic', {
      publish: {
        language: 'en-US',
        transcript: '',
        completeTranscript: ''
      },
      stop: function() {
        this.recognition && this.recognition.stop();
      },
      created: function() {
        if (window.webkitSpeechRecognition) {
          this.recognition = new webkitSpeechRecognition();
          this.recognition.continuous = true;
          this.recognition.interimResults = true;
          this.recognition.lang = this.language;
          
          this.recognition.onstart = this.start.bind(this);
          this.recognition.onresult = this.result.bind(this);
          this.recognition.onerror = this.error.bind(this);
          this.recognition.onend = this.end.bind(this);
        } else {
          this.$.mic.hidden = true;
        }
      },
      toggleRecognition: function() {
        if (this.recognizing) {
          this.recognition.stop();
        } else {
          this.recognition.start();
        }
      },
      start: function(e) {
        this.recognizing = true;
      },
      result: function(e) {
        var t, ft = '', ct = '';
        for (var i = 0, r; r = e.results[i]; i++) {
          t = r[0] && r[0].transcript || '';
          ft = r.isFinal && t;
          ct += t;
        }
        this.transcript = t;
        this.completeTranscript = ct;
        this.fire('result', {results: e.results, transcript: t, 
          finalTranscript: ft, completeTranscript: ct});
      },
      error: function(e) {
      },
      end: function(e) {
        this.recognizing = false;
      }
    });
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->




<polymer-element name="pi-explore" attributes="panel topic" assetpath="components/">
  <template>
    <style>@host {
  * {
    display: -webkit-box;
    display: -webkit-flex;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-flex-flow: column;
    flex-direction: column;
  }
}

pi-feed-viewer#viewer {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  flex: 1;
}

#searchBox {
  position: relative;
  width: 100%;
  height: 50px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.16);
}

#searchInput {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0 1px;
  padding: 0 0 0 40px;
  border: 0;
  font-size: 16px;
}

#searchBox > speech-mic {
  position: absolute;
  top: 5px;
  bottom: 0;
  right: 0;
}

#searchBox > g-icon {
  position: absolute;
  top: 13px;
  bottom: 0;
  left: 10px;
}</style>
    <div id="searchBox">
      <input id="searchInput" on-input="inputChange">
      <g-icon src="images/search.png"></g-icon>
      <speech-mic id="speech" on-result="speechResult"></speech-mic>
    </div>
    <pi-feed-viewer id="viewer" topics="{{topics}}" topic="{{topic}}" panel="{{panel}}" layout="{{layout}}" topicslayout="{{layout}}" loading="{{loading}}" disabletracking=""></pi-feed-viewer>
    <pi-gfeeds query="{{query}}" on-queryresponse="queryResponse" loading="{{loading}}"></pi-gfeeds>
  </template>
  <script>
    Polymer('pi-explore', {
      layout: 'list',
      created: function() {
        this.contentNode = document.createElement('div');
      },
      get canPrevious() {
        return this.$.viewer.canPrevious;
      },
      previous: function() {
        return this.$.viewer.previous();
      },
      panelChanged: function() {
        this.$.searchBox.hidden = this.panel !== 'topics';
      },
      inputChange: function() {
        clearTimeout(this._queryJob);
        this._queryJob = setTimeout(function() {
          this.$.speech.stop();
          this.query = this.$.searchInput.value;
        }.bind(this), 500);
      },
      speechResult: function(e, detail) {
        this.$.searchInput.value = detail.transcript;
        this.inputChange();
      },
      queryResponse: function(e, detail) {
        var n = this.contentNode;
        this.topics = [];
        detail.entries.forEach(function(e) {
          // unescape html content
          n.innerHTML = e.title;
          var t = n.textContent.trim();
          this.topics.push({title: t, feed: [{feed: e.url}]});
        }.bind(this));
      }
    });
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<script>
/**
 * CoolClock 2.1.4
 * Copyright 2010, Simon Baird
 * Released under the BSD License.
 *
 * Display an analog clock using canvas.
 * http://randomibis.com/coolclock/
 *
 */

// Constructor for CoolClock objects
window.CoolClock = function(options) {
  return this.init(options);
}

// Config contains some defaults, and clock skins
CoolClock.config = {
  tickDelay: 1000,
  longTickDelay: 15000,
  defaultRadius: 85,
  renderRadius: 100,
  defaultSkin: "chunkySwiss",
  // Should be in skin probably...
  // (TODO: allow skinning of digital display)
  showSecs: true,
  showAmPm: true,

  skins:  {
    // There are more skins in moreskins.js
    // Try making your own skin by copy/pasting one of these and tweaking it
    swissRail: {
      outerBorder: { lineWidth: 2, radius:95, color: "black", alpha: 1 },
      smallIndicator: { lineWidth: 2, startAt: 88, endAt: 92, color: "black", alpha: 1 },
      largeIndicator: { lineWidth: 4, startAt: 79, endAt: 92, color: "black", alpha: 1 },
      hourHand: { lineWidth: 8, startAt: -15, endAt: 50, color: "black", alpha: 1 },
      minuteHand: { lineWidth: 7, startAt: -15, endAt: 75, color: "black", alpha: 1 },
      secondHand: { lineWidth: 1, startAt: -20, endAt: 85, color: "red", alpha: 1 },
      secondDecoration: { lineWidth: 1, startAt: 70, radius: 4, fillColor: "red", color: "red", alpha: 1 }
    },
    chunkySwiss: {
      outerBorder: { lineWidth: 4, radius:97, color: "black", alpha: 1 },
      smallIndicator: { lineWidth: 4, startAt: 89, endAt: 93, color: "black", alpha: 1 },
      largeIndicator: { lineWidth: 8, startAt: 80, endAt: 93, color: "black", alpha: 1 },
      hourHand: { lineWidth: 12, startAt: -15, endAt: 60, color: "black", alpha: 1 },
      minuteHand: { lineWidth: 10, startAt: -15, endAt: 85, color: "black", alpha: 1 },
      secondHand: { lineWidth: 4, startAt: -20, endAt: 85, color: "red", alpha: 1 },
      secondDecoration: { lineWidth: 2, startAt: 70, radius: 8, fillColor: "red", color: "red", alpha: 1 }
    },
    chunkySwissOnBlack: {
      outerBorder: { lineWidth: 4, radius:97, color: "white", alpha: 1 },
      smallIndicator: { lineWidth: 4, startAt: 89, endAt: 93, color: "white", alpha: 1 },
      largeIndicator: { lineWidth: 8, startAt: 80, endAt: 93, color: "white", alpha: 1 },
      hourHand: { lineWidth: 12, startAt: -15, endAt: 60, color: "white", alpha: 1 },
      minuteHand: { lineWidth: 10, startAt: -15, endAt: 85, color: "white", alpha: 1 },
      secondHand: { lineWidth: 4, startAt: -20, endAt: 85, color: "red", alpha: 1 },
      secondDecoration: { lineWidth: 2, startAt: 70, radius: 8, fillColor: "red", color: "red", alpha: 1 }
    }

  },

  // Test for IE so we can nurse excanvas in a couple of places
  isIE: !!document.all,

  // Will store (a reference to) each clock here, indexed by the id of the canvas element
  clockTracker: {},

  // For giving a unique id to coolclock canvases with no id
  noIdCount: 0
};

// Define the CoolClock object's methods
CoolClock.prototype = {

  // Initialise using the parameters parsed from the colon delimited class
  init: function(options) {
    // Parse and store the options
    this.root           = options.root;
    this.canvasId       = options.canvasId;
    this.skinId         = options.skinId || CoolClock.config.defaultSkin;
    this.displayRadius  = options.displayRadius || CoolClock.config.defaultRadius;
    this.showSecondHand = typeof options.showSecondHand == "boolean" ? options.showSecondHand : true;
    this.gmtOffset      = (options.gmtOffset != null && options.gmtOffset != '') ? parseFloat(options.gmtOffset) : null;
    this.showDigital    = typeof options.showDigital == "boolean" ? options.showDigital : false;
    this.logClock       = typeof options.logClock == "boolean" ? options.logClock : false;
    this.logClockRev    = typeof options.logClock == "boolean" ? options.logClockRev : false;

    this.tickDelay      = CoolClock.config[ this.showSecondHand ? "tickDelay" : "longTickDelay" ];

    // Get the canvas element
    //this.canvas = document.getElementById(this.canvasId);
    this.canvas = this.findCanvas();

    // Make the canvas the requested size. It's always square.
    this.canvas.setAttribute("width",this.displayRadius*2);
    this.canvas.setAttribute("height",this.displayRadius*2);
    this.canvas.style.width = this.displayRadius*2 + "px";
    this.canvas.style.height = this.displayRadius*2 + "px";

    // Explain me please...?
    this.renderRadius = CoolClock.config.renderRadius;
    this.scale = this.displayRadius / this.renderRadius;

    // Initialise canvas context
    this.ctx = this.canvas.getContext("2d");
    this.ctx.scale(this.scale,this.scale);

    // Keep track of this object
    CoolClock.config.clockTracker[this.canvasId] = this;

    // Start the clock going
    this.tick();

    return this;
  },

  // Draw a circle at point x,y with params as defined in skin
  fullCircleAt: function(x,y,skin) {
    this.ctx.save();
    this.ctx.globalAlpha = skin.alpha;
    this.ctx.lineWidth = skin.lineWidth;

    if (!CoolClock.config.isIE) {
      this.ctx.beginPath();
    }

    if (CoolClock.config.isIE) {
      // excanvas doesn't scale line width so we will do it here
      this.ctx.lineWidth = this.ctx.lineWidth * this.scale;
    }

    this.ctx.arc(x, y, skin.radius, 0, 2*Math.PI, false);

    if (CoolClock.config.isIE) {
      // excanvas doesn't close the circle so let's fill in the tiny gap
      this.ctx.arc(x, y, skin.radius, -0.1, 0.1, false);
    }

    if (skin.fillColor) {
      this.ctx.fillStyle = skin.fillColor
      this.ctx.fill();
    }
    else {
      // XXX why not stroke and fill
      this.ctx.strokeStyle = skin.color;
      this.ctx.stroke();
    }
    this.ctx.restore();
  },

  // Draw some text centered vertically and horizontally
  drawTextAt: function(theText,x,y) {
    this.ctx.save();
    this.ctx.font = '15px sans-serif';
    var tSize = this.ctx.measureText(theText);
    if (!tSize.height) tSize.height = 15; // no height in firefox.. :(
    this.ctx.fillText(theText,x - tSize.width/2,y - tSize.height/2);
    this.ctx.restore();
  },

  lpad2: function(num) {
    return (num < 10 ? '0' : '') + num;
  },

  tickAngle: function(second) {
    // Log algorithm by David Bradshaw
    var tweak = 3; // If it's lower the one second mark looks wrong (?)
    if (this.logClock) {
      return second == 0 ? 0 : (Math.log(second*tweak) / Math.log(60*tweak));
    }
    else if (this.logClockRev) {
      // Flip the seconds then flip the angle (trickiness)
      second = (60 - second) % 60;
      return 1.0 - (second == 0 ? 0 : (Math.log(second*tweak) / Math.log(60*tweak)));
    }
    else {
      return second/60.0;
    }
  },

  timeText: function(hour,min,sec) {
    var c = CoolClock.config;
    return '' +
      (c.showAmPm ? ((hour%12)==0 ? 12 : (hour%12)) : hour) + ':' +
      this.lpad2(min) +
      (c.showSecs ? ':' + this.lpad2(sec) : '') +
      (c.showAmPm ? (hour < 12 ? ' am' : ' pm') : '')
    ;
  },

  // Draw a radial line by rotating then drawing a straight line
  // Ha ha, I think I've accidentally used Taus, (see http://tauday.com/)
  radialLineAtAngle: function(angleFraction,skin) {
    this.ctx.save();
    this.ctx.translate(this.renderRadius,this.renderRadius);
    this.ctx.rotate(Math.PI * (2.0 * angleFraction - 0.5));
    this.ctx.globalAlpha = skin.alpha;
    this.ctx.strokeStyle = skin.color;
    this.ctx.lineWidth = skin.lineWidth;

    if (CoolClock.config.isIE)
      // excanvas doesn't scale line width so we will do it here
      this.ctx.lineWidth = this.ctx.lineWidth * this.scale;

    if (skin.radius) {
      this.fullCircleAt(skin.startAt,0,skin)
    }
    else {
      this.ctx.beginPath();
      this.ctx.moveTo(skin.startAt,0)
      this.ctx.lineTo(skin.endAt,0);
      this.ctx.stroke();
    }
    this.ctx.restore();
  },

  render: function(hour,min,sec) {
    // Get the skin
    var skin = CoolClock.config.skins[this.skinId];
    if (!skin) skin = CoolClock.config.skins[CoolClock.config.defaultSkin];

    // Clear
    this.ctx.clearRect(0,0,this.renderRadius*2,this.renderRadius*2);

    // Draw the outer edge of the clock
    if (skin.outerBorder)
      this.fullCircleAt(this.renderRadius,this.renderRadius,skin.outerBorder);

    // Draw the tick marks. Every 5th one is a big one
    for (var i=0;i<60;i++) {
      (i%5)  && skin.smallIndicator && this.radialLineAtAngle(this.tickAngle(i),skin.smallIndicator);
      !(i%5) && skin.largeIndicator && this.radialLineAtAngle(this.tickAngle(i),skin.largeIndicator);
    }

    // Write the time
    if (this.showDigital) {
      this.drawTextAt(
        this.timeText(hour,min,sec),
        this.renderRadius,
        this.renderRadius+this.renderRadius/2
      );
    }

    // Draw the hands
    if (skin.hourHand)
      this.radialLineAtAngle(this.tickAngle(((hour%12)*5 + min/12.0)),skin.hourHand);

    if (skin.minuteHand)
      this.radialLineAtAngle(this.tickAngle((min + sec/60.0)),skin.minuteHand);

    if (this.showSecondHand && skin.secondHand)
      this.radialLineAtAngle(this.tickAngle(sec),skin.secondHand);

    // Second hand decoration doesn't render right in IE so lets turn it off
    if (!CoolClock.config.isIE && this.showSecondHand && skin.secondDecoration)
      this.radialLineAtAngle(this.tickAngle(sec),skin.secondDecoration);
  },

  // Check the time and display the clock
  refreshDisplay: function() {
    var now = new Date();
    if (this.gmtOffset != null) {
      // Use GMT + gmtOffset
      var offsetNow = new Date(now.valueOf() + (this.gmtOffset * 1000 * 60 * 60));
      this.render(offsetNow.getUTCHours(),offsetNow.getUTCMinutes(),offsetNow.getUTCSeconds());
    }
    else {
      // Use local time
      this.render(now.getHours(),now.getMinutes(),now.getSeconds());
    }
  },

  // Set timeout to trigger a tick in the future
  nextTick: function() {
    setTimeout("CoolClock.config.clockTracker['"+this.canvasId+"'].tick()",this.tickDelay);
  },

  // Check the canvas element hasn't been removed
  stillHere: function() {
    //return document.getElementById(this.canvasId) != null;
    return this.findCanvas() !== null;
  },

  // Main tick handler. Refresh the clock then setup the next tick
  tick: function() {
    if (this.stillHere()) {
      this.refreshDisplay()
      this.nextTick();
    }
  },
  
  // find canvas
  findCanvas: function() {
    return (this.root || document).querySelector("[id=" + this.canvasId + "]");
  }
};

// Find all canvas elements that have the CoolClock class and turns them into clocks
CoolClock.findAndCreateClocks = function(root) {
  // (Let's not use a jQuery selector here so it's easier to use frameworks other than jQuery)
  var canvases = (root || document).getElementsByTagName("canvas");
  for (var i=0;i<canvases.length;i++) {
    // Pull out the fields from the class. Example "CoolClock:chunkySwissOnBlack:1000"
    var fields = canvases[i].className.split(" ")[0].split(":");
    if (fields[0] == "CoolClock") {
      if (!canvases[i].id) {
        // If there's no id on this canvas element then give it one
        canvases[i].id = '_coolclock_auto_id_' + CoolClock.config.noIdCount++;
      }
      // Create a clock object for this element
      new CoolClock({
        root:           root,
        canvasId:       canvases[i].id,
        skinId:         fields[1],
        displayRadius:  fields[2],
        showSecondHand: fields[3]!='noSeconds',
        gmtOffset:      fields[4],
        showDigital:    fields[5]=='showDigital',
        logClock:       fields[6]=='logClock',
        logClockRev:    fields[6]=='logClockRev'
      });
    }
  }
};

// If you don't have jQuery then you need a body onload like this: <body onload="CoolClock.findAndCreateClocks()">
// If you do have jQuery and it's loaded already then we can do it right now
if (window.jQuery) jQuery(document).ready(CoolClock.findAndCreateClocks);

CoolClock.config.skins = {

  swissRail: {
    outerBorder:      { lineWidth: 2, radius: 95, color: "black", alpha: 1 },
    smallIndicator:   { lineWidth: 2, startAt: 88, endAt: 92, color: "black", alpha: 1 },
    largeIndicator:   { lineWidth: 4, startAt: 79, endAt: 92, color: "black", alpha: 1 },
    hourHand:         { lineWidth: 8, startAt: -15, endAt: 50, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 7, startAt: -15, endAt: 75, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 1, startAt: -20, endAt: 85, color: "red", alpha: 1 },
    secondDecoration: { lineWidth: 1, startAt: 70, radius: 4, fillColor: "red", color: "red", alpha: 1 }
  },

  chunkySwiss: {
    outerBorder:      { lineWidth: 4, radius: 97, color: "black", alpha: 1 },
    smallIndicator:   { lineWidth: 4, startAt: 89, endAt: 93, color: "black", alpha: 1 },
    largeIndicator:   { lineWidth: 8, startAt: 80, endAt: 93, color: "black", alpha: 1 },
    hourHand:         { lineWidth: 12, startAt: -15, endAt: 60, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 10, startAt: -15, endAt: 85, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 4, startAt: -20, endAt: 85, color: "red", alpha: 1 },
    secondDecoration: { lineWidth: 2, startAt: 70, radius: 8, fillColor: "red", color: "red", alpha: 1 }
  },

  chunkySwissOnBlack: {
    outerBorder:      { lineWidth: 4, radius: 97, color: "white", alpha: 1 },
    smallIndicator:   { lineWidth: 4, startAt: 89, endAt: 93, color: "white", alpha: 1 },
    largeIndicator:   { lineWidth: 8, startAt: 80, endAt: 93, color: "white", alpha: 1 },
    hourHand:         { lineWidth: 12, startAt: -15, endAt: 60, color: "white", alpha: 1 },
    minuteHand:       { lineWidth: 10, startAt: -15, endAt: 85, color: "white", alpha: 1 },
    secondHand:       { lineWidth: 4, startAt: -20, endAt: 85, color: "red", alpha: 1 },
    secondDecoration: { lineWidth: 2, startAt: 70, radius: 8, fillColor: "red", color: "red", alpha: 1 }
  },

  fancy: {
    outerBorder:      { lineWidth: 5, radius: 95, color: "green", alpha: 0.7 },
    smallIndicator:   { lineWidth: 1, startAt: 80, endAt: 93, color: "black", alpha: 0.4 },
    largeIndicator:   { lineWidth: 1, startAt: 30, endAt: 93, color: "black", alpha: 0.5 },
    hourHand:         { lineWidth: 8, startAt: -15, endAt: 50, color: "blue", alpha: 0.7 },
    minuteHand:       { lineWidth: 7, startAt: -15, endAt: 92, color: "red", alpha: 0.7 },
    secondHand:       { lineWidth: 10, startAt: 80, endAt: 85, color: "blue", alpha: 0.3 },
    secondDecoration: { lineWidth: 1, startAt: 30, radius: 50, fillColor: "blue", color: "red", alpha: 0.15 }
  },

  machine: {
    outerBorder:      { lineWidth: 60, radius: 55, color: "#dd6655", alpha: 1 },
    smallIndicator:   { lineWidth: 4, startAt: 80, endAt: 95, color: "white", alpha: 1 },
    largeIndicator:   { lineWidth: 14, startAt: 77, endAt: 92, color: "#dd6655", alpha: 1 },
    hourHand:         { lineWidth: 18, startAt: -15, endAt: 40, color: "white", alpha: 1 },
    minuteHand:       { lineWidth: 14, startAt: 24, endAt: 100, color: "#771100", alpha: 0.5 },
    secondHand:       { lineWidth: 3, startAt: 22, endAt: 83, color: "green", alpha: 0 },
    secondDecoration: { lineWidth: 1, startAt: 52, radius: 26, fillColor: "#ffcccc", color: "red", alpha: 0.5 }
  },

  simonbaird_com: {
    hourHand:         { lineWidth: 80, startAt: -15, endAt: 35,  color: 'magenta', alpha: 0.5 },
    minuteHand:       { lineWidth: 80, startAt: -15, endAt: 65,  color: 'cyan', alpha: 0.5 },
    secondDecoration: { lineWidth: 1,  startAt: 40,  radius: 40, color: "#fff", fillColor: 'yellow', alpha: 0.5 }
  },

  // by bonstio, http://bonstio.net
  classic/*was gIG*/: {
    outerBorder:      { lineWidth: 185, radius: 1, color: "#E5ECF9", alpha: 1 },
    smallIndicator:   { lineWidth: 2, startAt: 89, endAt: 94, color: "#3366CC", alpha: 1 },
    largeIndicator:   { lineWidth: 4, startAt: 83, endAt: 94, color: "#3366CC", alpha: 1 },
    hourHand:         { lineWidth: 5, startAt: 0, endAt: 60, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 4, startAt: 0, endAt: 80, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 1, startAt: -20, endAt: 85, color: "red", alpha: .85 },
    secondDecoration: { lineWidth: 3, startAt: 0, radius: 2, fillColor: "black", color: "black", alpha: 1 }
  },

  modern/*was gIG2*/: {
    outerBorder:      { lineWidth: 185, radius: 1, color: "#E5ECF9", alpha: 1 },
    smallIndicator:   { lineWidth: 5, startAt: 88, endAt: 94, color: "#3366CC", alpha: 1 },
    largeIndicator:   { lineWidth: 5, startAt: 88, endAt: 94, color: "#3366CC", alpha: 1 },
    hourHand:         { lineWidth: 8, startAt: 0, endAt: 60, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 8, startAt: 0, endAt: 80, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 5, startAt: 80, endAt: 85, color: "red", alpha: .85 },
    secondDecoration: { lineWidth: 3, startAt: 0, radius: 4, fillColor: "black", color: "black", alpha: 1 }
  },

  simple/*was gIG3*/: {
    outerBorder:      { lineWidth: 185, radius: 1, color: "#E5ECF9", alpha: 1 },
    smallIndicator:   { lineWidth: 10, startAt: 90, endAt: 94, color: "#3366CC", alpha: 1 },
    largeIndicator:   { lineWidth: 10, startAt: 90, endAt: 94, color: "#3366CC", alpha: 1 },
    hourHand:         { lineWidth: 8, startAt: 0, endAt: 60, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 8, startAt: 0, endAt: 80, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 5, startAt: 80, endAt: 85, color: "red", alpha: .85 },
    secondDecoration: { lineWidth: 3, startAt: 0, radius: 4, fillColor: "black", color: "black", alpha: 1 }
  },

  // by securephp
  securephp: {
    outerBorder:      { lineWidth: 100, radius: 0.45, color: "#669900", alpha: 0.3 },
    smallIndicator:   { lineWidth: 2, startAt: 80, endAt: 90 , color: "green", alpha: 1 },
    largeIndicator:   { lineWidth: 8.5, startAt: 20, endAt: 40 , color: "green", alpha: 0.4 },
    hourHand:         { lineWidth: 3, startAt: 0, endAt: 60, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 2, startAt: 0, endAt: 75, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 1, startAt: -10, endAt: 80, color: "blue", alpha: 0.8 },
    secondDecoration: { lineWidth: 1, startAt: 70, radius: 4, fillColor: "blue", color: "red", alpha: 1 }
  },

  Tes2: {
    outerBorder:      { lineWidth: 4, radius: 95, color: "black", alpha: 0.5 },
    smallIndicator:   { lineWidth: 1, startAt: 10, endAt: 50 , color: "#66CCFF", alpha: 1 },
    largeIndicator:   { lineWidth: 8.5, startAt: 60, endAt: 70, color: "#6699FF", alpha: 1 },
    hourHand:         { lineWidth: 5, startAt: -15, endAt: 60, color: "black", alpha: 0.7 },
    minuteHand:       { lineWidth: 3, startAt: -25, endAt: 75, color: "black", alpha: 0.7 },
    secondHand:       { lineWidth: 1.5, startAt: -20, endAt: 88, color: "red", alpha: 1 },
    secondDecoration: { lineWidth: 1, startAt: 20, radius: 4, fillColor: "blue", color: "red", alpha: 1 }
  },


  Lev: {
    outerBorder:      { lineWidth: 10, radius: 95, color: "#CCFF33", alpha: 0.65 },
    smallIndicator:   { lineWidth: 5, startAt: 84, endAt: 90, color: "#996600", alpha: 1 },
    largeIndicator:   { lineWidth: 40, startAt: 25, endAt: 95, color: "#336600", alpha: 0.55 },
    hourHand:         { lineWidth: 4, startAt: 0, endAt: 65, color: "black", alpha: 0.9 },
    minuteHand:       { lineWidth: 3, startAt: 0, endAt: 80, color: "black", alpha: 0.85 },
    secondHand:       { lineWidth: 1, startAt: 0, endAt: 85, color: "black", alpha: 1 },
    secondDecoration: { lineWidth: 2, startAt: 5, radius: 10, fillColor: "black", color: "black", alpha: 1 }
  },

  Sand: {
    outerBorder:      { lineWidth: 1, radius: 70, color: "black", alpha: 0.5 },
    smallIndicator:   { lineWidth: 3, startAt: 50, endAt: 70, color: "#0066FF", alpha: 0.5 },
    largeIndicator:   { lineWidth: 200, startAt: 80, endAt: 95, color: "#996600", alpha: 0.75 },
    hourHand:         { lineWidth: 4, startAt: 0, endAt: 65, color: "black", alpha: 0.9 },
    minuteHand:       { lineWidth: 3, startAt: 0, endAt: 80, color: "black", alpha: 0.85 },
    secondHand:       { lineWidth: 1, startAt: 0, endAt: 85, color: "black", alpha: 1 },
    secondDecoration: { lineWidth: 2, startAt: 5, radius: 10, fillColor: "black", color: "black", alpha: 1 }
  },

  Sun: {
    outerBorder:      { lineWidth: 100, radius: 140, color: "#99FFFF", alpha: 0.2 },
    smallIndicator:   { lineWidth: 300, startAt: 50, endAt: 70, color: "black", alpha: 0.1 },
    largeIndicator:   { lineWidth: 5, startAt: 80, endAt: 95, color: "black", alpha: 0.65 },
    hourHand:         { lineWidth: 4, startAt: 0, endAt: 65, color: "black", alpha: 0.9 },
    minuteHand:       { lineWidth: 3, startAt: 0, endAt: 80, color: "black", alpha: 0.85 },
    secondHand:       { lineWidth: 1, startAt: 0, endAt: 90, color: "black", alpha: 1 },
    secondDecoration: { lineWidth: 2, startAt: 5, radius: 10, fillColor: "black", color: "black", alpha: 1 }
  },

  Tor: {
    outerBorder:      { lineWidth: 10, radius: 88, color: "#996600", alpha: 0.9 },
    smallIndicator:   { lineWidth: 6, startAt: -10, endAt: 73, color: "green", alpha: 0.3 },
    largeIndicator:   { lineWidth: 6, startAt: 73, endAt: 100, color: "black", alpha: 0.65 },
    hourHand:         { lineWidth: 4, startAt: 0, endAt: 65, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 3, startAt: 0, endAt: 80, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 1, startAt: -73, endAt: 73, color: "black", alpha: 0.8 },
    secondDecoration: { lineWidth: 2, startAt: 5, radius: 10, fillColor: "black", color: "black", alpha: 1 }
  },

  Cold: {
    outerBorder:      { lineWidth: 15, radius: 90, color: "black", alpha: 0.3 },
    smallIndicator:   { lineWidth: 15, startAt: -10, endAt: 95, color: "blue", alpha: 0.1 },
    largeIndicator:   { lineWidth: 3, startAt: 80, endAt: 95, color: "blue", alpha: 0.65 },
    hourHand:         { lineWidth: 4, startAt: 0, endAt: 65, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 3, startAt: 0, endAt: 80, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 1, startAt: 0, endAt: 85, color: "black", alpha: 0.8 },
    secondDecoration: { lineWidth: 5, startAt: 30, radius: 10, fillColor: "black", color: "black", alpha: 1 }
  },

  Babosa: {
    outerBorder:      { lineWidth: 100, radius: 25, color: "blue", alpha: 0.25 },
    smallIndicator:   { lineWidth: 3, startAt: 90, endAt: 95, color: "#3366CC", alpha: 1 },
    largeIndicator:   { lineWidth: 4, startAt: 75, endAt: 95, color: "#3366CC", alpha: 1 },
    hourHand:         { lineWidth: 4, startAt: 0, endAt: 60, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 3, startAt: 0, endAt: 85, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 12, startAt: 75, endAt: 90, color: "red", alpha: 0.8 },
    secondDecoration: { lineWidth: 3, startAt: 0, radius: 4, fillColor: "black", color: "black", alpha: 1 }
  },

  Tumb: {
    outerBorder:      { lineWidth: 105, radius: 5, color: "green", alpha: 0.4 },
    smallIndicator:   { lineWidth: 1, startAt: 93, endAt: 98, color: "green", alpha: 1 },
    largeIndicator:   { lineWidth: 50, startAt: 0, endAt: 89, color: "red", alpha: 0.14 },
    hourHand:         { lineWidth: 4, startAt: 0, endAt: 65, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 3, startAt: 0, endAt: 80, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 1, startAt: 0, endAt: 85, color: "black", alpha: 0.8 },
    secondDecoration: { lineWidth: 5, startAt: 50, radius: 90, fillColor: "black", color: "black", alpha: 0.05 }
  },

  Stone: {
    outerBorder:      { lineWidth: 15, radius: 80, color: "#339933", alpha: 0.5 },
    smallIndicator:   { lineWidth: 2, startAt: 70, endAt: 90, color: "#FF3300", alpha: 0.7 },
    largeIndicator:   { lineWidth: 15, startAt: 0, endAt: 29, color: "#FF6600", alpha: 0.3 },
    hourHand:         { lineWidth: 4, startAt: 0, endAt: 65, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 3, startAt: 0, endAt: 75, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 1, startAt: 0, endAt: 85, color: "black", alpha: 0.8 },
    secondDecoration: { lineWidth: 5, startAt: 50, radius: 90, fillColor: "black", color: "black", alpha: 0.05 }
  },

  Disc: {
    outerBorder:      { lineWidth: 105, radius: 1, color: "#666600", alpha: 0.2 },
    smallIndicator:   { lineWidth: 1, startAt: 58, endAt: 95, color: "#669900", alpha: 0.8 },
    largeIndicator:   { lineWidth: 6, startAt: 25, endAt: 35, color: "#666600", alpha: 1 },
    hourHand:         { lineWidth: 4, startAt: 0, endAt: 65, color: "black", alpha: 1 },
    minuteHand:       { lineWidth: 3, startAt: 0, endAt: 75, color: "black", alpha: 1 },
    secondHand:       { lineWidth: 1, startAt: -75, endAt: 75, color: "#99CC00", alpha: 0.8 },
    secondDecoration: { lineWidth: 5, startAt: 50, radius: 90, fillColor: "#00FF00", color: "green", alpha: 0.05 }
  },

  // By Yoo Nhe
  watermelon: {
    outerBorder:      { lineWidth: 100, radius: 1.7, color: "#d93d04", alpha: 5 },
    smallIndicator:   { lineWidth: 2, startAt: 50, endAt: 70, color: "#d93d04", alpha: 5 },
    largeIndicator:   { lineWidth: 2, startAt: 45, endAt: 94, color: "#a9bf04", alpha: 1 },
    hourHand:         { lineWidth: 5, startAt: -20, endAt: 80, color: "#8c0d17", alpha: 1 },
    minuteHand:       { lineWidth: 2, startAt: -20, endAt: 80, color: "#7c8c03", alpha: .9 },
    secondHand:       { lineWidth: 2, startAt: 70, endAt: 94, color: "#d93d04", alpha: .85 },
    secondDecoration: { lineWidth: 1, startAt: 70, radius: 3, fillColor: "red", color: "black", alpha: .7 }
  }
};


</script>
<polymer-element name="cool-clock" attributes="skin" assetpath="../../more-elements/cool-clock/">
  <template>
    <span id="clock"></span>
  </template>
  <script>
    Polymer('cool-clock', {
      skin: '', //'Babosa',
      created: function() {
        
      },
      skinChanged: function() {
        this.canvas.className = 'CoolClock:' + this.skin;
      },
      enteredDocument: function() {
        // TODO(sorvell): create the canvas element manually becase ios 
        // does not render the canvas element if it is not created in the
        // main document (component templates are created in a 
        // different document). See:
        // https://bugs.webkit.org/show_bug.cgi?id=109073.
        this.canvas = document.createElement('canvas');
        this.$.clock.appendChild(this.canvas);
        // if not specified, choose a random skin
        if (!this.skin) {
          var skins = Object.keys(CoolClock.config.skins);
          var i = Math.floor(Math.random() * skins.length);
          this.skin = skins[i];
        }
        this.async(function() {
          CoolClock.findAndCreateClocks(this.$.clock);
        });
      }
    });    
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
/**
 * polymer-jsonp can be used to perform JSONP requests.
 
 * Example:
 *
 *     <polymer-jsonp url="https://clients1.google.com/finance/info?q=GOOG&client=ig&callback="
 *         response="{{data}}"></polymer-jsonp>
 *
 * @class polymer-jsonp
 */
/**
 * Fired when a response is received.
 *
 * @event polymer-response
 */
-->
<polymer-element name="polymer-jsonp" attributes="url response auto bustCache" assetpath="../../polymer-elements/polymer-jsonp/">
  <script>
    (function() {
      Polymer('polymer-jsonp', {
        /**
         * The URL target of the request.
         * 
         * @attribute url
         * @type string
         * @default ''
         */
        url: '',
        /**
         * Returns the response object.
         *
         * @attribute response
         * @type Object
         * @default null
         */
        response: null,
        bustCache: false,
        auto: false,
        urlChanged: function() {
          if (this.url && this.auto) {
            this.go();
          }
        },
        /**
         * Performs a JSONP request to the url specified.
         *
         * @method go
         */
        go: function() {
          if (!this.isInFlight()) {
            this.callbackFunc = JSONP_CALLBACK_FUNC_NAME + callbackId++;
            window[this.callbackFunc] = this.respond.bind(this);
            var url = this.url + this.callbackFunc + (this.bustCache ? '&' + Math.random() : '');
            this.addScript(url);
          }
        },
        isInFlight: function() {
          return !!this.script;
        },
        addScript: function(inSrc) {
          this.script = document.createElement('script');
          this.script.src = inSrc;
          this.script.onerror = this.respond.bind(this);
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(this.script, s);
        },
        removeScript: function() {
          if (this.script.parentNode) {
            this.script.parentNode.removeChild(this.script);
          }
          this.script = null;
        },
        respond: function(inResponse) {
          this.response = inResponse;
          this.removeScript();
          delete window[this.callbackFunc];
          this.fire('polymer-response', {response: inResponse});
        }
      });
      var JSONP_CALLBACK_FUNC_NAME = '_polymer_jsonp_callback_';
      var callbackId = 0;
    })();
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
/**
 * polymer-media-query can be used to data bind to a CSS media query.
 * The "query" property is a bare CSS media query.
 * The "queryMatches" property will be a boolean representing if the page matches that media query.
 *
 * polymer-media-query uses media query listeners to dynamically update the "queryMatches" property.
 * A "polymer-mediachange" event also fires when queryMatches changes.
 *
 * Example:
 *
 *      <polymer-media-query query="max-width: 640px" queryMatches="{{phoneScreen}}"></polymer-media-query>
 *
 * @class polymer-media-query
 */
-->
<polymer-element name="polymer-media-query" attributes="query queryMatches" assetpath="../../polymer-elements/polymer-media-query/">
  <template>
    <style>
      @host {
        * {
          display: none;
        }
      }
    </style>
  </template>
  <script>

    Polymer('polymer-media-query', {
      /**
       * The Boolean return value of the media query
       * @attribute queryMatches
       * @type Boolean
       * @default false
       */
      queryMatches: false,
      /**
       * The CSS media query to evaulate
       * @attribute query
       * @type string
       * @default ''
       */
      query: '',
      created: function() {
        this._mqHandler = this.queryHandler.bind(this);
        this._mq = null;
      },
      queryChanged: function() {
        if (this._mq) {
          this._mq.removeListener(this._mqHandler);
        }
        this._mq = window.matchMedia('(' + this.query + ')');
        this._mq.addListener(this._mqHandler);
        this.queryHandler(this._mq);
      },
      queryHandler: function(mq) {
        this.queryMatches = mq.matches;
        this.asyncFire('polymer-mediachange', mq);
      }
    });
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->



<polymer-element name="polymer-stock" attributes="symbol autoupdate responsiveWidth" assetpath="../../more-elements/polymer-stock/">
  <template>
    <style>.stock-label {
  font-family: arial,sans-serif;
  font-size: medium;
  font-weight: lighter;
  color: #878787;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.large {
  font-size: x-large;
}

.small {
  font-size: small;
}

.stock-desc {
  text-transform: uppercase;
}

.quote {
  margin-top: 10px;
}

.price {
  color: #212121;
  margin-right: 10px;
}

.change {
  color: #3d9400;
}

.change.down {
  color: #dd4b39;
}

.more {
  margin-top: 20px;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
}

.chart {
  margin-right: 20px;
}

.details {
  width: 120px;
}

.details > * {
  line-height: 1.4;
}

.details > * > :first-child {
  display: inline-block;
  width: 60px;
}
</style>
    <div class="stock-label large">{{response.name}}</div>
    <div class="stock-label stock-desc">{{response.e}}: {{symbol}}</div>
    <div class="stock-label large quote">
      <span class="price">{{response.l}}</span>
      <span class="change {{change}}">{{response.c}} ({{response.cp}}%)</span>
    </div>
    <div class="more">
      <div class="chart">
        <img src="https://www.google.com/finance/chart?q={{response.e}}:{{symbol}}&amp;tlf=12&amp;chst=vks&amp;p=1d&amp;chs={{chartWidth}}x96&amp;chsc=1&amp;nocache={{random}}">
      </div>
      <div class="stock-label small details" hidden?="{{queryMatches}}">
        <div><label>Open</label>{{response.op}}</div>
        <div><label>High</label>{{response.hi}}</div>
        <div><label>Low</label>{{response.lo}}</div>
        <div><label>Volume</label>{{response.vo}}</div>
        <div><label>Avg Vol</label>{{response.avvo}}</div>
        <div><label>Mkt Cap</label>{{response.mc}}</div>
      </div>
    </div>
    <polymer-jsonp id="jsonp" response="{{jsonpResponse}}"></polymer-jsonp>
    <polymer-media-query query="max-width: {{responsiveWidth}}" querymatches="{{queryMatches}}"></polymer-media-query>
  </template>
  <script>
    Polymer('polymer-stock', {
      symbol: '',
      autoupdate: false,
      responsiveWidth: '460px',
      updateinterval: 60000,
      jsonpResponse: null,
      queryMatches: false,
      created: function() {
        this.queryMatchesChanged()
      },
      go: function() {
        this.$.jsonp.url = 'https://clients1.google.com/finance/info?q=' + 
            this.symbol + '&client=ob&infotype=infoonebox&callback=';
        this.$.jsonp.go();
      },
      symbolChanged: function() {
        if (this.symbol) {
          this.go();
        }
      },
      queryMatchesChanged: function() {
        this.chartWidth = this.queryMatches ? 256 : 327; 
      },
      autoupdateChanged: function() {
        if (this.autoupdate) {
          this.intervalId = setInterval(this.go.bind(this), this.updateinterval);
        } else if (this.intervalId) {
          clearInterval(this.intervalId);
        }
      },
      jsonpResponseChanged: function() {
        var r = this.response = this.jsonpResponse && this.jsonpResponse[0];
        if (r) {
          this.random = Math.random() * 10000;
          this.change = Number(r.c) >= 0 ? 'up' : 'down';
        }
      }
    });
  </script>
</polymer-element>

<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->

<polymer-element name="wu-weather" attributes="autoupdate" assetpath="../../more-elements/wu-weather/">
  <template>
    <style>
      @host {
        * {
          font-family: arial,sans-serif;
          font-size: medium;
          font-weight: lighter;
          color: #878787;
        }
      }
      .location {
        font-size: x-large;
      }
      .temperature, .weather {
        font-size: large;
        color: #000000;
      }
      .current-icon {
        float: left;
        margin-right: 10px;
      }
      .forecast {
        clear: both;
        margin-top: 10px;
      }
      .forecast-day {
        display: inline-block;
        padding: 5px;
        text-align: center;
      }
      .forecast-day div {
        font-size: small;
      }
    </style>
    <h1 class="location">
      {{current.display_location.full}}
    </h1>
    <template bind="{{current}}">
      <img class="current-icon" src="{{icon_url}}">
      <div class="weather">{{weather}}</div>
      <div class="temperature">{{temperature_string}}</div>
    </template>
    <div class="forecast">
      <template repeat="{{forecast.forecastday}}">
        <div class="forecast-day">
          <div class="date">{{date.weekday_short}}</div>
          <img class="forecast-icon" src="{{icon_url}}" width="36px" height="36px">
          <div class="high-low">
            {{high.fahrenheit}}/{{low.fahrenheit}} &deg;F
          </div>
          <div class="high-low">
            ({{high.celsius}}/{{low.celsius}} &deg;C)
          </div>
        </div>
      </template>
    </div>
    <polymer-jsonp id="jsonp_current" handleas="json" response="{{currentConditionsResponse}}"></polymer-jsonp>
    <polymer-jsonp id="jsonp_forecast" handleas="json" response="{{forecastResponse}}"></polymer-jsonp>
  </template>
  <script>
    Polymer('wu-weather', {
      position: null,
      currentConditionsResponse: null,
      forecastResponse: null,
      updateInterval: 60000,
      apikey: '6d9e44e91f890cae',
      position: {
        coords: {
          latitude: 37.773285,
          longitude: -122.417725
        }
      },
      enteredDocument: function() {
        this.loadFromStorage();
        this.canAutoUpdate = true;
        this.autoupdateChanged();
      },
      leftDocument: function() {
        this.canAutoUpdate = false;
        this.autoupdateChanged();
      },
      loadFromStorage: function() {
        var data = localStorage.getItem('wu-weather-data');
        var cached = data && JSON.parse(data);
        // Discard stored data if it's too old.
        if (!cached ||
            (new Date() - cached.timestamp) > (60 * 60 * 1000)) {
          this.positionChanged();
          this.updatePosition();
          return;
        }
        this.current = cached.current;
        this.forecast = cached.forecast;
      },
      saveToStorage: function() {
        // Only store when we have all the data.
        if (this.current && this.forecast) {
          var data = {
            current: this.current,
            forecast: this.forecast,
            timestamp: new Date().getTime()
          };
          localStorage.setItem('wu-weather-data', JSON.stringify(data));
        }
      },
      autoupdateChanged: function() {
        if (this.autoupdate && this.canAutoUpdate) {
          if (!this.intervalId) {
            this.intervalId = setInterval(this.updatePosition.bind(this),
                this.updateInterval);
          }
        } else {
          clearInterval(this.intervalId);
          this.intervalId = null;
        }
      },
      positionChanged: function() {
        if (!this.$.jsonp_current.isInFlight()) {
          this.$.jsonp_current.url = 'https://api.wunderground.com/api/' +
              this.apikey + '/conditions/q/' +
              this.position.coords.latitude + ',' +
              this.position.coords.longitude + '.json?callback=';
          this.$.jsonp_current.go();
        }
        if (!this.$.jsonp_forecast.isInFlight()) {
          this.$.jsonp_forecast.url = 'https://api.wunderground.com/api/' +
              this.apikey + '/forecast/q/' +
              this.position.coords.latitude + ',' +
              this.position.coords.longitude + '.json?callback=';
          this.$.jsonp_forecast.go();
        }
      },
      currentConditionsResponseChanged: function() {
        this.current = this.currentConditionsResponse.current_observation;
        this.saveToStorage();
      },
      forecastResponseChanged: function() {
        this.forecast = this.forecastResponse.forecast.simpleforecast;
        this.saveToStorage();
      },
      updatePosition: function() {
        // Get the current location.
        navigator.geolocation.getCurrentPosition(
            this.getCurrentPositionSuccess.bind(this),
            this.getCurrentPositionError.bind(this), {timeout: 10000});
      },
      getCurrentPositionSuccess: function(position) {
        this.position = position;
      },
      getCurrentPositionError: function(error) {
        console.log('PositionError', error);
      }
    });
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->



<polymer-element name="pi-home" attributes="stocks" assetpath="components/">
  <template>
    <style>@host {
  * {
    display: block;
    width: 100%;
    height: 100%;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }
}

.widgets {
  width: 1024px;
  box-sizing: border-box;
  -mox-box-sizing: border-box;
  padding: 6px;
  margin: 0 auto;
}

.widgets > *:not(template) {
  display: inline-block;
  width: 491px;
  height: 250px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  vertical-align: top;
  margin: 8px 6px;
  padding: 4px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.2);
}

.center {
  text-align: center;
}

cool-clock {
  display: block;
  padding-top: 30px;
}

wu-weather {
  display: inline-block;
  box-shadow: none;
  text-align: left;
  padding: 0;
}

@media screen and (max-width: 1023px) {
  .widgets {
    width: 512px;
  }
}

@media screen and (max-width: 600px) {
  .widgets {
    width: auto;
  }
  
  .widgets > *:not(template) {
    display: block;
    width: auto;
    margin-bottom: 12px;
  }
}</style>
    <div class="widgets">
      <div class="center">
        <cool-clock></cool-clock>
      </div>
      <div class="center">
        <wu-weather autoupdate="false"></wu-weather>
      </div>
      <template repeat="{{stocks}}">
        <polymer-stock symbol="{{}}" autoupdate="false">
      </polymer-stock></template>
    </div>
  </template>
  <script>
    Polymer('pi-home', {
      created: function() {
        this.asyncFire('ready');
      }
    });
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->




<polymer-element name="pi-accounts" attributes="accounts" assetpath="components/">
  <template>
    <style>/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
@host {
  * {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: white;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }
}

.item {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  align-items: center;
  height: 60px;
  padding: 0 20px;
  border-bottom: 1px solid #ddd;
  font-size: 15px;
}

.item.no-border {
  border-bottom: 0;
}

.item > .item-input-label {
  min-width: 80px;
  color: #888;
  font-weight: bold;
}

.item > input {
  height: 32px;
  width: 100px;
  vertical-align: middle;
  margin-right: 10px;
  font-size: 15px;
}

.item > .flex {
  display: -webkit-box;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  flex: 1;
}

.header {
  background-color: #4D4D4D;
  color: #eee;
  font-size: 20px;
}

.accounts-title {
  background-color: #eee;
  color: #888;
  font-weight: bold;
}

.accounts-title-icon {
  margin-left: -8px;
  padding-right: 6px;
}

.category-select-value {
  padding: 0 4px 0 4px;
}

.button {
  -webkit-appearance: none;
  padding: 8px 14px 8px;
  background-color: #e6e6e6;
  background-repeat: no-repeat;
  background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);
  background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);
  border: 1px solid #ccc;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
  border-radius: 3px;
  font-size: 14px;
  color: #333;
}

.button:hover {
  background-position: 0 -15px;
}

.button:active {
  box-shadow: inset 0 3px 7px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
  color: #555;
}</style>
    <div class="item">
      <div class="flex"></div>
      <button class="button" on-tap="reset">Restore Defaults</button>
    </div>
    <div class="header item">Finance</div>
    <div>
      <template repeat="{{accounts.stocks}}">
        <div class="item">
          <div class="flex">{{}}</div>
          <g-icon-button src="images/clear.png" on-tap="removeStock"></g-icon-button>
        </div>
      </template>
    </div>
    <div class="item">
      <div class="item-input-label">Symbol: </div>
      <input id="symbol" autocorrect="off" operation="addStock" on-keyup="keyupHandler">
      <g-icon-button src="images/add.png" on-tap="addStock"></g-icon-button>
    </div>
    <div class="header item">Topics</div>
    <div class="item accounts-title">Add New Feed</div>
    <div class="item no-border">
      <div class="item-input-label">Url: </div>
      <input id="feed" type="url" class="flex" operation="addFeed" on-keyup="keyupHandler">
      <g-icon-button src="images/add.png" on-tap="addFeed"></g-icon-button>
    </div>
    <div class="item">
      <div class="item-input-label">Category: </div>
      <span class="category-select-value">{{selectedCategory}}</span>
      <g-menu-button id="categorySelect" selected="{{selectedCategory}}" src="images/arrow_dropdown.png">
        <template repeat="{{accounts.categories}}">
          <g-menu-item name="{{}}">{{}}</g-menu-item>
        </template>
      </g-menu-button>
    </div>
    <div class="item accounts-title">Add New Category</div>
    <div class="item">
      <div class="item-input-label">Name: </div>
      <input id="category" class="flex" operation="addCategory" on-keyup="keyupHandler">
      <g-icon-button src="images/add.png" on-tap="addCategory"></g-icon-button>
    </div>
    <div>
      <template repeat="{{accounts.topics}}">
        <div class="item accounts-title">
          <g-icon class="accounts-title-icon" src="images/folder.png"></g-icon>
          <div class="flex">{{title}}</div>
          <g-icon-button src="images/clear.png" on-tap="removeTopic"></g-icon-button>
        </div>
        <template repeat="{{feed}}">
          <div class="item">
            <div class="flex accounts-feed-title">{{title}}</div>
            <g-icon-button src="images/clear.png" on-tap="removeFeed"></g-icon-button>
          </div>
        </template>
      </template>
    </div>
    <pi-gfeeds feed="{{feedUrl}}" count="0" on-response="feedResponse" on-error="feedResponse"></pi-gfeeds>
  </template>
  <script>
    (function() {
      var ENTER_KEY = 13;
      
      Polymer('pi-accounts', {
        created: function() {
          this.setAttribute('touch-action', 'scroll');
          this.asyncFire('ready');
        },
        accountsChanged: function() {
          this.selectedCategory = this.accounts.categories[0];
        },
        addStock: function() {
          var s = this.$.symbol.value;
          if (s) {
            this.accounts.addStock(s);
            this.$.symbol.value = '';
          }
        },
        removeStock: function(event, detail, sender) {
          this.accounts.removeStock(sender.templateInstance.model);
        },
        addFeed: function() {
          var f = this.$.feed.value;
          if (f) {
            // verify feed and retrieve feed title
            this.feedUrl = f;
          }
        },
        feedResponse: function(event, detail) {
          var f = detail.feed;
          if (f) {
            this.accounts.addFeed({title: f.title, feed: f.feedUrl,
              category: this.selectedCategory});
            this.$.feed.value = '';
            this.feedUrl = null;
          } else {
            console.error('Error trying to add feed', detail);
          }
        },
        removeFeed: function(event, detail, sender) {
          this.accounts.removeFeed(sender.templateInstance.model);
        },
        removeTopic: function(event, detail, sender) {
          var m = sender.templateInstance.model;
          this.accounts.removeTopic(m);
          this.removeCategory(m.title);
        },
        addCategory: function() {
          var n = this.$.category.value;
          if (n) {
            this.accounts.addCategory(n);
            this.$.category.value = '';
          }
        },
        removeCategory: function(category) {
          this.accounts.removeCategory(category);
        },
        reset: function() {
          this.accounts.reset();
        },
        keyupHandler: function(e, detail, sender) {
          var op = sender.getAttribute('operation');
          if (e.keyCode === ENTER_KEY && op) {
            this[op]();
          }
        }
      });
    })();
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<polymer-element name="pi-accounts-model" attributes="topics categories stocks" assetpath="components/">
  <script>
    (function() {
      var DEFAULT_TOPICS = [
        {title: 'Technology', feed: [
          {title: 'The Verge', feed: 'http://www.theverge.com/rss/index.xml'},
          {title: 'Engadget', feed: 'http://feeds.engadget.com/weblogsinc/engadget'}]},
        {title: 'Sports', feed: [
          {title: 'Deadspin', feed: 'http://feeds.gawker.com/deadspin/full'}]},
        {title: 'Music', feed: [
          {title: 'Indie Shuffle', feed: 'http://feeds.feedburner.com/indieshuffle'},
          {title: 'Create Digital Music', feed: 'http://createdigitalmusic.com/feed/'}]},
        {title: 'Art', feed: [
          {title: 'Wooster Collective', feed: 'http://feeds.feedburner.com/wooster'},
          {title: 'Doodlers Anonymous', feed: 'http://feeds.feedburner.com/DoodlersAnonymous'},
          {title: 'but does it float', feed: 'http://feeds2.feedburner.com/ButDoesItFloat?format=xml'}]},
        {title: 'Fashion', feed: [
          {title: 'Hybebeast', feed: 'http://feeds.feedburner.com/hypebeast/feed'}]},
        {title: 'Architecture', feed: [
          {title: 'Dezeen', feed: 'http://feeds.feedburner.com/dezeen'},
          {title: 'Design Milk Architecutre', feed: 'http://feeds.feedburner.com/DesignMilkArchitecture'}]},
        {title: 'Design', feed: [
          {title: 'Design Milk', feed: 'http://feeds.feedburner.com/design-milk'},
          {title: 'Yummy Fresh grain', feed: 'http://feeds.feedburner.com/GrainEdit'},
          {title: 'Designspiration', feed: 'http://feeds.feedburner.com/dspn'}]},
        {title: 'Food', feed: [
          {title: 'The Kitchn', feed: 'http://feeds.thekitchn.com/apartmenttherapy/thekitchn'},
          {title: 'Scanwiches', feed: 'http://scanwiches.com/rss'}]}
      ];
      
      var DEFAULT_CATEGORIES = ['Technology', 'Sports', 'Music', 'Art', 'Fashion', 'Architecture', 'Design', 'Food'];
      
      var DEFAULT_STOCKS = ['GOOG', 'AAPL'];
      
      var ACCOUNTS_STORAGE_NAME = 'pica-accounts-model-1';
      
      Polymer('pi-accounts-model', {
        created: function() {
          this.load();
        },
        addTopic: function(topic) {
          this.addItem(this.topics, topic);
          this.updateTopics();
        },
        removeTopic: function(topic) {
          this.removeItem(this.topics, topic);
          this.updateTopics();
        },
        addFeed: function(feed) {
          for (var i=0, t; t = this.topics[i]; i++) {
            if (t.title === feed.category) {
              t.feed.push({title: feed.title, feed: feed.feed});
              this.save();
              return;
            }
          }
          this.addTopic({title: feed.category,
            feed: [{title: feed.title, feed: feed.feed}]});
        },
        removeFeed: function(feed) {
          this.topics.forEach(function(t) {
            if (t.feed) {
              this.removeItem(t.feed, feed);
            }
          }.bind(this));
        },
        addCategory: function(category) {
          this.addItem(this.categories, category);
        },
        removeCategory: function(category) {
          this.removeItem(this.categories, category);
        },
        addStock: function(stock) {
          this.addItem(this.stocks, stock);
        },
        removeStock: function(stock) {
          this.removeItem(this.stocks, stock);
        },
        reset: function() {
          this.topics = DEFAULT_TOPICS.slice(0);
          this.categories = DEFAULT_CATEGORIES.slice(0);
          this.stocks = DEFAULT_STOCKS.slice(0);
          this.save();
          this.load();
        },
        addItem: function(items, item) {
          items.push(item);
          this.save();
        },
        removeItem: function(items, item) {
          var i = items.indexOf(item);
          if (i >= 0) {
            items.splice(i, 1);
          }
          this.save();
        },
        load: function() {
          var s = window.localStorage.getItem(ACCOUNTS_STORAGE_NAME);
          if (s) {
            var a = JSON.parse(s);
            this.topics = a.topics;
            this.categories = a.categories;
            this.stocks = a.stocks;
          } else {
            this.reset();
          }
        },
        save: function() {
          window.localStorage.setItem(ACCOUNTS_STORAGE_NAME, JSON.stringify({
            topics: this.topics, categories: this.categories, stocks: this.stocks}));
        },
        updateTopics: function() {
          // force to mutate topics to trigger property changed (e.g. itemsChanged in pi-items-view)
          this.topics = this.topics.slice(0);
        }
      });
    })();
  </script>
</polymer-element>

<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->










<polymer-element name="pi-app" on-keyup="keyupHandler" assetpath="components/">
  <template>
    <style>/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
 @host {
   :scope {
      /* fit to container */
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    
      /* layout content using flexbox */
      display: -webkit-box;
      display: -webkit-flex;
      display: flex;
      -webkit-box-orient: vertical;
      -webkit-flex-flow: column;
      flex-direction: column;
      
      /* convenient defaults */
      font-family: 'Helvetica Neue', Helvetica, Arial, 'open sans', sans-serif;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }
 }

#panels, #contentPanels, #Topics {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  flex: 1;
  overflow: hidden;
}

#ribbon {
  width: 260px;
}

#ribbon.narrow-layout {
  left: 0;
  right: 60px;
  width: auto;
}

#main {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-flex-flow: column;
  flex-direction: column;
  background: white; 
}

#Accounts > .panel-loading, #Home > .panel-loading {
	position: absolute;
  width: 50px;
  height: 50px;
  left: 50%;
  bottom: 50%;
  margin: -25px;
  -webkit-animation: spin 2s linear infinite;
  animation: spin 2s linear infinite;
  background: url(images/loading_icon.svg);
}

#Accounts.ready > .panel-loading, #Home.ready > .panel-loading {
  display: none;
}
    
@-webkit-keyframes spin {
  0% {-webkit-transform: rotate(0deg);}
  100% {-webkit-transform: rotate(359deg);}
}

@keyframes spin {
  0% {transform: rotate(0deg);}
  100% {transform: rotate(359deg);}
}

@media screen and (max-width: 800px) {
  #contentPanels:not([hideactionbar=true]) {
    margin-bottom: 60px;
  }
}
</style>
    <g-panels id="panels" selected="{{selectedPanel}}" transition="flow" autoselect="" on-g-panels-select="panelSelectAction">
      <g-ribbon id="ribbon" class="custom-panel" label="Pica" selected="{{ribbonSelected}}" valueattr="label" on-activate="showMain">
        <template if="{{activatedPanels.ribbon}}">
          <g-menu-item label="Home" src="images/ribbon_home_lightreg.png" iconsize="32"></g-menu-item>
          <g-menu-item label="Topics" src="images/ribbon_topics_lightreg.png" iconsize="32"></g-menu-item>
          <g-menu-item label="Explore" src="images/ribbon_explore_lightreg.png" iconsize="32"></g-menu-item>
          <g-menu-item label="Accounts" src="images/ribbon_accounts_lightreg.png" iconsize="32"></g-menu-item>
        </template>
      </g-ribbon>
      <div id="main" on-tap="showMain">
        <pi-toolbar label="{{toolbarLabel}}" nav="{{nav}}" hideactionbar="{{hideActionbar}}" on-nav-action="navAction">
          <pi-link-button id="linkButton" link="{{story.link}}" hidden?="{{hideLinkButton}}"></pi-link-button>
          <pi-view-button id="viewButton" layout="{{selectedLayout}}" hidden?="{{hideViewButton}}"></pi-view-button>
          <pi-action-button></pi-action-button>
          <g-icon-button src="images/refresh.png" on-tap="reloadAction"></g-icon-button>
        </pi-toolbar>
        <g-panels id="contentPanels" selected="{{ribbonSelected}}" transition="none" hideactionbar="{{hideActionbar}}">
          <div id="Home"><template if="{{activatedPanels.Home}}">
              <pi-home stocks="{{$.accountsModel.stocks}}"></pi-home>
          </template></div>
          <pi-feed-viewer id="Topics" topics="{{$.accountsModel.topics}}" panel="{{selectedViewPanel}}" layout="{{layout}}" topicslayout="grid" story="{{story}}"></pi-feed-viewer>
          <div id="Explore"><template if="{{activatedPanels.Explore}}">
            <pi-explore panel="{{selectedViewPanel}}"></pi-explore>
          </template></div>
          <div id="Accounts"><template if="{{activatedPanels.Accounts}}">
              <pi-accounts accounts="{{$.accountsModel}}"></pi-accounts>
          </template></div>
        </g-panels>
      </div>
    </g-panels>
    <pi-accounts-model id="accountsModel"></pi-accounts-model>
  </template>
  <script>
    (function() {
      var ESCAPE_KEY = 27;
      
      Polymer('pi-app', {
        ribbonSelected: 'Topics',
        selectedPanel: 'main',
        selectedViewPanel: '',
        selectedLayout: null,
        created: function() {
          this.activatedPanels = {};
          // listen for screen size change
          var mq = window.matchMedia('(max-width: 800px)');
          mq.addListener(this.screenSizeChange.bind(this));
          this.screenSizeChange(mq);
          // initialization
          this.selectedLayout = this.layout;
          this.selectedViewPanel = 'topics';
        },
        enteredDocument: function() {
          this.super();
        },
        screenSizeChange: function(query) {
          if (query.matches && this.selectedLayout === 'quilt') {
            // use stream layout if user select quilt and screen size is small
            this.layout = 'stream';
          } else {
            this.layout = this.selectedLayout ||
                (query.matches ? 'stream' : 'quilt');
          }
        },
        selectedLayoutChanged: function() {
          this.layout = this.selectedLayout;
        },
        getSelectedContentPanel: function() {
          return this.$.contentPanels.getSelectedPanel();
        },
        navAction: function() {
          var p = this.getSelectedContentPanel();
          if (!(p.previous && p.previous())) {
            this.$.panels.toggleBetween('ribbon', 'main');
          }
        },
        showMain: function() {
          this.selectedPanel = 'main';
        },
        reloadAction: function() {
          var p = this.getSelectedContentPanel();
          p.reload && p.reload();
        },
        ribbonSelectedChanged: function() {
          this.updateToolbar();
        },
        selectedViewPanelChanged: function() {
          this.updateToolbar();
        },
        updateToolbar: function() {
          var p = this.getSelectedContentPanel();
          this.toolbarLabel = p && p.canPrevious && p.topic ?
              p.topic.title : this.ribbonSelected;
          this.nav = p && p.canPrevious ? 'back' : 'menu';
          this.hideActionbar = this.ribbonSelected !== 'Topics';
          this.hideViewButton = this.selectedViewPanel !== 'stories';
          this.hideLinkButton = this.selectedViewPanel !== 'story';
        },
        keyupHandler: function(e) {
          if (e.keyCode === ESCAPE_KEY) {
            this.navAction();
          }
        },
        // instantiate lazy content
        panelSelectAction: function(e) {
          if (e.target.selected) {
            this.activatedPanels[e.target.selected] = true;
          }
        },
        accountsReadyHandler: function(e) {
          this.$.Accounts.classList.add('ready');
        },
        homeReadyHandler: function(e) {
          this.$.Home.classList.add('ready');
        }
      });
    })();
  </script>
</polymer-element>
<style>
    body {
      opacity: 1;
    }
    
    .app-loading {
      position: absolute;
      width: 50px;
      height: 50px;
      left: 50%;
      bottom: 50%;
      margin: -25px;
/*      -webkit-animation: spin 2s linear infinite;
      animation: spin 2s linear infinite;*/
      background: url(images/loading_icon.svg);
    }
    
    @-webkit-keyframes spin {
      0% {-webkit-transform: rotate(0deg);}
      100% {-webkit-transform: rotate(359deg);}
    }
    
    @keyframes spin {
      0% {transform: rotate(0deg);}
      100% {transform: rotate(359deg);}
    }
  </style>
  <script>
    Polymer.preventUpgrades = false;
  </script>
</head>
<body>
  <pi-app>
    <div class="app-loading"></div>
  </pi-app>
</body>
</html>
